
Running 652 tests using 8 workers

  x    2 [e2e] › tests\e2e\admin-user-management.spec.ts:115:7 › Admin User Management E2E › [P0] Should load users list page (0ms)
  -    9 [e2e] › tests\e2e\admin-user-management.spec.ts:123:7 › Admin User Management E2E › [P0] Should navigate to user detail page from users list
  x    3 [e2e] › tests\e2e\admin-user-management.spec.ts:338:7 › Admin User Management E2E › [P1] Should show validation error for invalid email format (1ms)
  -   10 [e2e] › tests\e2e\admin-user-management.spec.ts:359:7 › Admin User Management E2E › [P1] Should prevent duplicate email addresses
  x    6 [e2e] › tests\e2e\admin-user-management.spec.ts:456:7 › Admin User Management E2E › [P1] Should filter users by status (0ms)
  x    4 [e2e] › tests\e2e\admin-user-management.spec.ts:190:7 › Admin User Management E2E › [P0] Should create a new user (1ms)
  -   11 [e2e] › tests\e2e\admin-user-management.spec.ts:234:7 › Admin User Management E2E › [P0] Should assign role to user
  x    5 [e2e] › tests\e2e\admin-user-management.spec.ts:282:7 › Admin User Management E2E › [P0] Should remove role from user (5ms)
  x    7 [e2e] › tests\e2e\admin-user-management.spec.ts:379:7 › Admin User Management E2E › [P1] Should display properly on mobile screens (1ms)
  -   12 [e2e] › tests\e2e\admin-user-management.spec.ts:321:7 › Admin User Management E2E › [P1] Should show validation error for empty user name
  -   13 [e2e] › tests\e2e\admin-user-management.spec.ts:391:7 › Admin User Management E2E › [P1] Should display users list properly on mobile
  x    1 [e2e] › tests\e2e\admin-user-management.spec.ts:135:7 › Admin User Management E2E › [P0] Should successfully edit user name (18.9s)
  x   17 [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:97:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-002: should display header with user info and logout when user is authenticated (16.4s)
  x   18 [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:197:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-004: should handle logout functionality correctly (16.4s)
  ok  22 [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:391:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-008: should use (auth) route group layout for authentication pages (1.5s)
  ok  21 [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:354:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-007: should apply design system typography correctly (2.0s)
  x    8 [e2e] › tests\e2e\admin-user-management.spec.ts:410:7 › Admin User Management E2E › [P1] Should display role assignment dialog properly on mobile (24.2s)
  x   19 [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:278:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-005: should display responsive sidebar (collapsible on mobile) (38.0s)
  x   23 [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:413:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-009: should use (dashboard) route group layout for dashboard pages (16.6s)
  x   24 [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:461:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-010: should display user menu dropdown with profile and logout options (16.8s)
  x   15 [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:160:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-003: should route correctly when navigation links are clicked (39.1s)
  x   16 [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:314:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-006: should apply design system colors correctly (39.2s)
  x   14 [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:57:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-001: should display dashboard layout with sidebar navigation when user is authenticated (39.3s)
  x   31 [e2e] › tests\e2e\client-form-email-password.spec.ts:486:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should show validation error when updating password with mismatched confirmation (2ms)
  -   32 [e2e] › tests\e2e\client-form-email-password.spec.ts:507:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should keep existing password when field is left blank
  -   33 [e2e] › tests\e2e\client-form-email-password.spec.ts:535:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should show validation error for invalid email on update
  x   20 [e2e] › tests\e2e\admin-user-management.spec.ts:162:7 › Admin User Management E2E › [P0] Should successfully change user status (22.5s)
  x   25 [e2e] › tests\e2e\admin-user-management.spec.ts:437:7 › Admin User Management E2E › [P0] Should search users by name or email (24.5s)
  ok  26 [e2e] › tests\e2e\client-companies-modal.spec.ts:191:7 › Client Companies Modal E2E › [P0] Should display clickable company count in client list (20.1s)
  ok  27 [e2e] › tests\e2e\client-form-email-password.spec.ts:131:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should display email and password fields in create form (22.3s)
  ok  28 [e2e] › tests\e2e\client-form-email-password.spec.ts:190:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should show validation error for short password (22.2s)
  x   34 [e2e] › tests\e2e\client-form-email-password.spec.ts:549:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should show validation error for short password on update (17.9s)
  ok  35 [e2e] › tests\e2e\client-form-email-password.spec.ts:635:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should toggle confirm password visibility independently (22.5s)
  x   29 [e2e] › tests\e2e\client-form-email-password.spec.ts:254:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should successfully create client with email and password (32.1s)
  ok  36 [e2e] › tests\e2e\client-form-email-password.spec.ts:769:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should disable toggle buttons when form is submitting (23.7s)
  ok  37 [e2e] › tests\e2e\client-companies-modal.spec.ts:206:7 › Client Companies Modal E2E › [P0] Should open modal when clicking company count in list (18.4s)
  ok  38 [e2e] › tests\e2e\client-form-email-password.spec.ts:167:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should show validation error for missing email (16.5s)
  ok  39 [e2e] › tests\e2e\client-form-email-password.spec.ts:206:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should show validation error when passwords do not match (16.5s)
  x   30 [e2e] › tests\e2e\client-form-email-password.spec.ts:398:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should show password placeholder indicating optional update (39.2s)
  x   40 [e2e] › tests\e2e\client-form-email-password.spec.ts:567:9 › Client Form Email and Password E2E › Field Accessibility › [P0] Email and password fields should have proper labels and descriptions (17.3s)
  ok  41 [e2e] › tests\e2e\client-form-email-password.spec.ts:673:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should maintain independent visibility states for password and confirm password (17.0s)
  ok  44 [e2e] › tests\e2e\client-companies-modal.spec.ts:229:7 › Client Companies Modal E2E › [P0] Should display company names in modal (24.2s)
  x   42 [e2e] › tests\e2e\client-form-email-password.spec.ts:801:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should work on edit form as well (33.3s)
  x   43 [e2e] › tests\e2e\client-form-email-password.spec.ts:293:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should successfully create client with email but no password (35.0s)
  x   48 [e2e] › tests\e2e\client-form-email-password.spec.ts:723:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should have accessible toggle buttons with proper ARIA labels (30.4s)
  x   46 [e2e] › tests\e2e\client-form-email-password.spec.ts:226:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should allow submission when passwords match (35.3s)
  x   49 [e2e] › tests\e2e\client-form-email-password.spec.ts:593:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should toggle password visibility when eye icon is clicked (31.8s)
  x   47 [e2e] › tests\e2e\client-form-email-password.spec.ts:431:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should successfully update client email (45.9s)
  x   45 [e2e] › tests\e2e\client-form-email-password.spec.ts:178:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should show validation error for invalid email format (53.6s)
  ok  50 [e2e] › tests\e2e\client-companies-modal.spec.ts:245:7 › Client Companies Modal E2E › [P0] Should close modal when clicking outside or close button (37.1s)
  ok  51 [e2e] › tests\e2e\client-management.spec.ts:105:7 › Client Management E2E › [P0] Should load clients list page (43.0s)
  x   56 [e2e] › tests\e2e\client-form-email-password.spec.ts:454:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should successfully update client password (33.2s)
  x   53 [e2e] › tests\e2e\client-management.spec.ts:198:7 › Client Management E2E › [P0] Should successfully edit client metadata and stay on page (49.0s)
  x   52 [e2e] › tests\e2e\client-form-email-password.spec.ts:386:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should pre-fill email field when editing client (55.4s)
  x   54 [e2e] › tests\e2e\client-management.spec.ts:290:7 › Client Management E2E › [P0] Should create a new client (57.3s)
  ok  58 [e2e] › tests\e2e\client-companies-modal.spec.ts:264:7 › Client Companies Modal E2E › [P0] Should show empty state for client with no companies (48.5s)
  x   55 [e2e] › tests\e2e\client-management.spec.ts:377:7 › Client Management E2E › [P1] Should display delete dialog properly on mobile screens (1.3m)
  x   57 [e2e] › tests\e2e\client-management.spec.ts:482:7 › Client Management E2E › [P0] Should support direct navigation via public_id URL (1.3m)
  x   61 [e2e] › tests\e2e\client-management.spec.ts:244:7 › Client Management E2E › [P1] Should show validation error for empty client name (58.3s)
  x   62 [e2e] › tests\e2e\client-management.spec.ts:640:7 › Client Management E2E › [P0] Should deactivate client from list with confirmation dialog (57.5s)
  x   59 [e2e] › tests\e2e\client-management.spec.ts:116:7 › Client Management E2E › [P0] Should navigate to client detail page from clients list (1.4m)
  x   63 [e2e] › tests\e2e\client-management.spec.ts:333:7 › Client Management E2E › [P1] Should cancel client edit without saving changes (1.0m)
  x   60 [e2e] › tests\e2e\client-management.spec.ts:536:7 › Client Management E2E › [P1] Should not expose UUID in visible page content (1.3m)
  x   64 [e2e] › tests\e2e\client-companies-modal.spec.ts:286:7 › Client Companies Modal E2E › [P0] Should display company count on client detail page (1.4m)
  -   72 [e2e] › tests\e2e\client-companies-modal.spec.ts:302:7 › Client Companies Modal E2E › [P0] Should open modal from client detail page
  -   73 [e2e] › tests\e2e\client-companies-modal.spec.ts:321:9 › Client Companies Modal E2E › Modal Responsiveness › [P0] Should not overflow on mobile viewport (375px)
  -   74 [e2e] › tests\e2e\client-companies-modal.spec.ts:351:9 › Client Companies Modal E2E › Modal Responsiveness › [P0] Should not overflow on small mobile (320px)
  -   75 [e2e] › tests\e2e\client-companies-modal.spec.ts:378:9 › Client Companies Modal E2E › Modal Responsiveness › [P0] Should be scrollable when content exceeds viewport height
  -   76 [e2e] › tests\e2e\client-companies-modal.spec.ts:409:9 › Client Companies Modal E2E › Modal Responsiveness › [P0] Should be properly centered on tablet (768px)
  -   77 [e2e] › tests\e2e\client-companies-modal.spec.ts:437:9 › Client Companies Modal E2E › Modal Responsiveness › [P0] Should wrap long company names without overflow
  -   78 [e2e] › tests\e2e\client-companies-modal.spec.ts:480:9 › Client Companies Modal E2E › Modal Responsiveness › [P0] Should maintain responsiveness across viewport changes
  x   67 [e2e] › tests\e2e\client-management.spec.ts:266:7 › Client Management E2E › [P1] Should show validation error for invalid JSON metadata (55.8s)
  x   69 [e2e] › tests\e2e\client-management.spec.ts:138:7 › Client Management E2E › [P0] Should successfully edit client name and status with confirmation (49.4s)
  x   68 [e2e] › tests\e2e\client-management.spec.ts:691:7 › Client Management E2E › [P0] Should delete client from list with text input confirmation (54.3s)
  x   81 [e2e] › tests\e2e\company-management.spec.ts:138:7 › Company Management E2E › [P0] Should successfully edit company name and status (1ms)
  -   83 [e2e] › tests\e2e\company-management.spec.ts:176:7 › Company Management E2E › [P0] Should successfully change company's client assignment
  x   65 [e2e] › tests\e2e\client-management.spec.ts:401:7 › Client Management E2E › [P1] Should successfully delete INACTIVE client with text confirmation (1.5m)
  x   71 [e2e] › tests\e2e\client-management.spec.ts:563:7 › Client Management E2E › [P0] Should display quick action buttons on client list (37.3s)
  x   70 [e2e] › tests\e2e\client-management.spec.ts:359:7 › Client Management E2E › [P0] Should prevent deletion of ACTIVE client (50.9s)
  x   79 [e2e] › tests\e2e\client-management.spec.ts:802:7 › Client Management E2E › [P0] Should cancel status change when clicking cancel in dialog (35.9s)
  x   66 [e2e] › tests\e2e\client-management.spec.ts:503:7 › Client Management E2E › [P0] Should support backward compatibility with UUID URLs (1.7m)
  x   80 [e2e] › tests\e2e\company-management.spec.ts:116:7 › Company Management E2E › [P0] Should load companies list page (1.0m)
  x   82 [e2e] › tests\e2e\client-management.spec.ts:749:7 › Client Management E2E › [P0] Should prevent deleting ACTIVE client from list (59.9s)
  x   91 [e2e] › tests\e2e\company-management.spec.ts:307:7 › Company Management E2E › [P1] Should display properly on mobile screens (1ms)
  x   89 [e2e] › tests\e2e\client-management.spec.ts:519:7 › Client Management E2E › [P1] Should show error for invalid public_id format (37.8s)
  x   84 [e2e] › tests\e2e\client-management.spec.ts:458:7 › Client Management E2E › [P0] Should use public_id in URL when navigating to client detail (1.0m)
  x   85 [e2e] › tests\e2e\company-management.spec.ts:205:7 › Company Management E2E › [P0] Should create a new company (1.0m)
  x   86 [e2e] › tests\e2e\client-management.spec.ts:589:7 › Client Management E2E › [P0] Should activate client from list with confirmation dialog (1.0m)
  x   87 [e2e] › tests\e2e\company-management.spec.ts:259:7 › Company Management E2E › [P0] Should prevent deletion of ACTIVE company (1.0m)
  x   88 [e2e] › tests\e2e\client-management.spec.ts:832:7 › Client Management E2E › [P0] Should stay on edit page after multiple updates (56.8s)
  x   90 [e2e] › tests\e2e\company-management.spec.ts:124:7 › Company Management E2E › [P0] Should navigate to company detail page from companies list (36.3s)
  x   95 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:80:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-002: should switch theme from light to dark when toggle is clicked (34.5s)
  x   92 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:41:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-000: should NOT display dark mode toggle button on login page (unauthenticated) (36.8s)
  x   94 [e2e] › tests\e2e\company-management.spec.ts:240:7 › Company Management E2E › [P1] Should show validation error for empty company name (35.9s)
  x   96 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:112:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-003: should switch theme from dark to light when toggle is clicked (34.6s)
  x   97 [e2e] › tests\e2e\company-management.spec.ts:275:7 › Company Management E2E › [P1] Should successfully delete INACTIVE company (35.8s)
  x   93 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:55:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-001: should display dark mode toggle button in header when authenticated (50.1s)
  x   98 [e2e] › tests\e2e\client-management.spec.ts:876:7 › Client Management E2E › [P1] Should prevent wrong text in delete confirmation (41.6s)
  ok 103 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:295:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-008: should not persist theme preference for unauthenticated users (19.3s)
  ok 106 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:417:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-011: should apply theme immediately on login without refresh (light preference) (11.0s)
  x   99 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:144:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-004: should persist theme preference after page refresh (29.1s)
  x  100 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:182:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-005: should save theme preference to localStorage with key 'nuvana-theme' (29.6s)
  x  101 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:212:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-006: should display header elements in correct order (title, toggle, username, logout) (30.6s)
  x  102 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:253:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-007: should reset theme to light mode on logout (30.6s)
  x  104 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:318:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-009: should restore user's theme preference on subsequent login (29.9s)
  ok 111 [e2e] › tests\e2e\health-check.spec.ts:15:7 › E2E-001: Health Check - Critical Paths › [P0] E2E-001-001: Health check endpoint should be accessible from frontend (77ms)
  ok 112 [e2e] › tests\e2e\health-check.spec.ts:33:7 › E2E-001: Health Check - Critical Paths › [P0] E2E-001-002: Health check should report all services as healthy (76ms)
  ok 115 [e2e] › tests\e2e\health-check.spec.ts:49:7 › E2E-001: Health Check - Critical Paths › [P1] E2E-001-003: Health check should include version information (71ms)
  ok 107 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:451:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-012: should default to light theme when user has no saved preference (13.3s)
  x  105 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:383:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-010: should apply theme immediately on login without refresh (dark preference) (43.6s)
  x  108 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:489:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-013: should apply User B's light preference when User B logs in (after User A with dark) (37.4s)
  x  109 [e2e] › tests\e2e\dark-mode-toggle.spec.ts:559:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-014: should restore theme immediately on page load with existing session (37.7s)
  x  110 [e2e] › tests\e2e\debug-modal-width.spec.ts:117:7 › Debug Modal Width › Debug modal width and classes on 375px viewport (43.0s)
  x  113 [e2e] › tests\e2e\homepage-contact-form.spec.ts:11:7 › E2E-003: Homepage Contact Form › [P0] should submit contact form with valid data (45.3s)
  x  114 [e2e] › tests\e2e\homepage-contact-form.spec.ts:43:7 › E2E-003: Homepage Contact Form › [P1] should prevent submission with empty required fields (45.2s)
  x  117 [e2e] › tests\e2e\homepage-contact-form.spec.ts:91:7 › E2E-003: Homepage Contact Form › [P1] should disable submit button while form is submitting (45.3s)
  x  116 [e2e] › tests\e2e\homepage-contact-form.spec.ts:73:7 › E2E-003: Homepage Contact Form › [P1] should validate email format (45.4s)
  x  118 [e2e] › tests\e2e\homepage-contact-form.spec.ts:124:7 › E2E-003: Homepage Contact Form › [P2] should clear form fields after successful submission (42.8s)
  x  119 [e2e] › tests\e2e\homepage-contact-form.spec.ts:159:7 › E2E-003: Homepage Contact Form › [P1] should display error message on form submission failure (43.2s)
  x  120 [e2e] › tests\e2e\homepage.spec.ts:11:7 › E2E-002: Homepage - Marketing Page › [P0] should load homepage and display hero section (43.1s)
  x  121 [e2e] › tests\e2e\homepage.spec.ts:26:7 › E2E-002: Homepage - Marketing Page › [P0] should display all four pain point cards (42.9s)
  x  122 [e2e] › tests\e2e\homepage.spec.ts:53:7 › E2E-002: Homepage - Marketing Page › [P1] should scroll to contact form when clicking Get Started button (44.8s)
  x  123 [e2e] › tests\e2e\homepage.spec.ts:74:7 › E2E-002: Homepage - Marketing Page › [P1] should display contact form with all required fields (44.9s)
  x  124 [e2e] › tests\e2e\homepage.spec.ts:98:7 › E2E-002: Homepage - Marketing Page › [P1] should display benefits section with key features (44.9s)
  x  125 [e2e] › tests\e2e\homepage.spec.ts:122:7 › E2E-002: Homepage - Marketing Page › [P2] should display key statistics in benefits section (44.8s)
  x  131 [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on iPad Mini (768x1024) (0ms)
  x  126 [e2e] › tests\e2e\homepage.spec.ts:136:7 › E2E-002: Homepage - Marketing Page › [P1] should navigate to dashboard when clicking View Dashboard button (42.8s)
  x  127 [e2e] › tests\e2e\homepage.spec.ts:149:7 › E2E-002: Homepage - Marketing Page › [P2] should have responsive layout on mobile viewport (43.3s)
  x  128 [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on iPhone SE (375x667) (39.4s)
  x  129 [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on iPhone 12 Pro (390x844) (35.8s)
  x  133 [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:232:7 › Mobile Alert Dialog Responsiveness › [P1] Alert dialog should be scrollable if content is too tall (35.4s)
  x  132 [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:193:7 › Mobile Alert Dialog Responsiveness › [P1] Alert dialog content should not get cut off on small screens (35.7s)
  x  130 [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on Samsung Galaxy S20 (360x800) (36.9s)
  x  134 [e2e] › tests\e2e\mobile-sidebar.spec.ts:10:7 › Mobile Sidebar [P0] › [P0] should open sidebar when hamburger menu is clicked (44.9s)
  x  135 [e2e] › tests\e2e\mobile-sidebar.spec.ts:22:7 › Mobile Sidebar [P0] › [P0] should close sidebar when overlay is clicked (30.0s)
  ok 139 [e2e] › tests\e2e\mobile-sidebar.spec.ts:101:7 › Mobile Sidebar [P0] › [P1] should not block pointer events on content when closed (11.8s)
  ok 141 [e2e] › tests\e2e\mobile-sidebar.spec.ts:122:7 › Desktop Sidebar [P1] › [P1] should not show hamburger menu on desktop (11.7s)
  x  145 [e2e] › tests\e2e\store-management.spec.ts:297:7 › Store Management E2E › [P0] Should successfully update store configuration (operating hours) (0ms)
  -  146 [e2e] › tests\e2e\store-management.spec.ts:337:7 › Store Management E2E › [P1] Should show validation error for empty store name
  x  137 [e2e] › tests\e2e\mobile-sidebar.spec.ts:68:7 › Mobile Sidebar [P0] › [P0] should have accessible title and description (27.9s)
  x  138 [e2e] › tests\e2e\mobile-sidebar.spec.ts:85:7 › Mobile Sidebar [P0] › [P1] should close sidebar when navigation link is clicked (28.3s)
  x  136 [e2e] › tests\e2e\mobile-sidebar.spec.ts:43:7 › Mobile Sidebar [P0] › [P0] should allow content interaction when sidebar is closed (44.3s)
  ok 150 [api] › tests\api\backend-setup.api.spec.ts:22:7 › 1.2-API-001: Backend Setup - Health Check › [P0] 1.2-API-001-001: GET /api/health should return 200 OK with status (79ms)
  ok 151 [api] › tests\api\backend-setup.api.spec.ts:38:7 › 1.2-API-001: Backend Setup - Health Check › [P1] 1.2-API-001-002: GET /api/health should include server metadata (27ms)
  ok 152 [api] › tests\api\backend-setup.api.spec.ts:56:7 › 1.2-API-002: Backend Setup - CORS Middleware › [P1] 1.2-API-002-001: OPTIONS request should return CORS headers (19ms)
  ok 153 [api] › tests\api\backend-setup.api.spec.ts:73:7 › 1.2-API-002: Backend Setup - CORS Middleware › [P1] 1.2-API-002-002: GET request should include CORS headers (19ms)
  ok 154 [api] › tests\api\backend-setup.api.spec.ts:91:7 › 1.2-API-003: Backend Setup - Security Headers (Helmet) › [P0] 1.2-API-003-001: Response should include security headers (24ms)
  ok 155 [api] › tests\api\backend-setup.api.spec.ts:109:7 › 1.2-API-004: Backend Setup - Rate Limiting › [P1] 1.2-API-004-001: should allow requests within rate limit (107ms)
  ok 156 [api] › tests\api\backend-setup.api.spec.ts:126:7 › 1.2-API-004: Backend Setup - Rate Limiting › [P1] 1.2-API-004-002: should return 429 when rate limit exceeded (860ms)
  ok 157 [api] › tests\api\backend-setup.api.spec.ts:158:7 › 1.2-API-005: Backend Setup - Server Configuration › [P0] 1.2-API-005-001: server should start on configured port (17ms)
  ok 158 [api] › tests\api\backend-setup.api.spec.ts:169:7 › 1.2-API-005: Backend Setup - Server Configuration › [P2] 1.2-API-005-002: server should handle graceful shutdown (15ms)
  ok 159 [api] › tests\api\client-email-password.api.spec.ts:31:7 › Client Unified Authentication - Create Operations › [P0] POST /api/clients - should create User + Client + UserRole link with CLIENT_OWNER role (228ms)
  ok 160 [api] › tests\api\client-email-password.api.spec.ts:94:7 › Client Unified Authentication - Create Operations › [P0] POST /api/clients - should require password for client creation (60ms)
  ok 161 [api] › tests\api\client-email-password.api.spec.ts:119:7 › Client Unified Authentication - Create Operations › [P0] POST /api/clients - should reject missing email (70ms)
  ok 162 [api] › tests\api\client-email-password.api.spec.ts:142:7 › Client Unified Authentication - Create Operations › [P0] POST /api/clients - should reject invalid email format (62ms)
  ok 163 [api] › tests\api\client-email-password.api.spec.ts:166:7 › Client Unified Authentication - Create Operations › [P0] POST /api/clients - should reject password shorter than 8 characters (58ms)
  ok 164 [api] › tests\api\client-email-password.api.spec.ts:192:7 › Client Unified Authentication - Create Operations › [P0] POST /api/clients - should reject duplicate email (User table uniqueness) (246ms)
  ok 165 [api] › tests\api\client-email-password.api.spec.ts:223:7 › Client Unified Authentication - Update Operations › [P0] PUT /api/clients/:id - should update both User and Client email (239ms)
  ok 166 [api] › tests\api\client-email-password.api.spec.ts:269:7 › Client Unified Authentication - Update Operations › [P0] PUT /api/clients/:id - should update User password (hashed) (401ms)
  ok 167 [api] › tests\api\client-email-password.api.spec.ts:321:7 › Client Unified Authentication - Update Operations › [P0] PUT /api/clients/:id - should not update password when not provided (197ms)
  ok 168 [api] › tests\api\client-email-password.api.spec.ts:360:7 › Client Unified Authentication - Update Operations › [P0] PUT /api/clients/:id - should reject short password on update (160ms)
  ok 169 [api] › tests\api\client-email-password.api.spec.ts:392:7 › Client Unified Authentication - Security › [P0] POST /api/clients - password should be hashed using bcrypt in User table (229ms)
  ok 170 [api] › tests\api\client-email-password.api.spec.ts:437:7 › Client Unified Authentication - Security › [P0] GET /api/clients - password hash should not be returned in API response (153ms)
  ok 171 [api] › tests\api\client-email-password.api.spec.ts:465:7 › Client Unified Authentication - Security › [P0] GET /api/clients (list) - password hash should not be returned in list (213ms)
  ok 172 [api] › tests\api\client-email-password.api.spec.ts:495:7 › Client Unified Authentication - Login Flow › [P0] POST /api/auth/login - client should be able to login with User credentials (499ms)
  x  173 [api] › tests\api\client-management.api.spec.ts:20:7 › Client Management API - CRUD Operations › [P0] POST /api/clients - should create client with valid data (AC #1) (77ms)
  ok 174 [api] › tests\api\client-management.api.spec.ts:67:7 › Client Management API - CRUD Operations › [P0] POST /api/clients - should reject invalid data (missing name) (AC #1) (144ms)
  ok 175 [api] › tests\api\client-management.api.spec.ts:85:7 › Client Management API - CRUD Operations › [P0] POST /api/clients - should reject invalid status value (AC #1) (68ms)
  ok 176 [api] › tests\api\client-management.api.spec.ts:103:7 › Client Management API - CRUD Operations › [P0] POST /api/clients - should reject non-admin users (AC #1) (156ms)
  ok 177 [api] › tests\api\client-management.api.spec.ts:122:7 › Client Management API - CRUD Operations › [P0] GET /api/clients - should list all clients with pagination (AC #2) (120ms)
  ok 178 [api] › tests\api\client-management.api.spec.ts:157:7 › Client Management API - CRUD Operations › [P1] GET /api/clients - should support search/filter by name (AC #2) (107ms)
  ok 179 [api] › tests\api\client-management.api.spec.ts:182:7 › Client Management API - CRUD Operations › [P1] GET /api/clients - should filter by status (AC #2) (114ms)
  ok 180 [api] › tests\api\client-management.api.spec.ts:206:7 › Client Management API - CRUD Operations › [P0] GET /api/clients/:clientId - should retrieve client by ID with company count (AC #3) (127ms)
  ok 181 [api] › tests\api\client-management.api.spec.ts:239:7 › Client Management API - CRUD Operations › [P0] GET /api/clients/:clientId - should return 404 for non-existent client (AC #3) (82ms)
  x  182 [api] › tests\api\client-management.api.spec.ts:257:7 › Client Management API - CRUD Operations › [P0] PUT /api/clients/:clientId - should update client (AC #3) (135ms)
  x  183 [api] › tests\api\client-management.api.spec.ts:305:7 › Client Management API - CRUD Operations › [P0] PUT /api/clients/:clientId - should log status change to INACTIVE (AC #4) (194ms)
  x  140 [e2e] › tests\e2e\mobile-sidebar.spec.ts:117:7 › Desktop Sidebar [P1] › [P1] should always show sidebar on desktop (44.8s)
  x  184 [api] › tests\api\client-management.api.spec.ts:342:7 › Client Management API - CRUD Operations › [P0] DELETE /api/clients/:clientId - should soft delete client (AC #5) (265ms)
  ok 185 [api] › tests\api\client-management.api.spec.ts:378:7 › Client Management API - CRUD Operations › [P1] GET /api/clients - should exclude soft-deleted clients by default (AC #5) (223ms)
  ok 186 [api] › tests\api\client-management.api.spec.ts:424:7 › Client Management API - Permission Enforcement › [P0] All endpoints should require System Admin role (202ms)
  x  187 [api] › tests\api\client-management.api.spec.ts:462:7 › Client Management API - Business Logic › [P0] DELETE /api/clients/:clientId - should cascade soft delete to associated companies (AC #5) (160ms)
  ok 188 [api] › tests\api\client-management.api.spec.ts:401:7 › Client Management API - CRUD Operations › [P1] DELETE /api/clients/:clientId - should reject deleting ACTIVE client (AC #5) (201ms)
  x  189 [api] › tests\api\client-management.api.spec.ts:549:7 › Client Management API - Business Logic › [P2] POST /api/clients - should allow duplicate client names (names not unique) (141ms)
  x  142 [e2e] › tests\e2e\store-management.spec.ts:139:7 › Store Management E2E › [P0] Should load stores list page (39.2s)
  x  143 [e2e] › tests\e2e\store-management.spec.ts:223:7 › Store Management E2E › [P0] Should successfully change store timezone (38.6s)
  x  190 [api] › tests\api\client-management.api.spec.ts:506:7 › Client Management API - Business Logic › [P1] PUT /api/clients/:clientId - should allow reactivation from INACTIVE to ACTIVE (246ms)
  x  144 [e2e] › tests\e2e\store-management.spec.ts:157:7 › Store Management E2E › [P0] Should successfully edit store name and status (38.8s)
  ok 192 [api] › tests\api\client-management.api.spec.ts:575:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P1] POST /api/clients - should reject empty string name (243ms)
  x  193 [api] › tests\api\client-management.api.spec.ts:606:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P2] POST /api/clients - should handle special characters in name (178ms)
  x  147 [e2e] › tests\e2e\store-management.spec.ts:354:7 › Store Management E2E › [P1] Should show validation error for invalid timezone (39.7s)
  ok 196 [api] › tests\api\client-management.api.spec.ts:591:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P2] POST /api/clients - should handle very long name (1000+ characters) (163ms)
  ok 197 [api] › tests\api\client-management.api.spec.ts:638:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P1] POST /api/clients - should reject whitespace-only name (82ms)
  x  198 [api] › tests\api\client-management.api.spec.ts:654:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P2] POST /api/clients - should trim leading/trailing whitespace (139ms)
  x  148 [e2e] › tests\e2e\store-management.spec.ts:390:7 › Store Management E2E › [P1] Should successfully delete INACTIVE store (37.1s)
  x  199 [api] › tests\api\client-management.api.spec.ts:622:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P2] POST /api/clients - should handle unicode/emoji characters in name (205ms)
  x  202 [api] › tests\api\client-management.api.spec.ts:673:9 › Client Management API - Edge Cases › Metadata Field Edge Cases › [P2] POST /api/clients - should accept empty metadata object (224ms)
  x  203 [api] › tests\api\client-management.api.spec.ts:688:9 › Client Management API - Edge Cases › Metadata Field Edge Cases › [P2] POST /api/clients - should accept null metadata (197ms)
  x  149 [e2e] › tests\e2e\store-management.spec.ts:436:7 › Store Management E2E › [P1] Should display store configuration form properly on mobile (35.7s)
  x  204 [api] › tests\api\client-management.api.spec.ts:703:9 › Client Management API - Edge Cases › Metadata Field Edge Cases › [P2] POST /api/clients - should handle deeply nested metadata (163ms)
  ok 205 [api] › tests\api\client-management.api.spec.ts:729:9 › Client Management API - Edge Cases › Metadata Field Edge Cases › [P2] POST /api/clients - should handle large metadata object (142ms)
  x  206 [api] › tests\api\client-management.api.spec.ts:774:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] PUT /api/clients/:clientId - should reject invalid UUID format (129ms)
  x  207 [api] › tests\api\client-management.api.spec.ts:750:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] GET /api/clients/:clientId - should reject invalid UUID format (202ms)
  x  208 [api] › tests\api\client-management.api.spec.ts:764:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] GET /api/clients/:clientId - should reject empty string ID (176ms)
  x  209 [api] › tests\api\client-management.api.spec.ts:789:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] DELETE /api/clients/:clientId - should reject invalid UUID format (243ms)
  ok 210 [api] › tests\api\client-management.api.spec.ts:804:7 › Client Management API - Security › [P0] POST /api/clients - should prevent SQL injection in name field (170ms)
  ok 211 [api] › tests\api\client-management.api.spec.ts:870:7 › Client Management API - Security › [P1] GET /api/clients/:clientId - should not leak sensitive data in response (104ms)
  ok 212 [api] › tests\api\client-management.api.spec.ts:894:7 › Client Management API - Security › [P1] PUT /api/clients/:clientId - should validate authorization for specific client (175ms)
  ok 213 [api] › tests\api\client-management.api.spec.ts:915:7 › Client Management API - Security › [P2] POST /api/clients - should prevent XSS in name field (69ms)
  x  214 [api] › tests\api\client-management.api.spec.ts:940:7 › Client Management API - Public ID Support › [P0] POST /api/clients - should auto-generate valid public_id (137ms)
  ok 215 [api] › tests\api\client-management.api.spec.ts:823:7 › Client Management API - Security › [P0] GET /api/clients - should prevent SQL injection in search parameter (149ms)
  ok 216 [api] › tests\api\client-management.api.spec.ts:1012:7 › Client Management API - Dual ID Format Support (GET) › [P0] GET /api/clients/:id - should accept UUID format (backward compatibility) (91ms)
  ok 217 [api] › tests\api\client-management.api.spec.ts:1040:7 › Client Management API - Dual ID Format Support (GET) › [P0] GET /api/clients/:id - should accept public_id format (new standard) (89ms)
  ok 218 [api] › tests\api\client-management.api.spec.ts:1068:7 › Client Management API - Dual ID Format Support (GET) › [P0] GET /api/clients/:id - should reject invalid public_id format (125ms)
  ok 219 [api] › tests\api\client-management.api.spec.ts:1097:7 › Client Management API - Dual ID Format Support (GET) › [P0] GET /api/clients/:id - should prevent IDOR with non-existent public_id (83ms)
  ok 220 [api] › tests\api\client-management.api.spec.ts:835:7 › Client Management API - Security › [P0] All endpoints should reject unauthenticated requests (164ms)
  x  221 [api] › tests\api\client-management.api.spec.ts:1117:7 › Client Management API - Dual ID Format Support (PUT) › [P0] PUT /api/clients/:id - should update via UUID (backward compatibility) (143ms)
  x  222 [api] › tests\api\client-management.api.spec.ts:1145:7 › Client Management API - Dual ID Format Support (PUT) › [P0] PUT /api/clients/:id - should update via public_id (new standard) (124ms)
  x  223 [api] › tests\api\client-management.api.spec.ts:972:7 › Client Management API - Public ID Support › [P0] POST /api/clients - should generate unique public_ids for multiple clients (209ms)
  ok 224 [api] › tests\api\client-management.api.spec.ts:1173:7 › Client Management API - Dual ID Format Support (PUT) › [P0] PUT /api/clients/:id - should prevent IDOR via invalid public_id (149ms)
  ok 226 [api] › tests\api\client-management.api.spec.ts:1245:7 › Client Management API - Dual ID Format Support (DELETE) › [P0] DELETE /api/clients/:id - should prevent IDOR via fabricated public_id (78ms)
  x  225 [api] › tests\api\client-management.api.spec.ts:1190:7 › Client Management API - Dual ID Format Support (DELETE) › [P0] DELETE /api/clients/:id - should delete via UUID (backward compatibility) (186ms)
  ok 227 [api] › tests\api\client-management.api.spec.ts:1261:7 › Client Management API - Dropdown Public ID Support › [P0] GET /api/clients/dropdown - should return public_id for each client (97ms)
  ok 228 [api] › tests\api\client-public-id-security.api.spec.ts:65:7 › Public ID Security - IDOR Prevention › [P0] SEC-PID-002: Should prevent IDOR by rejecting fabricated public_ids (98ms)
  ok 229 [api] › tests\api\client-public-id-security.api.spec.ts:84:7 › Public ID Security - IDOR Prevention › [P0] SEC-PID-003: Should prevent brute force enumeration via consistent 404s (172ms)
  x  230 [api] › tests\api\client-management.api.spec.ts:1216:7 › Client Management API - Dual ID Format Support (DELETE) › [P0] DELETE /api/clients/:id - should delete via public_id (new standard) (215ms)
  ok 231 [api] › tests\api\client-public-id-security.api.spec.ts:109:7 › Public ID Security - Format Validation › [P0] SEC-PID-004: Should reject SQL injection attempts in public_id (119ms)
  ok 232 [api] › tests\api\client-public-id-security.api.spec.ts:163:7 › Public ID Security - Format Validation › [P0] SEC-PID-006: Should reject path traversal attempts (79ms)
  ok 233 [api] › tests\api\client-public-id-security.api.spec.ts:185:7 › Public ID Security - Authorization Bypass Prevention › [P0] SEC-PID-007: Should enforce authorization even with valid public_id (101ms)
  ok 234 [api] › tests\api\client-public-id-security.api.spec.ts:208:7 › Public ID Security - Authorization Bypass Prevention › [P0] SEC-PID-008: Should not leak existence of clients through different error codes (90ms)
  ok 235 [api] › tests\api\client-public-id-security.api.spec.ts:247:7 › Public ID Security - Collision Resistance › [P0] SEC-PID-009: Should never generate duplicate public_ids (259ms)
  ok 236 [api] › tests\api\client-public-id-security.api.spec.ts:273:7 › Public ID Security - Collision Resistance › [P1] SEC-PID-010: Should maintain uniqueness constraint at database level (56ms)
  ok 237 [api] › tests\api\client-public-id-security.api.spec.ts:301:7 › Public ID Security - Update and Delete Operations › [P0] SEC-PID-011: Should prevent unauthorized update via fabricated public_id (72ms)
  ok 238 [api] › tests\api\client-public-id-security.api.spec.ts:319:7 › Public ID Security - Update and Delete Operations › [P0] SEC-PID-012: Should prevent unauthorized delete via fabricated public_id (68ms)
  ok 239 [api] › tests\api\client-public-id-security.api.spec.ts:333:7 › Public ID Security - Update and Delete Operations › [P0] SEC-PID-013: Should prevent update via public_id from unauthorized role (119ms)
  ok 240 [api] › tests\api\company-client-link.api.spec.ts:27:7 › 2.7-API: Security - Authentication Tests › [P0] 2.7-SEC-001: POST /api/companies - should reject request without auth token (44ms)
  ok 241 [api] › tests\api\company-client-link.api.spec.ts:56:7 › 2.7-API: Security - Authentication Tests › [P0] 2.7-SEC-002: GET /api/companies - should reject request without auth token (13ms)
  ok 242 [api] › tests\api\company-client-link.api.spec.ts:68:7 › 2.7-API: Security - Authentication Tests › [P0] 2.7-SEC-003: PUT /api/companies/:id - should reject request without auth token (12ms)
  ok 243 [api] › tests\api\company-client-link.api.spec.ts:85:7 › 2.7-API: Security - Authentication Tests › [P0] 2.7-SEC-004: GET /api/clients/dropdown - should reject request without auth token (11ms)
  ok 244 [api] › tests\api\company-client-link.api.spec.ts:99:7 › 2.7-API: Security - Authorization Tests › [P0] 2.7-SEC-005: POST /api/companies - should reject user without ADMIN_SYSTEM_CONFIG permission (111ms)
  ok 245 [api] › tests\api\company-client-link.api.spec.ts:126:7 › 2.7-API: Security - Authorization Tests › [P0] 2.7-SEC-006: GET /api/companies - should reject user without ADMIN_SYSTEM_CONFIG permission (94ms)
  ok 246 [api] › tests\api\company-client-link.api.spec.ts:144:7 › 2.7-API: Security - Input Validation & Injection Prevention › [P0] 2.7-SEC-007: POST /api/companies - should reject SQL injection in client_id (63ms)
  ok 247 [api] › tests\api\company-client-link.api.spec.ts:162:7 › 2.7-API: Security - Input Validation & Injection Prevention › [P0] 2.7-SEC-008: POST /api/companies - should reject SQL injection in name field (113ms)
  ok 248 [api] › tests\api\company-client-link.api.spec.ts:196:7 › 2.7-API: Security - Input Validation & Injection Prevention › [P0] 2.7-SEC-009: POST /api/companies - should reject XSS in name field (92ms)
  ok 249 [api] › tests\api\company-client-link.api.spec.ts:230:7 › 2.7-API: Security - Input Validation & Injection Prevention › [P0] 2.7-SEC-010: POST /api/companies - should reject invalid UUID format for client_id (69ms)
  ok 251 [api] › tests\api\company-client-link.api.spec.ts:246:7 › 2.7-API: Security - Input Validation & Injection Prevention › [P0] 2.7-SEC-011: GET /api/companies - should handle invalid clientId filter format (62ms)
  ok 250 [api] › tests\api\client-public-id-security.api.spec.ts:20:7 › Public ID Security - IDOR Prevention › [P0] SEC-PID-001: Should prevent enumeration attacks via sequential IDs (117ms)
  ok 252 [api] › tests\api\company-client-link.api.spec.ts:272:7 › 2.7-API: Edge Cases - Input Boundaries › [P1] 2.7-EDGE-001: POST /api/companies - should reject name exceeding 255 characters (79ms)
  ok 254 [api] › tests\api\company-client-link.api.spec.ts:338:7 › 2.7-API: Edge Cases - Input Boundaries › [P1] 2.7-EDGE-003: POST /api/companies - should reject whitespace-only name (74ms)
  ok 253 [api] › tests\api\company-client-link.api.spec.ts:304:7 › 2.7-API: Edge Cases - Input Boundaries › [P1] 2.7-EDGE-002: POST /api/companies - should accept name with exactly 255 characters (155ms)
  ok 255 [api] › tests\api\company-client-link.api.spec.ts:368:7 › 2.7-API: Edge Cases - Input Boundaries › [P1] 2.7-EDGE-004: POST /api/companies - should reject null client_id (66ms)
  ok 256 [api] › tests\api\company-client-link.api.spec.ts:384:7 › 2.7-API: Edge Cases - Input Boundaries › [P1] 2.7-EDGE-005: POST /api/companies - should reject invalid status value (91ms)
  ok 257 [api] › tests\api\company-client-link.api.spec.ts:411:7 › 2.7-API: Edge Cases - Input Boundaries › [P1] 2.7-EDGE-006: POST /api/companies - should handle unicode characters in name (94ms)
  ok 259 [api] › tests\api\company-client-link.api.spec.ts:441:7 › 2.7-API: Edge Cases - Input Boundaries › [P1] 2.7-EDGE-007: POST /api/companies - should reject deleted client_id (78ms)
  ok 260 [api] › tests\api\company-client-link.api.spec.ts:471:7 › 2.7-API: Edge Cases - Input Boundaries › [P1] 2.7-EDGE-008: GET /api/companies - should handle pagination edge cases (54ms)
  ok 261 [api] › tests\api\company-client-link.api.spec.ts:482:7 › 2.7-API: Edge Cases - Input Boundaries › [P1] 2.7-EDGE-009: GET /api/companies - should cap limit at maximum 100 (66ms)
  ok 258 [api] › tests\api\client-public-id-security.api.spec.ts:139:7 › Public ID Security - Format Validation › [P0] SEC-PID-005: Should reject XSS attempts in public_id (172ms)
  ok 262 [api] › tests\api\company-client-link.api.spec.ts:502:7 › 2.7-API: Company-Client Linking - Create with client_id (AC #1) › [P0] 2.7-API-001: POST /api/companies - should create company with valid client_id (99ms)
  ok 263 [api] › tests\api\company-client-link.api.spec.ts:572:7 › 2.7-API: Company-Client Linking - Create with client_id (AC #1) › [P0] 2.7-API-002: POST /api/companies - should handle missing client_id (65ms)
  ok 265 [api] › tests\api\company-client-link.api.spec.ts:631:7 › 2.7-API: Company-Client Linking - Create with client_id (AC #1) › [P0] 2.7-API-004: POST /api/companies - should handle empty string client_id (63ms)
  ok 264 [api] › tests\api\company-client-link.api.spec.ts:608:7 › 2.7-API: Company-Client Linking - Create with client_id (AC #1) › [P0] 2.7-API-003: POST /api/companies - should handle non-existent client_id (77ms)
  ok 267 [api] › tests\api\company-client-link.api.spec.ts:706:7 › 2.7-API: Company-Client Linking - List includes client info (AC #2) › [P1] 2.7-API-006: GET /api/companies - should return pagination metadata (94ms)
  ok 266 [api] › tests\api\company-client-link.api.spec.ts:656:7 › 2.7-API: Company-Client Linking - List includes client info (AC #2) › [P1] 2.7-API-005: GET /api/companies - should return client_id and client_name (131ms)
  ok 268 [api] › tests\api\company-client-link.api.spec.ts:729:7 › 2.7-API: Company-Client Linking - Filter by client (AC #3) › [P0] 2.7-API-007: GET /api/companies?clientId=xxx - should filter by client_id (125ms)
  ok 269 [api] › tests\api\company-client-link.api.spec.ts:795:7 › 2.7-API: Company-Client Linking - Filter by client (AC #3) › [P0] 2.7-API-008: GET /api/companies - without filter should return all companies (106ms)
  ok 270 [api] › tests\api\company-client-link.api.spec.ts:853:7 › 2.7-API: Company-Client Linking - RLS enforcement (AC #4) › [P0] 2.7-API-009: System Admin should see all companies across clients (112ms)
  ok 271 [api] › tests\api\company-client-link.api.spec.ts:909:7 › 2.7-API: Company-Client Linking - Audit logging (AC #5) › [P0] 2.7-API-010: PUT /api/companies/:id - should log client_id change in audit (144ms)
  ok 272 [api] › tests\api\company-client-link.api.spec.ts:978:7 › 2.7-API: Company-Client Linking - Audit logging (AC #5) › [P0] 2.7-API-011: POST /api/companies - should include client_id in audit new_values (100ms)
  ok 273 [api] › tests\api\company-client-link.api.spec.ts:1025:7 › 2.7-API: Company-Client Linking - Client Dropdown Endpoint (AC #1, #3) › [P1] 2.7-API-012: GET /api/clients/dropdown - should return minimal client data (93ms)
  ok 274 [api] › tests\api\company-client-link.api.spec.ts:1073:7 › 2.7-API: Company-Client Linking - Client Dropdown Endpoint (AC #1, #3) › [P1] 2.7-API-013: GET /api/clients/dropdown - should only return active clients (93ms)
  ok 275 [api] › tests\api\company-client-link.api.spec.ts:1112:7 › 2.7-API: Company-Client Linking - Client Dropdown Endpoint (AC #1, #3) › [P1] 2.7-API-014: GET /api/clients/dropdown - should not return deleted clients (85ms)
  ok 276 [api] › tests\api\company-client-link.api.spec.ts:1151:7 › 2.7-API: Company-Client Linking - Client Dropdown Endpoint (AC #1, #3) › [P0] 2.7-API-015: GET /api/clients/dropdown - should return public_id for frontend usage (86ms)
  ok 278 [api] › tests\api\company-management.api.spec.ts:70:7 › 2.1-API: Company Management API - CRUD Operations › [P0] 2.1-API-002: POST /api/companies - should reject invalid data (AC #1) (67ms)
  ok 277 [api] › tests\api\company-management.api.spec.ts:18:7 › 2.1-API: Company Management API - CRUD Operations › [P0] 2.1-API-001: POST /api/companies - should create company with valid data (AC #1) (120ms)
  ok 279 [api] › tests\api\company-management.api.spec.ts:93:7 › 2.1-API: Company Management API - CRUD Operations › [P0] 2.1-API-003: GET /api/companies/:companyId - should retrieve company by ID (AC #2) (85ms)
  ok 280 [api] › tests\api\company-management.api.spec.ts:124:7 › 2.1-API: Company Management API - CRUD Operations › [P0] 2.1-API-004: GET /api/companies - should list all companies with pagination (AC #2) (100ms)
  ok 281 [api] › tests\api\company-management.api.spec.ts:172:7 › 2.1-API: Company Management API - CRUD Operations › [P0] 2.1-API-005: PUT /api/companies/:companyId - should update company (AC #3) (105ms)
  ok 282 [api] › tests\api\company-management.api.spec.ts:225:7 › 2.1-API: Company Management API - CRUD Operations › [P0] 2.1-API-006: DELETE /api/companies/:companyId - should soft delete non-ACTIVE company (AC #4) (99ms)
  ok 284 [api] › tests\api\company-management.api.spec.ts:304:7 › 2.1-API: Company Management API - Permission Enforcement › [P0] 2.1-API-008: should deny access without authentication (AC #1, #2, #3, #4) (47ms)
  ok 285 [api] › tests\api\company-management.api.spec.ts:326:7 › 2.1-API: Company Management API - Error Handling › [P1] 2.1-API-009: GET /api/companies/:companyId - should return 404 for non-existent company (AC #2) (64ms)
  ok 286 [api] › tests\api\company-management.api.spec.ts:341:7 › 2.1-API: Company Management API - Error Handling › [P1] 2.1-API-010: PUT /api/companies/:companyId - should return 404 for non-existent company (AC #3) (67ms)
  ok 283 [api] › tests\api\company-management.api.spec.ts:270:7 › 2.1-API: Company Management API - Permission Enforcement › [P0] 2.1-API-007: should deny access to non-System Admin users (AC #1, #2, #3, #4) (187ms)
  ok 287 [api] › tests\api\company-management.api.spec.ts:357:7 › 2.1-API: Company Management API - Error Handling › [P1] 2.1-API-011: DELETE /api/companies/:companyId - should return 404 for non-existent company (AC #4) (66ms)
  ok 289 [api] › tests\api\company-management.api.spec.ts:405:7 › 2.1-API: Company Management API - Validation Edge Cases › [P0] 2.1-API-013: POST /api/companies - should reject whitespace-only company name (71ms)
  ok 288 [api] › tests\api\company-management.api.spec.ts:370:7 › 2.1-API: Company Management API - Error Handling › [P0] 2.1-API-012: DELETE /api/companies/:companyId - should prevent deletion of ACTIVE company (93ms)
  ok 290 [api] › tests\api\company-management.api.spec.ts:427:7 › 2.1-API: Company Management API - Validation Edge Cases › [P0] 2.1-API-014: POST /api/companies - should reject empty company name (76ms)
  ok 293 [api] › tests\api\company-management.api.spec.ts:496:7 › 2.1-API: Company Management API - Validation Edge Cases › [P0] 2.1-API-017: POST /api/companies - should reject invalid status (62ms)
  ok 291 [api] › tests\api\company-management.api.spec.ts:450:7 › 2.1-API: Company Management API - Validation Edge Cases › [P0] 2.1-API-015: POST /api/companies - should accept company name with exactly 255 characters (86ms)
  ok 292 [api] › tests\api\company-management.api.spec.ts:473:7 › 2.1-API: Company Management API - Validation Edge Cases › [P0] 2.1-API-016: POST /api/companies - should reject company name exceeding 255 characters (75ms)
  ok 294 [api] › tests\api\company-management.api.spec.ts:516:7 › 2.1-API: Company Management API - Validation Edge Cases › [P0] 2.1-API-018: POST /api/companies - should allow PENDING status (79ms)
  ok 296 [api] › tests\api\company-management.api.spec.ts:567:7 › 2.1-API: Company Management API - Validation Edge Cases › [P0] 2.1-API-020: PUT /api/companies/:companyId - should reject whitespace-only name update (75ms)
  ok 295 [api] › tests\api\company-management.api.spec.ts:538:7 › 2.1-API: Company Management API - Validation Edge Cases › [P0] 2.1-API-019: PUT /api/companies/:companyId - should allow status transitions (92ms)
  ok 297 [api] › tests\api\company-management.api.spec.ts:596:7 › 2.1-API: Company Management API - Validation Edge Cases › [P0] 2.1-API-021: should allow duplicate company names (88ms)
  ok 299 [api] › tests\api\company-management.api.spec.ts:660:7 › 2.1-API: Company Management API - Audit Log Validation › [P0] 2.1-API-023: audit log should capture x-forwarded-for IP when behind proxy (82ms)
  ok 298 [api] › tests\api\company-management.api.spec.ts:626:7 › 2.1-API: Company Management API - Audit Log Validation › [P0] 2.1-API-022: audit log should include username and roles (87ms)
  ok 301 [api] › tests\api\company-management.api.spec.ts:736:7 › 2.1-API: Company Management API - Security Tests › [P0] 2.1-API-025: should reject XSS attempts in company name (85ms)
  ok 302 [api] › tests\api\company-management.api.spec.ts:762:7 › 2.1-API: Company Management API - Security Tests › [P0] 2.1-API-026: should reject excessively long company names (buffer overflow protection) (81ms)
  -  304 [api] › tests\api\company-management.api.spec.ts:851:8 › 2.1-API: Company Management API - Concurrent Operations › [P0] 2.1-API-028: should detect concurrent modification with last_updated_at
  ok 300 [api] › tests\api\company-management.api.spec.ts:703:7 › 2.1-API: Company Management API - Security Tests › [P0] 2.1-API-024: should sanitize SQL injection attempts in company name (101ms)
  ok 306 [api] › tests\api\database-setup\indexes.api.spec.ts:25:7 › 1.3-API-004: Database Setup - Indexes › [P1] 1.3-API-004-001: User table should have index on email (48ms)
  ok 305 [api] › tests\api\database-setup\indexes.api.spec.ts:61:7 › 1.3-API-004: Database Setup - Indexes › [P1] 1.3-API-004-002: Store table should have index on company_id (56ms)
  ok 307 [api] › tests\api\database-setup\migrations.api.spec.ts:16:7 › 1.3-API-003: Database Setup - Migrations › [P0] 1.3-API-003-001: Migrations directory should exist (8ms)
  ok 303 [api] › tests\api\company-management.api.spec.ts:787:7 › 2.1-API: Company Management API - Concurrent Operations › [P0] 2.1-API-027: should handle concurrent updates to same company (113ms)
  ok 309 [api] › tests\api\database-setup\prisma-config.api.spec.ts:16:7 › 1.3-API-001: Database Setup - Prisma Configuration › [P0] 1.3-API-001-001: Prisma Client should be generated and importable (27ms)
  ok 308 [api] › tests\api\database-setup\migrations.api.spec.ts:32:7 › 1.3-API-003: Database Setup - Migrations › [P1] 1.3-API-003-002: Initial migration should create User, Company, Store tables (53ms)
  ok 310 [api] › tests\api\database-setup\prisma-config.api.spec.ts:26:7 › 1.3-API-001: Database Setup - Prisma Configuration › [P0] 1.3-API-001-002: Prisma Client should connect to database (36ms)
  ok 311 [api] › tests\api\database-setup\prisma-config.api.spec.ts:36:7 › 1.3-API-001: Database Setup - Prisma Configuration › [P0] 1.3-API-001-003: Database schema should include User model (36ms)
  ok 312 [api] › tests\api\database-setup\prisma-config.api.spec.ts:46:7 › 1.3-API-001: Database Setup - Prisma Configuration › [P0] 1.3-API-001-004: Database schema should include Company model (35ms)
  ok 313 [api] › tests\api\database-setup\prisma-config.api.spec.ts:56:7 › 1.3-API-001: Database Setup - Prisma Configuration › [P0] 1.3-API-001-005: Database schema should include Store model (36ms)
  ok 314 [api] › tests\api\database-setup\schema-validation.api.spec.ts:63:7 › 1.3-API-002: Database Setup - Schema Validation › [P0] 1.3-API-002-002: Company model should have required fields (47ms)
  ok 315 [api] › tests\api\database-setup\schema-validation.api.spec.ts:26:7 › 1.3-API-002: Database Setup - Schema Validation › [P0] 1.3-API-002-001: User model should have required fields (49ms)
  ok 316 [api] › tests\api\database-setup\schema-validation.api.spec.ts:98:7 › 1.3-API-002: Database Setup - Schema Validation › [P0] 1.3-API-002-003: Store model should have required fields and foreign key (58ms)
  ok 317 [api] › tests\api\database-setup\schema-validation.api.spec.ts:154:7 › 1.3-API-002: Database Setup - Schema Validation › [P1] 1.3-API-002-004: User email should be unique (52ms)
  ok 319 [api] › tests\api\edge-cases.api.spec.ts:21:7 › EDGE-API-001: Edge Cases - Empty and Null Values › [P2] EDGE-API-001-001: GET /health with empty query string should return 200 (19ms)
  ok 318 [api] › tests\api\database-setup\schema-validation.api.spec.ts:196:7 › 1.3-API-002: Database Setup - Schema Validation › [P1] 1.3-API-002-005: Store should cascade delete when Company is deleted (86ms)
  ok 321 [api] › tests\api\edge-cases.api.spec.ts:51:7 › EDGE-API-002: Edge Cases - Special Characters › [P2] EDGE-API-002-001: Health endpoint should handle special characters in headers (13ms)
  ok 322 [api] › tests\api\edge-cases.api.spec.ts:66:7 › EDGE-API-002: Edge Cases - Special Characters › [P2] EDGE-API-002-002: Health endpoint should handle unicode characters (17ms)
  ok 323 [api] › tests\api\edge-cases.api.spec.ts:81:7 › EDGE-API-003: Edge Cases - Boundary Values › [P2] EDGE-API-003-001: Health endpoint should handle very long URL (14ms)
  ok 324 [api] › tests\api\edge-cases.api.spec.ts:93:7 › EDGE-API-003: Edge Cases - Boundary Values › [P2] EDGE-API-003-002: Health endpoint should handle multiple query parameters (15ms)
  ok 325 [api] › tests\api\edge-cases.api.spec.ts:110:7 › EDGE-API-004: Edge Cases - HTTP Headers › [P2] EDGE-API-004-001: Health endpoint should handle missing Accept header (14ms)
  x  320 [api] › tests\api\edge-cases.api.spec.ts:35:7 › EDGE-API-001: Edge Cases - Empty and Null Values › [P2] EDGE-API-001-002: POST /api/users with empty body should return 400 or 404 (59ms)
  ok 326 [api] › tests\api\edge-cases.api.spec.ts:123:7 › EDGE-API-004: Edge Cases - HTTP Headers › [P2] EDGE-API-004-002: Health endpoint should handle various Accept headers (40ms)
  ok 328 [api] › tests\api\edge-cases.api.spec.ts:186:7 › EDGE-API-006: Edge Cases - Response Format › [P2] EDGE-API-006-001: Health endpoint response should have valid timestamp format (24ms)
  ok 327 [api] › tests\api\edge-cases.api.spec.ts:150:7 › EDGE-API-005: Edge Cases - Concurrent Requests › [P2] EDGE-API-005-001: Health endpoint should handle concurrent requests (80ms)
  ok 329 [api] › tests\api\edge-cases.api.spec.ts:205:7 › EDGE-API-006: Edge Cases - Response Format › [P2] EDGE-API-006-002: Health endpoint response should be valid JSON (17ms)
  ok 330 [api] › tests\api\error-handling.api.spec.ts:20:7 › ERR-API-001: Error Handling - 404 Not Found › [P1] ERR-API-001-001: GET /api/nonexistent should return 404 (14ms)
  ok 332 [api] › tests\api\error-handling.api.spec.ts:45:7 › ERR-API-001: Error Handling - 404 Not Found › [P1] ERR-API-001-003: DELETE /api/users/invalid-id should return 404 (87ms)
  ok 331 [api] › tests\api\error-handling.api.spec.ts:31:7 › ERR-API-001: Error Handling - 404 Not Found › [P1] ERR-API-001-002: GET /api/users/invalid-id should return 404 (103ms)
  ok 333 [api] › tests\api\error-handling.api.spec.ts:62:7 › ERR-API-002: Error Handling - Invalid HTTP Methods › [P1] ERR-API-002-001: PATCH /health should return 405 Method Not Allowed (18ms)
  ok 334 [api] › tests\api\error-handling.api.spec.ts:81:7 › ERR-API-002: Error Handling - Invalid HTTP Methods › [P1] ERR-API-002-002: PUT /health should return 405 Method Not Allowed (18ms)
  x  335 [api] › tests\api\error-handling.api.spec.ts:100:7 › ERR-API-003: Error Handling - Malformed Requests › [P1] ERR-API-003-001: POST /api/users with invalid JSON should return 400 (98ms)
  x  336 [api] › tests\api\error-handling.api.spec.ts:116:7 › ERR-API-003: Error Handling - Malformed Requests › [P1] ERR-API-003-002: POST /api/users with missing Content-Type should handle gracefully (112ms)
  ok 337 [api] › tests\api\edge-cases.api.spec.ts:167:7 › EDGE-API-005: Edge Cases - Concurrent Requests › [P2] EDGE-API-005-002: Health endpoint should handle rapid sequential requests (222ms)
  ok 338 [api] › tests\api\error-handling.api.spec.ts:180:7 › ERR-API-005: Error Handling - Invalid Query Parameters › [P2] ERR-API-005-002: GET /health with special characters in query should handle gracefully (27ms)
  ok 339 [api] › tests\api\error-handling.api.spec.ts:195:7 › ERR-API-006: Error Handling - CORS Error Scenarios › [P1] ERR-API-006-001: Request from unauthorized origin should be rejected (24ms)
  ok 340 [api] › tests\api\error-handling.api.spec.ts:218:7 › ERR-API-007: Error Handling - Server Errors › [P1] ERR-API-007-001: Server should handle internal errors gracefully (25ms)
  ok 343 [api] › tests\api\infrastructure.api.spec.ts:4:7 › Infrastructure & Server Configuration [P0] › [P0] Backend server starts on port 3001 (34ms)
  -  344 [api] › tests\api\infrastructure.api.spec.ts:12:8 › Infrastructure & Server Configuration [P0] › [P0] Frontend server starts on port 3000
  -  345 [api] › tests\api\infrastructure.api.spec.ts:17:8 › Infrastructure & Server Configuration [P0] › [P0] Backend and frontend run simultaneously without port conflicts
  ok 346 [api] › tests\api\infrastructure.api.spec.ts:36:7 › Infrastructure & Server Configuration [P0] › [P0] Backend health endpoint returns correct structure (27ms)
  ok 341 [api] › tests\api\error-handling.api.spec.ts:164:7 › ERR-API-005: Error Handling - Invalid Query Parameters › [P2] ERR-API-005-001: GET /health?invalid=param should still return 200 (114ms)
  ok 347 [api] › tests\api\infrastructure.api.spec.ts:49:7 › CORS Configuration [P0] › [P0] Backend allows requests from frontend origin (37ms)
  ok 349 [api] › tests\api\infrastructure.api.spec.ts:87:7 › CORS Configuration [P0] › [P0] Backend allows credentials in CORS (22ms)
  ok 348 [api] › tests\api\infrastructure.api.spec.ts:63:7 › CORS Configuration [P0] › [P0] Backend handles preflight OPTIONS requests (30ms)
  ok 350 [api] › tests\api\infrastructure.api.spec.ts:100:7 › CORS Configuration [P0] › [P1] Backend allows required HTTP methods (22ms)
  ok 351 [api] › tests\api\infrastructure.api.spec.ts:119:7 › CORS Configuration [P0] › [P1] Backend allows required headers (23ms)
  ok 353 [api] › tests\api\infrastructure.api.spec.ts:147:7 › Port Configuration [P1] › [P1] Backend does not attempt to use frontend port (36ms)
  ok 342 [api] › tests\api\error-handling.api.spec.ts:139:7 › ERR-API-004: Error Handling - Request Size Limits › [P2] ERR-API-004-001: POST /api/users with extremely large payload should return 413 (276ms)
  ok 355 [api] › tests\api\jwt-token-system.api.spec.ts:27:7 › 1.6-API-002: JWT Token Validation Middleware › [P0] 1.6-API-002-001: Protected route should accept valid JWT access token from cookie (72ms)
  ok 356 [api] › tests\api\jwt-token-system.api.spec.ts:64:7 › 1.6-API-002: JWT Token Validation Middleware › [P0] 1.6-API-002-002: Protected route should return 401 for expired access token (28ms)
  ok 357 [api] › tests\api\jwt-token-system.api.spec.ts:89:7 › 1.6-API-002: JWT Token Validation Middleware › [P0] 1.6-API-002-003: Protected route should return 401 for invalid JWT token (18ms)
  ok 358 [api] › tests\api\jwt-token-system.api.spec.ts:111:7 › 1.6-API-002: JWT Token Validation Middleware › [P0] 1.6-API-002-004: Protected route should return 401 for missing access token cookie (34ms)
  ok 359 [api] › tests\api\jwt-token-system.api.spec.ts:127:7 › 1.6-API-002: JWT Token Validation Middleware › [P0] 1.6-API-002-005: Middleware should extract user_id, email, roles, and permissions from token (78ms)
  ok 360 [api] › tests\api\jwt-token-system.api.spec.ts:163:7 › 1.6-API-002: JWT Token Validation Middleware › [P1] 1.6-API-002-006: Protected route should return 401 for malformed JWT token (99ms)
  x  361 [api] › tests\api\jwt-token-system.api.spec.ts:190:7 › 1.6-API-002: JWT Token Validation Middleware › [P1] 1.6-API-002-007: Protected route should return 401 for token with missing required claims (55ms)
  ok 354 [api] › tests\api\infrastructure.api.spec.ts:157:7 › Environment Variables [P1] › [P1] Backend reads BACKEND_PORT from environment (947ms)
  ok 362 [api] › tests\api\jwt-token-system.api.spec.ts:260:7 › 1.6-API-003: Refresh Token Endpoint › [P0] 1.6-API-003-001: POST /api/auth/refresh should generate new access and refresh tokens (84ms)
  ok 363 [api] › tests\api\jwt-token-system.api.spec.ts:313:7 › 1.6-API-003: Refresh Token Endpoint › [P0] 1.6-API-003-002: POST /api/auth/refresh should return 401 for expired refresh token (20ms)
  ok 364 [api] › tests\api\jwt-token-system.api.spec.ts:342:7 › 1.6-API-003: Refresh Token Endpoint › [P0] 1.6-API-003-003: POST /api/auth/refresh should return 401 for invalid refresh token (31ms)
  ok 365 [api] › tests\api\jwt-token-system.api.spec.ts:368:7 › 1.6-API-003: Refresh Token Endpoint › [P0] 1.6-API-003-004: POST /api/auth/refresh should return 401 for missing refresh token cookie (18ms)
  x  366 [api] › tests\api\jwt-token-system.api.spec.ts:384:7 › 1.6-API-003: Refresh Token Endpoint › [P0] 1.6-API-003-005: Refresh token should be rotated (old token invalidated, new token issued) (99ms)
  ok 367 [api] › tests\api\jwt-token-system.api.spec.ts:224:7 › 1.6-API-002: JWT Token Validation Middleware › [P1] 1.6-API-002-008: Middleware should handle admin role tokens correctly (119ms)
  ok 368 [api] › tests\api\jwt-token-system.api.spec.ts:480:7 › 1.6-API-003: Refresh Token Endpoint › [P1] 1.6-API-003-007: POST /api/auth/refresh should preserve user context after token rotation (64ms)
  ok 369 [api] › tests\api\jwt-token-system.api.spec.ts:521:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P0] 1.6-API-004-001: API request with expired access token should auto-refresh and retry successfully (77ms)
  ok 370 [api] › tests\api\jwt-token-system.api.spec.ts:598:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P0] 1.6-API-004-002: API request should fail if both access and refresh tokens are expired (26ms)
  ok 371 [api] › tests\api\jwt-token-system.api.spec.ts:641:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P0] 1.6-API-004-003: API request should not retry infinitely if refresh fails (25ms)
  x  372 [api] › tests\api\jwt-token-system.api.spec.ts:680:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P0] 1.6-API-004-004: Multiple API requests should reuse refreshed token (no duplicate refresh) (128ms)
  ok 373 [api] › tests\api\jwt-token-system.api.spec.ts:454:7 › 1.6-API-003: Refresh Token Endpoint › [P1] 1.6-API-003-006: POST /api/auth/refresh should return 401 for malformed refresh token (69ms)
  ok 374 [api] › tests\api\jwt-token-system.api.spec.ts:783:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P0] 1.6-API-004-006: Session validation endpoint should succeed with valid token on app initialization (76ms)
  x  375 [api] › tests\api\jwt-token-system.api.spec.ts:820:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P1] 1.6-API-004-007: Refresh token rotation should prevent replay attacks (97ms)
  ok 376 [api] › tests\api\jwt-token-system.api.spec.ts:758:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P0] 1.6-API-004-005: Session validation endpoint should reject expired tokens on app initialization (70ms)
  ok 378 [api] › tests\api\jwt-token-system.api.spec.ts:866:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P1] 1.6-API-004-008: API requests without cookies should fail immediately without refresh attempt (68ms)
  ok 379 [api] › tests\api\local-auth.api.spec.ts:52:9 › Local Authentication API › POST /api/auth/login › should return 401 for invalid email (44ms)
  x  377 [api] › tests\api\local-auth.api.spec.ts:17:9 › Local Authentication API › POST /api/auth/login › should login successfully with valid credentials (460ms)
  ok 380 [api] › tests\api\local-auth.api.spec.ts:65:9 › Local Authentication API › POST /api/auth/login › should return 401 for invalid password (437ms)
  x  381 [api] › tests\api\local-auth.api.spec.ts:120:9 › Local Authentication API › POST /api/auth/login › should return 401 for user without password set (148ms)
  x  382 [api] › tests\api\local-auth.api.spec.ts:91:9 › Local Authentication API › POST /api/auth/login › should return 401 for inactive user (594ms)
  ok 383 [api] › tests\api\local-auth.api.spec.ts:144:9 › Local Authentication API › POST /api/auth/login › should return 400 for missing email (89ms)
  ok 384 [api] › tests\api\local-auth.api.spec.ts:168:9 › Local Authentication API › POST /api/auth/login › should normalize email to lowercase (976ms)
  x  385 [api] › tests\api\local-auth.api.spec.ts:197:9 › Local Authentication API › POST /api/auth/login › should include roles and permissions in JWT token (655ms)
  ok 386 [api] › tests\api\local-auth.api.spec.ts:156:9 › Local Authentication API › POST /api/auth/login › should return 400 for missing password (110ms)
  x  387 [api] › tests\api\local-auth.api.spec.ts:259:9 › Local Authentication API › POST /api/auth/logout › should succeed even without existing session (58ms)
  x  388 [api] › tests\api\local-auth.api.spec.ts:243:9 › Local Authentication API › POST /api/auth/logout › should logout and clear cookies (85ms)
  ok 389 [api] › tests\api\local-auth.api.spec.ts:273:9 › Local Authentication API › GET /api/auth/me › should return user info with valid token (146ms)
  ok 390 [api] › tests\api\local-auth.api.spec.ts:297:9 › Local Authentication API › GET /api/auth/me › should return 401 with invalid token (19ms)
  x  391 [api] › tests\api\local-auth.api.spec.ts:313:9 › Local Authentication API › POST /api/auth/refresh › should return 401 without refresh token (47ms)
  x  392 [api] › tests\api\local-auth.api.spec.ts:288:9 › Local Authentication API › GET /api/auth/me › should return 401 without token (112ms)
  x  393 [api] › tests\api\local-auth.api.spec.ts:325:9 › Local Authentication API › Full Authentication Flow › should complete full login -> access protected route -> logout flow (521ms)
  ok 394 [api] › tests\api\rbac-framework.api.spec.ts:18:7 › RBAC Framework - Permission Checking › [P0] should grant access when user has required permission (151ms)
  ok 395 [api] › tests\api\rbac-framework.api.spec.ts:61:7 › RBAC Framework - Permission Checking › [P0] should check SYSTEM scope permissions correctly (73ms)
  ok 396 [api] › tests\api\rbac-framework.api.spec.ts:74:7 › RBAC Framework - Permission Checking › [P0] should check COMPANY scope permissions correctly (158ms)
  ok 397 [api] › tests\api\rbac-framework.api.spec.ts:94:7 › RBAC Framework - Permission Checking › [P0] should deny COMPANY scope access to different company (143ms)
  x  398 [api] › tests\api\rbac-framework.api.spec.ts:126:7 › RBAC Framework - Permission Checking › [P0] should check STORE scope permissions correctly (174ms)
  ok 352 [api] › tests\api\infrastructure.api.spec.ts:139:7 › Port Configuration [P1] › [P1] Frontend does not attempt to use backend port (18.5s)
  ok 399 [api] › tests\api\rbac-framework.api.spec.ts:188:7 › RBAC Framework - Permission Checking › [P0] should inherit COMPANY permissions to STORE scope (196ms)
  x  400 [api] › tests\api\rbac-framework.api.spec.ts:223:7 › RBAC Framework - Permission Checking › [P0] should handle multiple roles with different scopes (155ms)
  ok 401 [api] › tests\api\rbac-framework.api.spec.ts:29:7 › RBAC Framework - Permission Checking › [P0] should deny access with 403 when user lacks required permission (236ms)
  ok 402 [api] › tests\api\rbac-framework.api.spec.ts:268:7 › RBAC Framework - Permission Middleware › [P0] should allow authorized requests to proceed (77ms)
  ok 403 [api] › tests\api\rbac-framework.api.spec.ts:280:7 › RBAC Framework - Permission Middleware › [P0] should return 401 when access token is missing (22ms)
  ok 404 [api] › tests\api\rbac-framework.api.spec.ts:297:7 › RBAC Framework - Permission Middleware › [P0] should return 401 when access token is invalid (16ms)
  ok 405 [api] › tests\api\rbac-framework.api.spec.ts:313:7 › RBAC Framework - Permission Middleware › [P0] should return 401 when access token is expired (25ms)
  -  406 [api] › tests\api\rbac-framework.api.spec.ts:335:8 › RBAC Framework - Audit Logging › [P0] should log permission denial to AuditLog
  -  407 [api] › tests\api\rbac-framework.api.spec.ts:377:8 › RBAC Framework - Audit Logging › [P0] should include correct permission code in audit log
  -  408 [api] › tests\api\rbac-framework.api.spec.ts:414:8 › RBAC Framework - Audit Logging › [P0] should include resource path in audit log
  ok 409 [api] › tests\api\rbac-framework.api.spec.ts:453:7 › RBAC Framework - Database Models and Seeding › [P1] should have Role model in database schema (31ms)
  ok 410 [api] › tests\api\rbac-framework.api.spec.ts:467:7 › RBAC Framework - Database Models and Seeding › [P1] should have Permission model in database schema (29ms)
  ok 411 [api] › tests\api\rbac-framework.api.spec.ts:481:7 › RBAC Framework - Database Models and Seeding › [P1] should have UserRole model in database schema (30ms)
  ok 412 [api] › tests\api\rbac-framework.api.spec.ts:495:7 › RBAC Framework - Database Models and Seeding › [P1] should have RolePermission model in database schema (31ms)
  ok 413 [api] › tests\api\rbac-framework.api.spec.ts:509:7 › RBAC Framework - Database Models and Seeding › [P1] should seed default roles on initialization (37ms)
  ok 414 [api] › tests\api\rbac-framework.api.spec.ts:532:7 › RBAC Framework - Database Models and Seeding › [P1] should seed default permissions on initialization (32ms)
  ok 415 [api] › tests\api\rbac-framework.api.spec.ts:550:7 › RBAC Framework - Database Models and Seeding › [P1] should map roles to permissions correctly (32ms)
  ok 416 [api] › tests\api\rbac-framework.api.spec.ts:569:7 › RBAC Framework - Database Models and Seeding › [P1] should allow idempotent seeding (multiple runs safe) (29ms)
  ok 417 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:19:7 › 1.4-API-005: Redis Edge Cases and Performance › [P2] 1.4-API-005-001: Redis health check should include latency measurement (30ms)
  ok 418 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:40:7 › 1.4-API-005: Redis Edge Cases and Performance › [P2] 1.4-API-005-002: Redis health check should complete within acceptable time (21ms)
  ok 419 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:57:7 › 1.4-API-005: Redis Edge Cases and Performance › [P2] 1.4-API-005-003: Redis connection should handle concurrent health checks (73ms)
  ok 420 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:82:7 › 1.4-API-005: Redis Edge Cases and Performance › [P2] 1.4-API-005-004: Redis health check should provide error details when unhealthy (25ms)
  ok 421 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:107:7 › 1.4-API-006: RabbitMQ Edge Cases and Performance › [P2] 1.4-API-006-001: RabbitMQ health check should complete within acceptable time (28ms)
  ok 422 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:124:7 › 1.4-API-006: RabbitMQ Edge Cases and Performance › [P2] 1.4-API-006-002: RabbitMQ connection should handle concurrent health checks (63ms)
  ok 423 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:149:7 › 1.4-API-006: RabbitMQ Edge Cases and Performance › [P2] 1.4-API-006-003: RabbitMQ health check should provide error details when unhealthy (21ms)
  ok 424 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:174:7 › 1.4-API-007: Partial Service Failures › [P2] 1.4-API-007-001: Health check should report independent status for each service (26ms)
  ok 425 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:201:7 › 1.4-API-007: Partial Service Failures › [P2] 1.4-API-007-002: Health check should return 503 when any service is unhealthy (19ms)
  ok 426 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:222:7 › 1.4-API-007: Partial Service Failures › [P2] 1.4-API-007-003: Health check response should include timestamp (32ms)
  ok 427 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:244:7 › 1.4-API-008: Connection Retry Logic › [P2] 1.4-API-008-001: Health check should not hang when services are slow to respond (21ms)
  ok 429 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:259:7 › 1.4-API-008: Connection Retry Logic › [P2] 1.4-API-008-002: Health check should handle transient connection failures (46ms)
  ok 430 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:281:7 › 1.4-API-009: Health Check Response Structure › [P2] 1.4-API-009-001: Health check response should have consistent structure (30ms)
  ok 431 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:313:7 › 1.4-API-009: Health Check Response Structure › [P2] 1.4-API-009-002: Health check should include version information (37ms)
  ok 432 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:330:7 › 1.4-API-009: Health Check Response Structure › [P2] 1.4-API-009-003: Health check status should be "ok" when all services healthy (24ms)
  ok 428 [api] › tests\api\rbac-framework.api.spec.ts:146:7 › RBAC Framework - Permission Checking › [P0] should deny STORE scope access to different store (235ms)
  ok 433 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:355:7 › 1.4-API-010: Error Recovery and Resilience › [P2] 1.4-API-010-001: Health check should recover after service becomes available (54ms)
  ok 435 [api] › tests\api\redis-rabbitmq-configuration.api.spec.ts:20:7 › 1.4-API-001: Redis Connection Configuration › [P0] 1.4-API-001-001: Redis client should be initialized and connection verified (24ms)
  ok 434 [api] › tests\api\redis-rabbitmq-configuration-expanded.api.spec.ts:377:7 › 1.4-API-010: Error Recovery and Resilience › [P2] 1.4-API-010-002: Health check should not crash on malformed service responses (33ms)
  ok 436 [api] › tests\api\redis-rabbitmq-configuration.api.spec.ts:38:7 › 1.4-API-001: Redis Connection Configuration › [P0] 1.4-API-001-002: Redis connection should support ping operation (23ms)
  ok 437 [api] › tests\api\redis-rabbitmq-configuration.api.spec.ts:53:7 › 1.4-API-001: Redis Connection Configuration › [P1] 1.4-API-001-003: Redis connection should handle connection errors gracefully (32ms)
  ok 438 [api] › tests\api\redis-rabbitmq-configuration.api.spec.ts:73:7 › 1.4-API-002: RabbitMQ Connection Configuration › [P0] 1.4-API-002-001: RabbitMQ connection should be established (25ms)
  ok 439 [api] › tests\api\redis-rabbitmq-configuration.api.spec.ts:91:7 › 1.4-API-002: RabbitMQ Connection Configuration › [P0] 1.4-API-002-002: RabbitMQ channels should be created successfully (26ms)
  ok 440 [api] › tests\api\redis-rabbitmq-configuration.api.spec.ts:106:7 › 1.4-API-002: RabbitMQ Connection Configuration › [P1] 1.4-API-002-003: RabbitMQ connection should handle connection errors gracefully (23ms)
  ok 441 [api] › tests\api\redis-rabbitmq-configuration.api.spec.ts:126:7 › 1.4-API-003: Health Check Endpoint › [P0] 1.4-API-003-001: GET /api/health should verify both Redis and RabbitMQ services (35ms)
  ok 442 [api] › tests\api\redis-rabbitmq-configuration.api.spec.ts:143:7 › 1.4-API-003: Health Check Endpoint › [P1] 1.4-API-003-002: Health check should include service version information (23ms)
  ok 443 [api] › tests\api\redis-rabbitmq-configuration.api.spec.ts:159:7 › 1.4-API-003: Health Check Endpoint › [P1] 1.4-API-003-003: Health check should return service status for each service independently (25ms)
  ok 444 [api] › tests\api\redis-rabbitmq-configuration.api.spec.ts:184:7 › 1.4-API-004: Connection Error Handling › [P1] 1.4-API-004-001: Connection retry logic should handle service unavailability (23ms)
  ok 445 [api] › tests\api\redis-rabbitmq-configuration.api.spec.ts:203:7 › 1.4-API-004: Connection Error Handling › [P1] 1.4-API-004-002: Graceful shutdown should close connections properly (40ms)
  ok 446 [api] › tests\api\rls-policies.api.spec.ts:102:7 › RLS Policies - Company-Level Isolation › 2.3-API-001: [P0] should filter Company table by user's assigned company_id (215ms)
  ok 447 [api] › tests\api\rls-policies.api.spec.ts:147:7 › RLS Policies - Company-Level Isolation › 2.3-API-002: [P0] should filter Store table by user's assigned company_id (216ms)
  ok 449 [api] › tests\api\rls-policies.api.spec.ts:211:7 › RLS Policies - Company-Level Isolation › 2.3-API-003: [P0] should return empty result set when querying other company's data (174ms)
  ok 448 [api] › tests\api\rbac-framework.api.spec.ts:245:7 › RBAC Framework - Permission Middleware › [P0] should validate permission before route handler executes (253ms)
  ok 450 [api] › tests\api\rls-policies.api.spec.ts:248:7 › RLS Policies - Company-Level Isolation › 2.3-API-004: [P1] should prevent INSERT into other company's data (192ms)
  ok 451 [api] › tests\api\rls-policies.api.spec.ts:278:7 › RLS Policies - Company-Level Isolation › 2.3-API-005: [P1] should prevent UPDATE of other company's data (203ms)
  ok 453 [api] › tests\api\rls-policies.api.spec.ts:309:7 › RLS Policies - Company-Level Isolation › 2.3-API-006: [P1] should prevent DELETE of other company's data (219ms)
  ok 452 [api] › tests\api\rls-policies.api.spec.ts:341:7 › RLS Policies - Store-Level Isolation › 2.3-API-007: [P0] should filter Shift table by user's assigned store_id (239ms)
  ok 454 [api] › tests\api\rls-policies.api.spec.ts:406:7 › RLS Policies - Store-Level Isolation › 2.3-API-008: [P0] should return empty result set when querying other store's data (284ms)
  ok 456 [api] › tests\api\rls-policies.api.spec.ts:563:7 › RLS Policies - Transaction Store-Level Isolation › 2.3-API-023: [P0] should return empty result set when querying other store's transactions (246ms)
  ok 455 [api] › tests\api\rls-policies.api.spec.ts:463:7 › RLS Policies - Transaction Store-Level Isolation › 2.3-API-022: [P0] should filter Transaction table by user's assigned store_id (271ms)
  ok 459 [api] › tests\api\rls-policies.api.spec.ts:828:7 › RLS Policies - System Admin Bypass › 2.3-API-009: [P0] should allow System Admin to access all companies (121ms)
  ok 457 [api] › tests\api\rls-policies.api.spec.ts:632:7 › RLS Policies - Transaction Store-Level Isolation › 2.3-API-024: [P0] should allow System Admin to access all transactions (314ms)
  ok 460 [api] › tests\api\rls-policies.api.spec.ts:860:7 › RLS Policies - System Admin Bypass › 2.3-API-010: [P0] should allow System Admin to access all stores (157ms)
  ok 458 [api] › tests\api\rls-policies.api.spec.ts:707:7 › RLS Policies - Transaction Store-Level Isolation › 2.3-API-025: [P1] should allow Corporate Admin to access all transactions in their company (450ms)
  ok 461 [api] › tests\api\rls-policies.api.spec.ts:902:7 › RLS Policies - Corporate Admin Company Access › 2.3-API-011: [P1] should allow Corporate Admin to access all stores in their company (342ms)
  x  201 [e2e] › tests\e2e\store-management.spec.ts:424:7 › Store Management E2E › [P1] Should display properly on mobile screens (41.5s)
  ok 462 [api] › tests\api\rls-policies.api.spec.ts:957:7 › RLS Policies - Prisma ORM Integration › 2.3-API-012: [P0] should enforce RLS policies on Prisma queries (313ms)
  ok 463 [api] › tests\api\rls-policies.api.spec.ts:992:7 › RLS Policies - Prisma ORM Integration › 2.3-API-013: [P0] should enforce RLS policies on direct SQL queries (274ms)
  ok 464 [api] › tests\api\rls-policies.api.spec.ts:1028:7 › RLS Policies - Silent Filtering › 2.3-API-014: [P1] should return empty result set without errors for unauthorized access (262ms)
  ok 466 [api] › tests\api\rls-policies.api.spec.ts:1136:7 › RLS Policies - Edge Cases › 2.3-API-017: [P1] should handle user with no roles (sees nothing) (124ms)
  ok 465 [api] › tests\api\rls-policies.api.spec.ts:1101:7 › RLS Policies - Edge Cases › 2.3-API-016: [P1] should handle user with no assigned company_id (sees nothing) (260ms)
  ok 468 [api] › tests\api\rls-policies.api.spec.ts:1208:7 › RLS Policies - Security Tests › 2.3-API-019: [P0] should prevent unauthorized access without valid user context (115ms)
  ok 469 [api] › tests\api\rls-policies.api.spec.ts:1234:7 › RLS Policies - Security Tests › 2.3-API-020: [P0] should prevent access with invalid user ID format (123ms)
  ok 467 [api] › tests\api\rls-policies.api.spec.ts:1170:7 › RLS Policies - Security Tests › 2.3-API-018: [P0] should prevent SQL injection in RLS context user ID (215ms)
  x  191 [e2e] › tests\e2e\store-management.spec.ts:147:7 › Store Management E2E › [P0] Should navigate to store detail page from stores list (47.4s)
  ok 470 [api] › tests\api\rls-policies.api.spec.ts:1263:7 › RLS Policies - Security Tests › 2.3-API-021: [P0] should prevent data leakage through error messages (206ms)
  ok 471 [api] › tests\api\rls-policies.api.spec.ts:1297:7 › RLS Policies - Security Tests › 2.3-API-026: [P0] should prevent boolean-based SQL injection in RLS context (205ms)
  ok 472 [api] › tests\api\rls-policies.api.spec.ts:1335:7 › RLS Policies - Security Tests › 2.3-API-027: [P0] should prevent UNION-based SQL injection in RLS context (184ms)
  x  473 [api] › tests\api\rls-policies.api.spec.ts:1413:7 › RLS Policies - Context Isolation › 2.3-API-029: [P1] should properly clear RLS context after reset (222ms)
  ok 474 [api] › tests\api\rls-policies.api.spec.ts:1457:7 › RLS Policies - Context Isolation › 2.3-API-030: [P1] should maintain RLS isolation across multiple queries in same context (242ms)
  ok 475 [api] › tests\api\store-management.api.spec.ts:54:7 › Store Management API - CRUD Operations › 2.2-API-001: [P0] POST /api/companies/:companyId/stores - should create store with valid data (235ms)
  -  477 [api] › tests\api\store-management.api.spec.ts:144:8 › Store Management API - CRUD Operations › 2.2-API-004: [P0] POST /api/companies/:companyId/stores - should reject invalid GPS coordinates
  ok 478 [api] › tests\api\store-management.api.spec.ts:167:7 › Store Management API - CRUD Operations › 2.2-API-005: [P0] POST /api/companies/:companyId/stores - should enforce company isolation (196ms)
  x  476 [api] › tests\api\store-management.api.spec.ts:124:7 › Store Management API - CRUD Operations › 2.2-API-003: [P0] POST /api/companies/:companyId/stores - should reject invalid timezone (263ms)
  ok 479 [api] › tests\api\store-management.api.spec.ts:192:7 › Store Management API - CRUD Operations › 2.2-API-006: [P0] GET /api/stores/:storeId - should retrieve store by ID (174ms)
  ok 480 [api] › tests\api\store-management.api.spec.ts:255:7 › Store Management API - CRUD Operations › 2.2-API-008: [P0] GET /api/companies/:companyId/stores - should list stores for company (170ms)
  x  481 [api] › tests\api\store-management.api.spec.ts:298:7 › Store Management API - CRUD Operations › 2.2-API-009: [P0] PUT /api/stores/:storeId - should update store (240ms)
  x  195 [e2e] › tests\e2e\store-management.spec.ts:193:7 › Store Management E2E › [P0] Should successfully edit store location (46.7s)
  x  194 [e2e] › tests\e2e\store-management.spec.ts:253:7 › Store Management E2E › [P0] Should create a new store (47.7s)
  ok 482 [api] › tests\api\rls-policies.api.spec.ts:1062:7 › RLS Policies - Silent Filtering › 2.3-API-015: [P1] should not leak information about existence of other companies (336ms)
  ok 483 [api] › tests\api\store-management.api.spec.ts:447:7 › Store Management API - Permissions › 2.2-API-013: [P0] should reject operations without STORE_CREATE permission (235ms)
  x  484 [api] › tests\api\rls-policies.api.spec.ts:1373:7 › RLS Policies - Security Tests › 2.3-API-028: [P0] should prevent comment-based SQL injection in RLS context (252ms)
  ok 485 [api] › tests\api\store-management.api.spec.ts:463:7 › Store Management API - Permissions › 2.2-API-014: [P0] should reject operations without STORE_READ permission (167ms)
  ok 486 [api] › tests\api\store-management.api.spec.ts:523:7 › Store Management API - Audit Trail › 2.2-API-016: [P0] audit log should capture IP address and user agent (223ms)
  ok 487 [api] › tests\api\store-management.api.spec.ts:104:7 › Store Management API - CRUD Operations › 2.2-API-002: [P0] POST /api/companies/:companyId/stores - should reject invalid data (314ms)
  x  488 [api] › tests\api\store-management.api.spec.ts:557:7 › Store Management API - Error Handling › 2.2-API-017: [P0] should return 404 for non-existent store (247ms)
  ok 490 [api] › tests\api\store-management.api.spec.ts:570:7 › Store Management API - Error Handling › 2.2-API-018: [P0] should return 400 for invalid location_json structure (211ms)
  ok 489 [api] › tests\api\store-management.api.spec.ts:226:7 › Store Management API - CRUD Operations › 2.2-API-007: [P0] GET /api/stores/:storeId - should enforce company isolation (417ms)
  -  492 [api] › tests\api\store-management.api.spec.ts:620:8 › Store Management API - Security › 2.2-API-021: [P0] CSRF PROTECTION - should validate CSRF tokens on state-changing operations
  ok 491 [api] › tests\api\store-management.api.spec.ts:608:7 › Store Management API - Security › 2.2-API-020: [P0] RBAC BYPASS - Store Manager cannot access System Admin endpoints (145ms)
  x  200 [e2e] › tests\e2e\store-management.spec.ts:376:7 › Store Management E2E › [P1] Should prevent deletion of ACTIVE store (47.4s)
  ok 494 [api] › tests\api\store-management.api.spec.ts:688:7 › Store Management API - Resilience › 2.2-API-023: [P1] CONCURRENT CREATE - simultaneous creates should both succeed (259ms)
  ok 493 [api] › tests\api\store-management.api.spec.ts:645:7 › Store Management API - Resilience › 2.2-API-022: [P1] RACE CONDITION - concurrent updates should be handled safely (267ms)
  ok 495 [api] › tests\api\store-management.api.spec.ts:738:7 › Store Management API - Validation (P1) › 2.2-API-025: [P1] should default status to ACTIVE when not provided (188ms)
  ok 496 [api] › tests\api\store-management.api.spec.ts:755:7 › Store Management API - Validation (P1) › 2.2-API-026: [P1] should trim whitespace from store name (197ms)
  ok 497 [api] › tests\api\store-management.api.spec.ts:342:7 › Store Management API - CRUD Operations › 2.2-API-010: [P0] PUT /api/stores/:storeId - should enforce company isolation (316ms)
  ok 499 [api] › tests\api\store-management.api.spec.ts:785:7 › Store Management API - Validation (P1) › 2.2-API-028: [P1] should update only name field (202ms)
  x  498 [api] › tests\api\store-management.api.spec.ts:771:7 › Store Management API - Validation (P1) › 2.2-API-027: [P1] should reject creation when company does not exist (211ms)
  -  503 [api] › tests\api\store-management.api.spec.ts:952:8 › Store Configuration API › 2.5-API-003: [P0] PUT /api/stores/:storeId/configuration - should validate GPS coordinates range
  x  500 [api] › tests\api\store-management.api.spec.ts:859:7 › Store Configuration API › 2.5-API-001: [P0] PUT /api/stores/:storeId/configuration - should update store configuration with valid data (276ms)
  x  502 [api] › tests\api\store-management.api.spec.ts:923:7 › Store Configuration API › 2.5-API-002: [P0] PUT /api/stores/:storeId/configuration - should validate timezone format (249ms)
  x  501 [api] › tests\api\store-management.api.spec.ts:372:7 › Store Management API - CRUD Operations › 2.2-API-011: [P0] DELETE /api/stores/:storeId - should soft delete store (422ms)
  ok 504 [api] › tests\api\store-management.api.spec.ts:414:7 › Store Management API - CRUD Operations › 2.2-API-012: [P0] DELETE /api/stores/:storeId - should enforce company isolation (348ms)
  ok 505 [api] › tests\api\store-management.api.spec.ts:1146:7 › Store Configuration API › 2.5-API-008: [P1] PUT /api/stores/:storeId/configuration - should reject invalid time format (24:00) (164ms)
  ok 506 [api] › tests\api\store-management.api.spec.ts:1176:7 › Store Configuration API › 2.5-API-009: [P1] PUT /api/stores/:storeId/configuration - should reject invalid time format (25:00) (160ms)
  ok 507 [api] › tests\api\store-management.api.spec.ts:1204:7 › Store Configuration API › 2.5-API-010: [P1] PUT /api/stores/:storeId/configuration - should reject time without leading zero (9:00) (145ms)
  ok 508 [api] › tests\api\store-management.api.spec.ts:1232:7 › Store Configuration API › 2.5-API-011: [P1] PUT /api/stores/:storeId/configuration - should reject invalid time format (abc:def) (202ms)
  ok 510 [api] › tests\api\store-management.api.spec.ts:1260:7 › Store Configuration API › 2.5-API-012: [P1] PUT /api/stores/:storeId/configuration - should accept boundary times (00:00, 23:59) (186ms)
  ok 509 [api] › tests\api\store-management.api.spec.ts:494:7 › Store Management API - Audit Trail › 2.2-API-015: [P0] audit log should include user_id and action (394ms)
  ok 511 [api] › tests\api\store-management.api.spec.ts:1288:7 › Store Configuration API › 2.5-API-013: [P1] PUT /api/stores/:storeId/configuration - should reject same open and close time (243ms)
  ok 512 [api] › tests\api\store-management.api.spec.ts:1318:7 › Store Configuration API › 2.5-API-014: [P1] PUT /api/stores/:storeId/configuration - should reject missing required fields (open without close) (216ms)
  ok 513 [api] › tests\api\store-management.api.spec.ts:1346:7 › Store Configuration API › 2.5-API-015: [P1] PUT /api/stores/:storeId/configuration - should reject missing required fields (close without open) (311ms)
  ok 515 [api] › tests\api\store-management.api.spec.ts:594:7 › Store Management API - Security › 2.2-API-019: [P0] AUTH BYPASS - should reject access without JWT token (142ms)
  ok 514 [api] › tests\api\store-management.api.spec.ts:1374:7 › Store Configuration API › 2.5-API-016: [P1] PUT /api/stores/:storeId/configuration - should reject closed=true with open/close times (conflicting data) (263ms)
  ok 516 [api] › tests\api\store-management.api.spec.ts:1403:7 › Store Configuration API › 2.5-API-017: [P1] PUT /api/stores/:storeId/configuration - should reject closed=false but no open/close times (198ms)
  ok 518 [api] › tests\api\store-management.api.spec.ts:1463:7 › Store Configuration API › 2.5-API-019: [P0] SECURITY - should reject SQL injection in address field (192ms)
  ok 517 [api] › tests\api\store-management.api.spec.ts:1435:7 › Store Configuration API › 2.5-API-018: [P0] SECURITY - should reject SQL injection in timezone field (242ms)
  x  520 [api] › tests\api\store-management.api.spec.ts:1492:7 › Store Configuration API › 2.5-API-020: [P0] SECURITY - should reject XSS in address field (254ms)
  ok 521 [api] › tests\api\store-management.api.spec.ts:1529:7 › Store Configuration API › 2.5-API-021: [P0] SECURITY - should reject path traversal in address field (198ms)
  ok 522 [api] › tests\api\store-management.api.spec.ts:1558:7 › Store Configuration API › 2.5-API-022: [P0] SECURITY - should reject JSON injection in configuration object (204ms)
  ok 519 [api] › tests\api\store-management.api.spec.ts:721:7 › Store Management API - Validation (P1) › 2.2-API-024: [P1] should default timezone to America/New_York when not provided (353ms)
  ok 524 [api] › tests\api\store-management.api.spec.ts:1654:7 › Store Configuration API › 2.5-API-025: [P0] SECURITY - should reject access without JWT token (configuration endpoint) (95ms)
  ok 525 [api] › tests\api\store-management.api.spec.ts:1688:7 › Store Configuration API › 2.5-API-026: [P0] SECURITY - should reject token tampering (modified JWT) (226ms)
  ok 523 [api] › tests\api\store-management.api.spec.ts:1624:7 › Store Configuration API › 2.5-API-024: [P0] SECURITY - should reject extremely large payloads causing DoS (308ms)
  x  526 [api] › tests\api\store-management.api.spec.ts:1717:7 › Store Configuration API › 2.5-API-028: [P0] SECURITY - should reject mass assignment (additional fields beyond allowed) (278ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  ok 527 [api] › tests\api\store-management.api.spec.ts:1754:7 › Store Configuration API › 2.5-API-027: [P0] SECURITY - should prevent data leakage (no sensitive data in response) (245ms)
  x  528 [api] › tests\api\transaction-data-models.api.spec.ts:84:7 › Transaction Data Models - CRUD Operations › [P0] should create Transaction with all required fields (197ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  ok 529 [api] › tests\api\store-management.api.spec.ts:984:7 › Store Configuration API › 2.5-API-004: [P0] PUT /api/stores/:storeId/configuration - should validate operating hours format (413ms)
  x  531 [api] › tests\api\transaction-data-models.api.spec.ts:209:7 › Transaction Data Models - CRUD Operations › [P0] should create TransactionPayments linked to Transaction (221ms)
  x  530 [api] › tests\api\store-management.api.spec.ts:1015:7 › Store Configuration API › 2.5-API-005: [P0] PUT /api/stores/:storeId/configuration - should enforce company isolation (425ms)
  ok 533 [api] › tests\api\transaction-data-models.api.spec.ts:290:7 › Transaction Data Models - CRUD Operations › [P0] should cascade delete line items and payments when transaction is deleted (212ms)
  x  532 [api] › tests\api\store-management.api.spec.ts:1086:7 › Store Configuration API › 2.5-API-006: [P0] PUT /api/stores/:storeId/configuration - should return 404 for non-existent store (391ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  535 [api] › tests\api\transaction-data-models.api.spec.ts:470:7 › Transaction Data Models - Query Operations › [P1] should query transactions by timestamp range (161ms)
  x  534 [api] › tests\api\store-management.api.spec.ts:1110:7 › Store Configuration API › 2.5-API-007: [P0] PUT /api/stores/:storeId/configuration - should enforce US standard operating hours format (394ms)
  ok 536 [api] › tests\api\store-management.api.spec.ts:1593:7 › Store Configuration API › 2.5-API-023: [P0] SECURITY - should reject deeply nested objects causing DoS (410ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  537 [api] › tests\api\transaction-data-models.api.spec.ts:693:7 › Transaction Data Models - Business Logic › [P2] should allow negative totals for refund transactions (264ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  538 [api] › tests\api\transaction-data-models.api.spec.ts:146:7 › Transaction Data Models - CRUD Operations › [P0] should create TransactionLineItems linked to Transaction (371ms)
  ok 539 [api] › tests\api\transaction-data-models.api.spec.ts:264:7 › Transaction Data Models - CRUD Operations › [P0] should enforce foreign key constraint - store must exist (371ms)
  ok 541 [api] › tests\api\transaction-data-models.api.spec.ts:833:7 › Transaction Data Models - Business Logic › [P2] should verify indexes exist for query performance (118ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  540 [api] › tests\api\transaction-data-models.api.spec.ts:361:7 › Transaction Data Models - Query Operations › [P1] should query transactions by store_id (484ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  543 [api] › tests\api\transaction-data-models.api.spec.ts:854:7 › Transaction Data Models - Edge Cases › [P2] should handle zero values for subtotal, tax, discount (280ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  542 [api] › tests\api\transaction-data-models.api.spec.ts:406:7 › Transaction Data Models - Query Operations › [P1] should query transactions by shift_id (468ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  544 [api] › tests\api\transaction-data-models.api.spec.ts:517:7 › Transaction Data Models - Query Operations › [P1] should load transaction with line items and payments (relationships) (456ms)
  x  545 [api] › tests\api\transaction-data-models.api.spec.ts:593:7 › Transaction Data Models - Business Logic › [P2] should verify transaction total matches formula: subtotal + tax - discount (317ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  546 [api] › tests\api\transaction-data-models.api.spec.ts:630:7 › Transaction Data Models - Business Logic › [P2] should verify transaction total matches line items sum (464ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  547 [api] › tests\api\transaction-data-models.api.spec.ts:733:7 › Transaction Data Models - Business Logic › [P2] should allow multiple payments per transaction (split tender) (275ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  548 [api] › tests\api\transaction-data-models.api.spec.ts:790:7 › Transaction Data Models - Business Logic › [P2] should allow overpayment (customer pays more, receives change) (259ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  549 [api] › tests\api\transaction-data-models.api.spec.ts:884:7 › Transaction Data Models - Edge Cases › [P2] should handle very large transaction amounts (262ms)
  x  550 [api] › tests\api\transaction-data-models.api.spec.ts:918:7 › Transaction Data Models - Edge Cases › [P2] should handle decimal precision correctly (264ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  551 [api] › tests\api\transaction-data-models.api.spec.ts:958:7 › Transaction Data Models - Edge Cases › [P2] should handle zero quantity line items (271ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  552 [api] › tests\api\transaction-data-models.api.spec.ts:998:7 › Transaction Data Models - Edge Cases › [P2] should handle negative quantity line items (returns) (238ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  553 [api] › tests\api\transaction-data-models.api.spec.ts:1045:7 › Transaction Data Models - Edge Cases › [P2] should handle very large quantities (278ms)
  ok 554 [api] › tests\api\transaction-data-models.api.spec.ts:1085:7 › Transaction Data Models - Edge Cases › [P2] should reject invalid UUID for foreign keys (201ms)
  x  555 [api] › tests\api\transaction-import.api.spec.ts:79:7 › Transaction Import API - Authentication › 3.2-API-001: [P0] should return 401 when JWT token is missing (162ms)
[31mprisma:error[39m 
Invalid `bypassClient.user.delete()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:468:37

  465   where: { user_id: user.user_id },
  466 });
  467 // 3. Delete user
→ 468 await bypassClient.user.delete(
Foreign key constraint violated on the constraint: `transactions_cashier_id_fkey`
  ok 556 [api] › tests\api\transaction-data-models.api.spec.ts:1115:7 › Transaction Data Models - Security › [P1] should enforce multi-tenant isolation - cannot access other company's transactions (267ms)
  x  557 [api] › tests\api\transaction-data-models.api.spec.ts:1189:7 › Transaction Data Models - Security › [P1] should prevent creating transactions in unauthorized stores (244ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  558 [api] › tests\api\transaction-data-models.api.spec.ts:1255:7 › Transaction Data Models - Security › [P1] should handle SQL injection attempts in string fields (269ms)
  x  559 [api] › tests\api\transaction-data-models.api.spec.ts:1306:7 › Transaction Data Models - Security › [P1] should handle XSS attempts in reference fields (259ms)
  x  560 [api] › tests\api\transaction-import.api.spec.ts:125:7 › Transaction Import API - Authentication › 3.2-API-003: [P0] should return 403 when user lacks TRANSACTION_CREATE permission (354ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  561 [api] › tests\api\transaction-data-models.api.spec.ts:1348:7 › Transaction Data Models - Security › [P2] should validate payment method string length (255ms)
[31mprisma:error[39m 
Invalid `bypassClient.shift.deleteMany()` invocation in
c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

  457 // Delete in correct order to respect foreign key constraints
  458 await withBypassClient(async (bypassClient) => {
  459   // 1. Delete shifts first (references user via cashier_id)
→ 460   await bypassClient.shift.deleteMany(
Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`
  x  562 [api] › tests\api\transaction-data-models.api.spec.ts:1393:7 › Transaction Data Models - Shift Rules › [P1] should not allow transactions on closed shifts (242ms)
  ok 563 [api] › tests\api\transaction-data-models.api.spec.ts:1441:7 › Transaction Data Models - Shift Rules › [P2] should allow optional opening/closing amounts on shifts (232ms)
  x  564 [api] › tests\api\transaction-import.api.spec.ts:379:7 › Transaction Import API - Core Functionality › 3.2-API-010: [P1] should return 503 when RabbitMQ connection fails (272ms)
  x  565 [api] › tests\api\transaction-import.api.spec.ts:103:7 › Transaction Import API - Authentication › 3.2-API-002: [P0] should return 401 when JWT token is invalid (168ms)
  x  566 [api] › tests\api\transaction-import.api.spec.ts:157:7 › Transaction Import API - Authentication › 3.2-API-004: [P0] should return 403 when store_id is not accessible to user (541ms)
  x  567 [api] › tests\api\transaction-import.api.spec.ts:210:7 › Transaction Import API - Core Functionality › 3.2-API-005: [P1] should return 202 Accepted with correlation_id for valid transaction (609ms)
  x  568 [api] › tests\api\transaction-import.api.spec.ts:246:7 › Transaction Import API - Core Functionality › 3.2-API-006: [P1] should return valid UUID format for correlation_id (606ms)
  x  569 [api] › tests\api\transaction-import.api.spec.ts:278:7 › Transaction Import API - Core Functionality › 3.2-API-007: [P1] should return 404 when shift_id does not exist (488ms)
  x  570 [api] › tests\api\transaction-import.api.spec.ts:309:7 › Transaction Import API - Core Functionality › 3.2-API-008: [P1] should return 409 when shift is CLOSED (564ms)
  x  571 [api] › tests\api\transaction-import.api.spec.ts:349:7 › Transaction Import API - Core Functionality › 3.2-API-009: [P1] should enqueue message to RabbitMQ transactions.processing queue (489ms)
  ok 572 [api] › tests\api\transaction-import.api.spec.ts:421:7 › Transaction Import API - Validation › 3.2-API-011: [P2] should return 400 when line_items array is empty (394ms)
  x  573 [api] › tests\api\transaction-import.api.spec.ts:451:7 › Transaction Import API - Validation › 3.2-API-012: [P2] should accept single item transaction (477ms)
  x  574 [api] › tests\api\transaction-import.api.spec.ts:716:7 › Transaction Import API - Validation › 3.2-API-019: [P2] should accept multiple payments (split payment) (317ms)
  x  575 [api] › tests\api\transaction-import.api.spec.ts:491:7 › Transaction Import API - Validation › 3.2-API-013: [P3] should handle large number of line items (100+) (464ms)
  ok 576 [api] › tests\api\transaction-import.api.spec.ts:531:7 › Transaction Import API - Validation › 3.2-API-014: [P2] should return 400 when line item quantity is zero (319ms)
  ok 577 [api] › tests\api\transaction-import.api.spec.ts:605:7 › Transaction Import API - Validation › 3.2-API-016: [P2] should return 400 when line item unit_price is zero (339ms)
  ok 578 [api] › tests\api\transaction-import.api.spec.ts:568:7 › Transaction Import API - Validation › 3.2-API-015: [P2] should return 400 when line item quantity is negative (314ms)
  ok 580 [api] › tests\api\transaction-import.api.spec.ts:848:7 › Transaction Import API - Validation › 3.2-API-023: [P2] should return 400 when payment amount is negative (203ms)
  ok 579 [api] › tests\api\transaction-import.api.spec.ts:645:7 › Transaction Import API - Validation › 3.2-API-017: [P2] should return 400 when line item unit_price is negative (353ms)
  ok 582 [api] › tests\api\transaction-import.api.spec.ts:882:7 › Transaction Import API - Validation › 3.2-API-024: [P2] should handle zero transaction (subtotal=0, tax=0, discount=0) (211ms)
  ok 583 [api] › tests\api\transaction-import.api.spec.ts:918:7 › Transaction Import API - Validation › 3.2-API-025: [P2] should return 400 when subtotal is negative (221ms)
  ok 585 [api] › tests\api\transaction-import.api.spec.ts:991:7 › Transaction Import API - Validation › 3.2-API-027: [P3] should handle decimal precision correctly (201ms)
  ok 581 [api] › tests\api\transaction-import.api.spec.ts:686:7 › Transaction Import API - Validation › 3.2-API-018: [P2] should return 400 when payments array is empty (399ms)
  ok 586 [api] › tests\api\transaction-import.api.spec.ts:1032:7 › Transaction Import API - Validation › 3.2-API-028: [P2] should return 400 when discount exceeds subtotal (205ms)
  x  584 [api] › tests\api\transaction-import.api.spec.ts:950:7 › Transaction Import API - Validation › 3.2-API-026: [P3] should handle very large transaction amounts (1,000,000+) (276ms)
  x  587 [api] › tests\api\transaction-import.api.spec.ts:1068:7 › Transaction Import API - Validation › 3.2-API-029: [P2] should return 400 with details when required fields are missing (277ms)
  ok 588 [api] › tests\api\transaction-import.api.spec.ts:1100:7 › Transaction Import API - Validation › 3.2-API-030: [P2] should return 400 when payment method is invalid (207ms)
  ok 589 [api] › tests\api\transaction-import.api.spec.ts:1137:7 › Transaction Import API - Validation › 3.2-API-031: [P2] should return 400 when payment total is less than transaction total (220ms)
  ok 590 [api] › tests\api\transaction-import.api.spec.ts:1177:7 › Transaction Import API - Validation › 3.2-API-032: [P2] should return 400 when store_id is not valid UUID format (291ms)
  ok 591 [api] › tests\api\transaction-import.api.spec.ts:1297:7 › Transaction Import API - Security › 3.2-API-035: [P1] should return 401 for malformed JWT token (277ms)
  ok 593 [api] › tests\api\transaction-import.api.spec.ts:1377:7 › Transaction Import API - Security › 3.2-API-037: [P1] should not leak internal error details in response (220ms)
  ok 597 [api] › tests\api\user-role-management.api.spec.ts:70:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-002: [P0] POST /api/admin/users - should reject invalid email format (AC #2) (111ms)
  x  596 [api] › tests\api\user-role-management.api.spec.ts:28:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-001: [P0] POST /api/admin/users - should create user with valid data (AC #2) (178ms)
  x  594 [api] › tests\api\transaction-import.api.spec.ts:752:7 › Transaction Import API - Validation › 3.2-API-020: [P2] should accept exact payment match (460ms)
  x  598 [api] › tests\api\user-role-management.api.spec.ts:87:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-003: [P1] POST /api/admin/users - should reject duplicate email (AC #2) (167ms)
  x  595 [api] › tests\api\transaction-import.api.spec.ts:785:7 › Transaction Import API - Validation › 3.2-API-021: [P2] should accept overpayment (change scenario) (428ms)
  x  592 [api] › tests\api\transaction-import.api.spec.ts:1341:7 › Transaction Import API - Security › 3.2-API-036: [P1] should reject oversized payload (813ms)
  ok 599 [api] › tests\api\transaction-import.api.spec.ts:818:7 › Transaction Import API - Validation › 3.2-API-022: [P2] should return 400 when payment amount is zero (425ms)
  ok 600 [api] › tests\api\user-role-management.api.spec.ts:259:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-009: [P0] GET /api/admin/users/:userId - should get user details with roles (AC #1) (181ms)
  ok 602 [api] › tests\api\user-role-management.api.spec.ts:284:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-010: [P1] GET /api/admin/users/:userId - should return 404 for non-existent user (100ms)
  ok 604 [api] › tests\api\user-role-management.api.spec.ts:304:7 › 2.8-API: User Management API - User Activation/Deactivation › 2.8-API-011: [P1] PATCH /api/admin/users/:userId/status - should deactivate user (AC #7) (175ms)
  ok 601 [api] › tests\api\transaction-import.api.spec.ts:1212:7 › Transaction Import API - Security › 3.2-API-033: [P1] should reject SQL injection in string fields (403ms)
  ok 603 [api] › tests\api\transaction-import.api.spec.ts:1263:7 › Transaction Import API - Security › 3.2-API-034: [P1] should return 401 for expired JWT token (411ms)
  ok 605 [api] › tests\api\user-role-management.api.spec.ts:345:7 › 2.8-API: User Management API - User Activation/Deactivation › 2.8-API-012: [P1] PATCH /api/admin/users/:userId/status - should activate inactive user (AC #7) (160ms)
  ok 606 [api] › tests\api\user-role-management.api.spec.ts:369:7 › 2.8-API: User Management API - User Activation/Deactivation › 2.8-API-013: [P2] PATCH /api/admin/users/:userId/status - should reject invalid status value (150ms)
  ok 607 [api] › tests\api\user-role-management.api.spec.ts:394:7 › 2.8-API: User Management API - Role Assignment Operations › 2.8-API-014: [P0] POST /api/admin/users/:userId/roles - should assign SYSTEM scope role (AC #5) (195ms)
  ok 608 [api] › tests\api\user-role-management.api.spec.ts:442:7 › 2.8-API: User Management API - Role Assignment Operations › 2.8-API-015: [P1] POST /api/admin/users/:userId/roles - should assign COMPANY scope role with client_id and company_id (AC #3) (249ms)
  ok 610 [api] › tests\api\user-role-management.api.spec.ts:501:7 › 2.8-API: User Management API - Role Assignment Operations › 2.8-API-016: [P1] POST /api/admin/users/:userId/roles - should fail COMPANY scope without required IDs (AC #3) (157ms)
  ok 611 [api] › tests\api\user-role-management.api.spec.ts:530:7 › 2.8-API: User Management API - Role Assignment Operations › 2.8-API-017: [P1] POST /api/admin/users/:userId/roles - should assign STORE scope role with all required IDs (AC #4) (221ms)
  ok 609 [api] › tests\api\user-role-management.api.spec.ts:108:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-004: [P0] POST /api/admin/users - should reject missing name (AC #2) (337ms)
  ok 612 [api] › tests\api\user-role-management.api.spec.ts:602:7 › 2.8-API: User Management API - Role Assignment Operations › 2.8-API-018: [P1] POST /api/admin/users/:userId/roles - should fail STORE scope without store_id (AC #4) (174ms)
  ok 613 [api] › tests\api\user-role-management.api.spec.ts:652:7 › 2.8-API: User Management API - Role Assignment Operations › 2.8-API-019: [P1] POST /api/admin/users/:userId/roles - should validate company belongs to client (AC #3) (185ms)
  ok 617 [api] › tests\api\user-role-management.api.spec.ts:824:7 › 2.8-API: User Management API - Role Assignment Operations › 2.8-API-022: [P1] POST/DELETE role operations - should log admin who performed them (AC #6) (146ms)
  ok 615 [api] › tests\api\user-role-management.api.spec.ts:703:7 › 2.8-API: User Management API - Role Assignment Operations › 2.8-API-020: [P1] POST /api/admin/users/:userId/roles - should validate store belongs to company (AC #4) (226ms)
  x  616 [api] › tests\api\user-role-management.api.spec.ts:774:7 › 2.8-API: User Management API - Role Assignment Operations › 2.8-API-021: [P1] DELETE /api/admin/users/:userId/roles/:userRoleId - should revoke role (AC #6) (205ms)
  ok 620 [api] › tests\api\user-role-management.api.spec.ts:863:7 › 2.8-API: User Management API - Permission Enforcement › 2.8-API-023: [P0] All endpoints should require ADMIN_SYSTEM_CONFIG permission (AC #8) (219ms)
  ok 622 [api] › tests\api\user-role-management.api.spec.ts:919:7 › 2.8-API: User Management API - Permission Enforcement › 2.8-API-025: [P0] All endpoints should reject unauthenticated requests (AC #8) (103ms)
  ok 614 [api] › tests\api\user-role-management.api.spec.ts:125:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-005: [P0] POST /api/admin/users - should create user with initial roles (AC #2) (425ms)
  ok 621 [api] › tests\api\user-role-management.api.spec.ts:891:7 › 2.8-API: User Management API - Permission Enforcement › 2.8-API-024: [P0] POST /api/admin/users/:userId/roles - should reject non-admin users (AC #8) (234ms)
  ok 619 [api] › tests\api\user-role-management.api.spec.ts:163:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-006: [P0] GET /api/admin/users - should list all users with pagination (AC #1) (379ms)
  ok 618 [api] › tests\api\user-role-management.api.spec.ts:198:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-007: [P1] GET /api/admin/users - should display name, email, roles (badges), and status (AC #1) (382ms)
  ok 623 [api] › tests\api\user-role-management.api.spec.ts:965:7 › 2.8-API: User Management API - Security › 2.8-API-027: [P1] POST /api/admin/users - should prevent XSS in user name (129ms)
  ok 624 [api] › tests\api\user-role-management.api.spec.ts:982:7 › 2.8-API: User Management API - Security › 2.8-API-028: [P1] GET /api/admin/users/:userId - should not leak sensitive data (213ms)
  ok 625 [api] › tests\api\user-role-management.api.spec.ts:1008:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-029: [P2] GET /api/admin/users/:userId - should reject invalid UUID format (177ms)
  ok 627 [api] › tests\api\user-role-management.api.spec.ts:1037:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-031: [P2] POST /api/admin/users - should reject empty email (224ms)
  ok 628 [api] › tests\api\user-role-management.api.spec.ts:1052:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-032: [P2] POST /api/admin/users - should reject whitespace-only name (182ms)
  ok 629 [api] › tests\api\user-role-management.api.spec.ts:1067:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-033: [P2] POST /api/admin/users - should reject very long email (>255 chars) (176ms)
  ok 630 [api] › tests\api\user-role-management.api.spec.ts:1085:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-034: [P2] POST /api/admin/users - should reject very long name (>255 chars) (139ms)
  ok 631 [api] › tests\api\user-role-management.api.spec.ts:1103:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-035: [P2] POST /api/admin/users - should reject email with multiple @ symbols (162ms)
  x  626 [api] › tests\api\user-role-management.api.spec.ts:1022:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-030: [P2] POST /api/admin/users - should handle unicode characters in name (262ms)
  ok 632 [api] › tests\api\user-role-management.api.spec.ts:1118:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-036: [P2] GET /api/admin/users - should handle page 0 gracefully (155ms)
  ok 634 [api] › tests\api\user-role-management.api.spec.ts:1142:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-038: [P2] GET /api/admin/users - should reject limit exceeding maximum (>100) (212ms)
  ok 633 [api] › tests\api\user-role-management.api.spec.ts:1130:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-037: [P2] GET /api/admin/users - should handle negative page gracefully (203ms)
  ok 635 [api] › tests\api\user-role-management.api.spec.ts:1156:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-039: [P2] GET /api/admin/users - should return empty array for page beyond data (230ms)
  ok 636 [api] › tests\api\user-role-management.api.spec.ts:1172:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-040: [P2] POST /api/admin/users/:userId/roles - should reject empty string UUID (220ms)
  ok 638 [api] › tests\api\user-role-management.api.spec.ts:1230:7 › 2.8-API: User Management API - Business Logic Rules › 2.8-API-043: [P0] POST /api/admin/users - should reject user creation with empty roles array (147ms)
  ok 637 [api] › tests\api\user-role-management.api.spec.ts:1210:7 › 2.8-API: User Management API - Business Logic Rules › 2.8-API-042: [P0] POST /api/admin/users - should reject user creation without initial role (208ms)
  ok 640 [api] › tests\api\user-role-management.api.spec.ts:1290:7 › 2.8-API: User Management API - Business Logic Rules › 2.8-API-045: [P0] PATCH /api/admin/users/:userId/status - should prevent self-deactivation (140ms)
  ok 639 [api] › tests\api\user-role-management.api.spec.ts:1249:7 › 2.8-API: User Management API - Business Logic Rules › 2.8-API-044: [P0] DELETE /api/admin/users/:userId/roles/:userRoleId - should prevent revoking last role (254ms)
  ok 642 [api] › tests\api\user-role-management.api.spec.ts:1405:7 › 2.8-API: User Management API - Enhanced Security Tests › 2.8-API-047: [P1] POST /api/admin/users - should handle SQL injection in email field (181ms)
  ok 646 [api] › tests\api\user-role-management.api.spec.ts:1454:7 › 2.8-API: User Management API - Enhanced Security Tests › 2.8-API-050: [P1] All admin endpoints - should reject expired JWT tokens (66ms)
  ok 647 [api] › tests\api\user-role-management.api.spec.ts:1473:7 › 2.8-API: User Management API - Enhanced Security Tests › 2.8-API-051: [P1] All admin endpoints - should reject malformed JWT tokens (19ms)
  ok 644 [api] › tests\api\user-role-management.api.spec.ts:1420:7 › 2.8-API: User Management API - Enhanced Security Tests › 2.8-API-048: [P1] POST /api/admin/users - should handle NoSQL injection attempts (190ms)
  ok 645 [api] › tests\api\user-role-management.api.spec.ts:1437:7 › 2.8-API: User Management API - Enhanced Security Tests › 2.8-API-049: [P1] POST /api/admin/users - should handle path traversal in name (211ms)
  ok 641 [api] › tests\api\user-role-management.api.spec.ts:1310:7 › 2.8-API: User Management API - Business Logic Rules › 2.8-API-046: [P1] POST /api/admin/users/:userId/roles - should allow same role for different scopes (364ms)
  ok 649 [api] › tests\api\user-role-management.api.spec.ts:1517:7 › 2.8-API: User Management API - Enhanced Security Tests › 2.8-API-053: [P1] POST /api/admin/users - should sanitize control characters in name (140ms)
  ok 648 [api] › tests\api\user-role-management.api.spec.ts:1491:7 › 2.8-API: User Management API - Enhanced Security Tests › 2.8-API-052: [P1] GET /api/admin/users/:userId - should not expose internal database fields (193ms)
  ok 650 [api] › tests\api\user-role-management.api.spec.ts:1530:7 › 2.8-API: User Management API - Enhanced Security Tests › 2.8-API-054: [P2] GET /api/admin/users - should include complete pagination metadata (181ms)
  ok 643 [api] › tests\api\user-role-management.api.spec.ts:235:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-008: [P2] GET /api/admin/users - should support pagination with page and limit (AC #1) (454ms)
  ok 651 [api] › tests\api\user-role-management.api.spec.ts:947:7 › 2.8-API: User Management API - Security › 2.8-API-026: [P1] POST /api/admin/users - should prevent SQL injection in name field (170ms)
  ok 652 [api] › tests\api\user-role-management.api.spec.ts:1188:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-041: [P2] DELETE /api/admin/users/:userId/roles/:userRoleId - should reject invalid userRoleId format (179ms)


  1) [e2e] › tests\e2e\admin-user-management.spec.ts:115:7 › Admin User Management E2E › [P0] Should load users list page 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40

      40 
      41 // Create superadmin user
      42 const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    → 43 superadminUser = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      41 |     // Create superadmin user
      42 |     const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    > 43 |     superadminUser = await prisma.user.create({
         |                                        ^
      44 |       data: {
      45 |         public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      46 |         email: "admin-e2e@test.com",
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:22

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--ebe68-Should-load-users-list-page-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-admin-user-management--ebe68-Should-load-users-list-page-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  2) [e2e] › tests\e2e\admin-user-management.spec.ts:135:7 › Admin User Management E2E › [P0] Should successfully edit user name 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('input[data-testid="user-name-input"]')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('input[data-testid="user-name-input"]')[22m


      138 |     const newName = `Updated User ${Date.now()}`;
      139 |     const nameInput = page.locator('input[data-testid="user-name-input"]');
    > 140 |     await expect(nameInput).toBeVisible({ timeout: 10000 });
          |                             ^
      141 |     await nameInput.clear();
      142 |     await nameInput.fill(newName);
      143 |
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:140:29

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\admin-user-management.spec.ts:91:31

      88 await prisma.userRole.deleteMany({
      89   where: { user_id: testUser.user_id },
      90 });
    → 91 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      89 |         where: { user_id: testUser.user_id },
      90 |       });
    > 91 |       await prisma.user.delete({
         |                               ^
      92 |         where: { user_id: testUser.user_id },
      93 |       });
      94 |     }
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:91:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:91:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--22a83-successfully-edit-user-name-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--22a83-successfully-edit-user-name-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-admin-user-management--22a83-successfully-edit-user-name-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--22a83-successfully-edit-user-name-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-admin-user-management--22a83-successfully-edit-user-name-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  3) [e2e] › tests\e2e\admin-user-management.spec.ts:162:7 › Admin User Management E2E › [P0] Should successfully change user status 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('button[data-testid="user-status-select"]')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('button[data-testid="user-status-select"]')[22m


      166 |       'button[data-testid="user-status-select"]',
      167 |     );
    > 168 |     await expect(statusSelect).toBeVisible({ timeout: 10000 });
          |                                ^
      169 |     await statusSelect.click();
      170 |     await page.locator('div[role="option"]:has-text("Inactive")').click();
      171 |
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:168:32

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\admin-user-management.spec.ts:91:31

      88 await prisma.userRole.deleteMany({
      89   where: { user_id: testUser.user_id },
      90 });
    → 91 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      89 |         where: { user_id: testUser.user_id },
      90 |       });
    > 91 |       await prisma.user.delete({
         |                               ^
      92 |         where: { user_id: testUser.user_id },
      93 |       });
      94 |     }
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:91:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:91:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--d722d-essfully-change-user-status-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--d722d-essfully-change-user-status-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-admin-user-management--d722d-essfully-change-user-status-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--d722d-essfully-change-user-status-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-admin-user-management--d722d-essfully-change-user-status-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  4) [e2e] › tests\e2e\admin-user-management.spec.ts:190:7 › Admin User Management E2E › [P0] Should create a new user 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40

      40 
      41 // Create superadmin user
      42 const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    → 43 superadminUser = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      41 |     // Create superadmin user
      42 |     const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    > 43 |     superadminUser = await prisma.user.create({
         |                                        ^
      44 |       data: {
      45 |         public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      46 |         email: "admin-e2e@test.com",
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:22

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--0dc4c-P0-Should-create-a-new-user-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-admin-user-management--0dc4c-P0-Should-create-a-new-user-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  5) [e2e] › tests\e2e\admin-user-management.spec.ts:282:7 › Admin User Management E2E › [P0] Should remove role from user 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40

      40 
      41 // Create superadmin user
      42 const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    → 43 superadminUser = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      41 |     // Create superadmin user
      42 |     const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    > 43 |     superadminUser = await prisma.user.create({
         |                                        ^
      44 |       data: {
      45 |         public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      46 |         email: "admin-e2e@test.com",
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:22

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--8e25e-hould-remove-role-from-user-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-admin-user-management--8e25e-hould-remove-role-from-user-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  6) [e2e] › tests\e2e\admin-user-management.spec.ts:338:7 › Admin User Management E2E › [P1] Should show validation error for invalid email format 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40

      40 
      41 // Create superadmin user
      42 const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    → 43 superadminUser = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      41 |     // Create superadmin user
      42 |     const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    > 43 |     superadminUser = await prisma.user.create({
         |                                        ^
      44 |       data: {
      45 |         public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      46 |         email: "admin-e2e@test.com",
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:22

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--9d8dd-or-for-invalid-email-format-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-admin-user-management--9d8dd-or-for-invalid-email-format-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  7) [e2e] › tests\e2e\admin-user-management.spec.ts:379:7 › Admin User Management E2E › [P1] Should display properly on mobile screens 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40

      40 
      41 // Create superadmin user
      42 const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    → 43 superadminUser = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      41 |     // Create superadmin user
      42 |     const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    > 43 |     superadminUser = await prisma.user.create({
         |                                        ^
      44 |       data: {
      45 |         public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      46 |         email: "admin-e2e@test.com",
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:22

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--1a56e--properly-on-mobile-screens-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-admin-user-management--1a56e--properly-on-mobile-screens-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  8) [e2e] › tests\e2e\admin-user-management.spec.ts:410:7 › Admin User Management E2E › [P1] Should display role assignment dialog properly on mobile 

    TimeoutError: locator.click: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('button[data-testid="assign-role-button"]')[22m


      417 |       'button[data-testid="assign-role-button"]',
      418 |     );
    > 419 |     await assignRoleButton.click();
          |                            ^
      420 |
      421 |     const dialog = page.locator('[role="dialog"]');
      422 |     await expect(dialog).toBeVisible({ timeout: 5000 });
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:419:28

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\admin-user-management.spec.ts:91:31

      88 await prisma.userRole.deleteMany({
      89   where: { user_id: testUser.user_id },
      90 });
    → 91 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      89 |         where: { user_id: testUser.user_id },
      90 |       });
    > 91 |       await prisma.user.delete({
         |                               ^
      92 |         where: { user_id: testUser.user_id },
      93 |       });
      94 |     }
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:91:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:91:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--7ab51-t-dialog-properly-on-mobile-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--7ab51-t-dialog-properly-on-mobile-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-admin-user-management--7ab51-t-dialog-properly-on-mobile-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--7ab51-t-dialog-properly-on-mobile-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-admin-user-management--7ab51-t-dialog-properly-on-mobile-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  9) [e2e] › tests\e2e\admin-user-management.spec.ts:437:7 › Admin User Management E2E › [P0] Should search users by name or email 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('input[data-testid="users-search-input"]')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('input[data-testid="users-search-input"]')[22m


      439 |
      440 |     const searchInput = page.locator('input[data-testid="users-search-input"]');
    > 441 |     await expect(searchInput).toBeVisible({ timeout: 10000 });
          |                               ^
      442 |     await searchInput.fill(testUser.email);
      443 |
      444 |     await page.waitForTimeout(500); // Wait for debounced search
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:441:31

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--7e7d5-arch-users-by-name-or-email-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--7e7d5-arch-users-by-name-or-email-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-admin-user-management--7e7d5-arch-users-by-name-or-email-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--7e7d5-arch-users-by-name-or-email-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-admin-user-management--7e7d5-arch-users-by-name-or-email-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  10) [e2e] › tests\e2e\admin-user-management.spec.ts:456:7 › Admin User Management E2E › [P1] Should filter users by status 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40

      40 
      41 // Create superadmin user
      42 const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    → 43 superadminUser = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      41 |     // Create superadmin user
      42 |     const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    > 43 |     superadminUser = await prisma.user.create({
         |                                        ^
      44 |       data: {
      45 |         public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      46 |         email: "admin-e2e@test.com",
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:40
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\admin-user-management.spec.ts:43:22

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-admin-user-management--f0463-ould-filter-users-by-status-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-admin-user-management--f0463-ould-filter-users-by-status-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  11) [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:57:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-001: should display dashboard layout with sidebar navigation when user is authenticated 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('[data-testid="dashboard-layout"]')
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('[data-testid="dashboard-layout"]')[22m


      82 |     await expect(
      83 |       page.locator('[data-testid="dashboard-layout"]'),
    > 84 |     ).toBeVisible();
         |       ^
      85 |
      86 |     // AND: Sidebar navigation is visible
      87 |     await expect(
        at c:\bmad\tests\e2e\basic-ui-layout-and-navigation.spec.ts:84:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-83a8f--when-user-is-authenticated-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-83a8f--when-user-is-authenticated-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-basic-ui-layout-and-na-83a8f--when-user-is-authenticated-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-83a8f--when-user-is-authenticated-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-basic-ui-layout-and-na-83a8f--when-user-is-authenticated-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  12) [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:97:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-002: should display header with user info and logout when user is authenticated 

    TimeoutError: page.waitForResponse: Timeout 15000ms exceeded while waiting for event "response"

      120 |     // WHEN: User accesses the application
      121 |     // Network-first: Wait for auth check response before asserting
    > 122 |     const authResponsePromise = page.waitForResponse(
          |                                      ^
      123 |       (resp: Response) =>
      124 |         resp.url().includes("/api/auth/me") && resp.status() === 200,
      125 |     );
        at c:\bmad\tests\e2e\basic-ui-layout-and-navigation.spec.ts:122:38

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-448f5--when-user-is-authenticated-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-448f5--when-user-is-authenticated-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-basic-ui-layout-and-na-448f5--when-user-is-authenticated-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-448f5--when-user-is-authenticated-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-basic-ui-layout-and-na-448f5--when-user-is-authenticated-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  13) [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:160:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-003: should route correctly when navigation links are clicked 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('[data-testid="dashboard-layout"]')
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('[data-testid="dashboard-layout"]')[22m


      181 |     await expect(
      182 |       page.locator('[data-testid="dashboard-layout"]'),
    > 183 |     ).toBeVisible();
          |       ^
      184 |
      185 |     // WHEN: User clicks a navigation link (companies link)
      186 |     const navLink = page.locator('[data-testid="nav-link-companies"]');
        at c:\bmad\tests\e2e\basic-ui-layout-and-navigation.spec.ts:183:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-3d7fa-avigation-links-are-clicked-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-3d7fa-avigation-links-are-clicked-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-basic-ui-layout-and-na-3d7fa-avigation-links-are-clicked-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-3d7fa-avigation-links-are-clicked-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-basic-ui-layout-and-na-3d7fa-avigation-links-are-clicked-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  14) [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:197:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-004: should handle logout functionality correctly 

    TimeoutError: page.waitForResponse: Timeout 15000ms exceeded while waiting for event "response"

      229 |
      230 |     // Network-first: Wait for auth check response
    > 231 |     const authResponsePromise = page.waitForResponse(
          |                                      ^
      232 |       (resp: Response) =>
      233 |         resp.url().includes("/api/auth/me") && resp.status() === 200,
      234 |     );
        at c:\bmad\tests\e2e\basic-ui-layout-and-navigation.spec.ts:231:38

    TimeoutError: page.waitForResponse: Timeout 15000ms exceeded while waiting for event "response"

      233 |         resp.url().includes("/api/auth/me") && resp.status() === 200,
      234 |     );
    > 235 |     const logoutResponsePromise = page.waitForResponse(
          |                                        ^
      236 |       (resp: Response) =>
      237 |         resp.url().includes("/api/auth/logout") && resp.status() === 200,
      238 |     );
        at c:\bmad\tests\e2e\basic-ui-layout-and-navigation.spec.ts:235:40

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-a48ea-out-functionality-correctly-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-a48ea-out-functionality-correctly-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-basic-ui-layout-and-na-a48ea-out-functionality-correctly-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-a48ea-out-functionality-correctly-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-basic-ui-layout-and-na-a48ea-out-functionality-correctly-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  15) [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:278:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-005: should display responsive sidebar (collapsible on mobile) 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('[data-testid="sidebar-toggle"]')
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('[data-testid="sidebar-toggle"]')[22m


      309 |
      310 |     // AND: Sidebar toggle button is visible
    > 311 |     await expect(page.locator('[data-testid="sidebar-toggle"]')).toBeVisible();
          |                                                                  ^
      312 |   });
      313 |
      314 |   test("[P0] 1.8-E2E-001-006: should apply design system colors correctly", async ({
        at c:\bmad\tests\e2e\basic-ui-layout-and-navigation.spec.ts:311:66

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-49338-ebar-collapsible-on-mobile--e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-49338-ebar-collapsible-on-mobile--e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-basic-ui-layout-and-na-49338-ebar-collapsible-on-mobile--e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-49338-ebar-collapsible-on-mobile--e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-basic-ui-layout-and-na-49338-ebar-collapsible-on-mobile--e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  16) [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:314:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-006: should apply design system colors correctly 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('[data-testid="sidebar-navigation"] a').first()
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('[data-testid="sidebar-navigation"] a').first()[22m


      341 |
      342 |     // Deterministic assertion: nav link must be visible
    > 343 |     await expect(activeNavLink).toBeVisible();
          |                                 ^
      344 |
      345 |     const backgroundColor = await activeNavLink.evaluate((el: Element) => {
      346 |       return window.getComputedStyle(el).backgroundColor;
        at c:\bmad\tests\e2e\basic-ui-layout-and-navigation.spec.ts:343:33

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-6939d-ign-system-colors-correctly-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-6939d-ign-system-colors-correctly-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-basic-ui-layout-and-na-6939d-ign-system-colors-correctly-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-6939d-ign-system-colors-correctly-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-basic-ui-layout-and-na-6939d-ign-system-colors-correctly-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  17) [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:413:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-009: should use (dashboard) route group layout for dashboard pages 

    TimeoutError: page.waitForResponse: Timeout 15000ms exceeded while waiting for event "response"

      436 |     // WHEN: User accesses dashboard page
      437 |     // Network-first: Wait for auth check response
    > 438 |     const authResponsePromise = page.waitForResponse(
          |                                      ^
      439 |       (resp: Response) =>
      440 |         resp.url().includes("/api/auth/me") && resp.status() === 200,
      441 |     );
        at c:\bmad\tests\e2e\basic-ui-layout-and-navigation.spec.ts:438:38

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-5cfbb--layout-for-dashboard-pages-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-5cfbb--layout-for-dashboard-pages-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-basic-ui-layout-and-na-5cfbb--layout-for-dashboard-pages-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-5cfbb--layout-for-dashboard-pages-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-basic-ui-layout-and-na-5cfbb--layout-for-dashboard-pages-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  18) [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:461:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-010: should display user menu dropdown with profile and logout options 

    TimeoutError: page.waitForResponse: Timeout 15000ms exceeded while waiting for event "response"

      483 |
      484 |     // Network-first: Wait for auth check response
    > 485 |     const authResponsePromise = page.waitForResponse(
          |                                      ^
      486 |       (resp: Response) =>
      487 |         resp.url().includes("/api/auth/me") && resp.status() === 200,
      488 |     );
        at c:\bmad\tests\e2e\basic-ui-layout-and-navigation.spec.ts:485:38

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-ddfeb--profile-and-logout-options-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-ddfeb--profile-and-logout-options-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-basic-ui-layout-and-na-ddfeb--profile-and-logout-options-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-basic-ui-layout-and-na-ddfeb--profile-and-logout-options-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-basic-ui-layout-and-na-ddfeb--profile-and-logout-options-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  19) [e2e] › tests\e2e\client-companies-modal.spec.ts:286:7 › Client Companies Modal E2E › [P0] Should display company count on client detail page 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('[data-testid="client-companies-list"]')
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('[data-testid="client-companies-list"]')[22m


      296 |       '[data-testid="client-companies-list"]',
      297 |     );
    > 298 |     await expect(companiesButton).toBeVisible();
          |                                   ^
      299 |     await expect(companiesButton).toContainText("2 companies");
      300 |   });
      301 |
        at c:\bmad\tests\e2e\client-companies-modal.spec.ts:298:35

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-companies-modal-ce299-count-on-client-detail-page-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-companies-modal-ce299-count-on-client-detail-page-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-companies-modal-ce299-count-on-client-detail-page-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-companies-modal-ce299-count-on-client-detail-page-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-companies-modal-ce299-count-on-client-detail-page-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  20) [e2e] › tests\e2e\client-form-email-password.spec.ts:178:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should show validation error for invalid email format 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=Invalid email address')
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('text=Invalid email address')[22m


      185 |
      186 |       // THEN: Validation error is displayed
    > 187 |       await expect(page.locator("text=Invalid email address")).toBeVisible();
          |                                                                ^
      188 |     });
      189 |
      190 |     test("[P0] Should show validation error for short password", async ({
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:187:64

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-e7419-or-for-invalid-email-format-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-e7419-or-for-invalid-email-format-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-form-email-pass-e7419-or-for-invalid-email-format-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-e7419-or-for-invalid-email-format-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-e7419-or-for-invalid-email-format-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  21) [e2e] › tests\e2e\client-form-email-password.spec.ts:226:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should allow submission when passwords match 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=Client created successfully')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('text=Client created successfully')[22m


      249 |       await expect(
      250 |         page.locator("text=Client created successfully"),
    > 251 |       ).toBeVisible({ timeout: 10000 });
          |         ^
      252 |     });
      253 |
      254 |     test("[P0] Should successfully create client with email and password", async ({
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:251:9

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-a54d6-ission-when-passwords-match-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-a54d6-ission-when-passwords-match-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-form-email-pass-a54d6-ission-when-passwords-match-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-a54d6-ission-when-passwords-match-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-a54d6-ission-when-passwords-match-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  22) [e2e] › tests\e2e\client-form-email-password.spec.ts:254:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should successfully create client with email and password 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=Client created successfully')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('text=Client created successfully')[22m


      274 |       await expect(
      275 |         page.locator("text=Client created successfully"),
    > 276 |       ).toBeVisible({ timeout: 10000 });
          |         ^
      277 |
      278 |       // AND: Form is reset for next entry
      279 |       await expect(
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:276:9

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-35323-ent-with-email-and-password-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-35323-ent-with-email-and-password-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-form-email-pass-35323-ent-with-email-and-password-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-35323-ent-with-email-and-password-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-35323-ent-with-email-and-password-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  23) [e2e] › tests\e2e\client-form-email-password.spec.ts:293:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should successfully create client with email but no password 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=Client created successfully')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('text=Client created successfully')[22m


      309 |       await expect(
      310 |         page.locator("text=Client created successfully"),
    > 311 |       ).toBeVisible({ timeout: 10000 });
          |         ^
      312 |     });
      313 |   });
      314 |
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:311:9

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9cae1--with-email-but-no-password-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9cae1--with-email-but-no-password-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-form-email-pass-9cae1--with-email-but-no-password-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9cae1--with-email-but-no-password-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-9cae1--with-email-but-no-password-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  24) [e2e] › tests\e2e\client-form-email-password.spec.ts:386:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should pre-fill email field when editing client 

    TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="client-email-input"]') to be visible[22m


      389 |       // WHEN: Navigating to edit page
      390 |       await page.goto(`http://localhost:3000/clients/${testClient.public_id}`);
    > 391 |       await page.waitForSelector('[data-testid="client-email-input"]');
          |                  ^
      392 |
      393 |       // THEN: Email field is pre-filled
      394 |       const emailInput = page.locator('[data-testid="client-email-input"]');
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:391:18

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-6bf4f-l-field-when-editing-client-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-6bf4f-l-field-when-editing-client-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-form-email-pass-6bf4f-l-field-when-editing-client-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-6bf4f-l-field-when-editing-client-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-6bf4f-l-field-when-editing-client-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  25) [e2e] › tests\e2e\client-form-email-password.spec.ts:398:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should show password placeholder indicating optional update 

    TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="client-password-input"]') to be visible[22m


      401 |       // WHEN: Navigating to edit page
      402 |       await page.goto(`http://localhost:3000/clients/${testClient.public_id}`);
    > 403 |       await page.waitForSelector('[data-testid="client-password-input"]');
          |                  ^
      404 |
      405 |       // THEN: Password field shows dots placeholder
      406 |       const passwordInput = page.locator(
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:403:18

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-1be8a--indicating-optional-update-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-1be8a--indicating-optional-update-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-form-email-pass-1be8a--indicating-optional-update-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-1be8a--indicating-optional-update-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-1be8a--indicating-optional-update-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  26) [e2e] › tests\e2e\client-form-email-password.spec.ts:431:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should successfully update client email 

    TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="client-email-input"]') to be visible[22m


      432 |       // WHEN: Updating email
      433 |       await page.goto(`http://localhost:3000/clients/${testClient.public_id}`);
    > 434 |       await page.waitForSelector('[data-testid="client-email-input"]');
          |                  ^
      435 |
      436 |       await page.fill(
      437 |         '[data-testid="client-email-input"]',
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:434:18

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9c6e6-ssfully-update-client-email-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9c6e6-ssfully-update-client-email-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-form-email-pass-9c6e6-ssfully-update-client-email-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9c6e6-ssfully-update-client-email-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-9c6e6-ssfully-update-client-email-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  27) [e2e] › tests\e2e\client-form-email-password.spec.ts:454:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should successfully update client password 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:321:38

      318 const passwordHash = await bcrypt.hash("password123", 10);
      319 
      320 // Create User record with password
    → 321 const user = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      319 |
      320 |       // Create User record with password
    > 321 |       const user = await prisma.user.create({
          |                                      ^
      322 |         data: {
      323 |           public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      324 |           email: "existing@example.com",
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:321:38
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:321:20

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9227e-ully-update-client-password-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9227e-ully-update-client-password-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-form-email-pass-9227e-ully-update-client-password-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9227e-ully-update-client-password-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-9227e-ully-update-client-password-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  28) [e2e] › tests\e2e\client-form-email-password.spec.ts:486:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should show validation error when updating password with mismatched confirmation 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:42:40

      39 // Create superadmin user for testing
      40 const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
      41 
    → 42 superadminUser = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      40 |     const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
      41 |
    > 42 |     superadminUser = await prisma.user.create({
         |                                        ^
      43 |       data: {
      44 |         public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      45 |         email: "superadmin-client-form@test.com",
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:42:40
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:42:22

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-d9d69-ith-mismatched-confirmation-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-d9d69-ith-mismatched-confirmation-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  29) [e2e] › tests\e2e\client-form-email-password.spec.ts:549:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should show validation error for short password on update 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:321:38

      318 const passwordHash = await bcrypt.hash("password123", 10);
      319 
      320 // Create User record with password
    → 321 const user = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      319 |
      320 |       // Create User record with password
    > 321 |       const user = await prisma.user.create({
          |                                      ^
      322 |         data: {
      323 |           public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      324 |           email: "existing@example.com",
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:321:38
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:321:20

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-1cb05-or-short-password-on-update-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-1cb05-or-short-password-on-update-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-form-email-pass-1cb05-or-short-password-on-update-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-1cb05-or-short-password-on-update-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-1cb05-or-short-password-on-update-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  30) [e2e] › tests\e2e\client-form-email-password.spec.ts:567:9 › Client Form Email and Password E2E › Field Accessibility › [P0] Email and password fields should have proper labels and descriptions 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('label:has-text("Password")')
    Expected: visible
    Error: strict mode violation: locator('label:has-text("Password")') resolved to 2 elements:
        1) <label for=":r9:-form-item" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Password </label> aka getByText('Password', { exact: true })
        2) <label for=":ra:-form-item" class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70">Confirm Password </label> aka getByText('Confirm Password')

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('label:has-text("Password")')[22m


      581 |
      582 |       // AND: Password field has label and description
    > 583 |       await expect(page.locator('label:has-text("Password")')).toBeVisible();
          |                                                                ^
      584 |       await expect(
      585 |         page.locator(
      586 |           "text=Password for the client (optional, min 8 characters if provided)",
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:583:64

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9bdc1-per-labels-and-descriptions-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9bdc1-per-labels-and-descriptions-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-form-email-pass-9bdc1-per-labels-and-descriptions-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-9bdc1-per-labels-and-descriptions-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-9bdc1-per-labels-and-descriptions-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  31) [e2e] › tests\e2e\client-form-email-password.spec.ts:593:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should toggle password visibility when eye icon is clicked 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-8c3b5-ty-when-eye-icon-is-clicked-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-8c3b5-ty-when-eye-icon-is-clicked-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  32) [e2e] › tests\e2e\client-form-email-password.spec.ts:723:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should have accessible toggle buttons with proper ARIA labels 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-21e5c-ons-with-proper-ARIA-labels-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-21e5c-ons-with-proper-ARIA-labels-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  33) [e2e] › tests\e2e\client-form-email-password.spec.ts:801:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should work on edit form as well 

    TimeoutError: page.waitForSelector: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="client-password-input"]') to be visible[22m


      846 |           `http://localhost:3000/clients/${editTestClient.public_id}`,
      847 |         );
    > 848 |         await page.waitForSelector('[data-testid="client-password-input"]');
          |                    ^
      849 |
      850 |         const passwordInput = page.locator(
      851 |           '[data-testid="client-password-input"]',
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:848:20

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31

      103 await prisma.userRole.deleteMany({
      104   where: { user_id: superadminUser.user_id },
      105 });
    → 106 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      104 |         where: { user_id: superadminUser.user_id },
      105 |       });
    > 106 |       await prisma.user.delete({
          |                               ^
      107 |         where: { user_id: superadminUser.user_id },
      108 |       });
      109 |     }
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-form-email-password.spec.ts:106:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-b6a0b-d-work-on-edit-form-as-well-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-b6a0b-d-work-on-edit-form-as-well-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-form-email-pass-b6a0b-d-work-on-edit-form-as-well-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-form-email-pass-b6a0b-d-work-on-edit-form-as-well-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-form-email-pass-b6a0b-d-work-on-edit-form-as-well-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  34) [e2e] › tests\e2e\client-management.spec.ts:116:7 › Client Management E2E › [P0] Should navigate to client detail page from clients list 

    Error: [2mexpect([22m[31mpage[39m[2m).[22mtoHaveURL[2m([22m[32mexpected[39m[2m)[22m failed

    Expected pattern: [32m/\/clients\/clt_s8yhekc60h9ezi5ez6kg7j7h/[39m
    Received string:  [31m"http://localhost:3000/clients"[39m
    Timeout: 30000ms

    Call log:
    [2m  - Expect "toHaveURL" with timeout 30000ms[22m
    [2m    33 × unexpected value "http://localhost:3000/clients"[22m


      128 |
      129 |     // THEN: I am redirected to the client detail page using public_id
    > 130 |     await expect(page).toHaveURL(
          |                        ^
      131 |       new RegExp(`/clients/${testClient.public_id}`),
      132 |     );
      133 |     await expect(
        at c:\bmad\tests\e2e\client-management.spec.ts:130:24

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-696cb-tail-page-from-clients-list-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-696cb-tail-page-from-clients-list-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-696cb-tail-page-from-clients-list-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-696cb-tail-page-from-clients-list-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-696cb-tail-page-from-clients-list-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  35) [e2e] › tests\e2e\client-management.spec.ts:138:7 › Client Management E2E › [P0] Should successfully edit client name and status with confirmation 

    TimeoutError: page.waitForURL: Timeout 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/dashboard" until "load"
      navigated to "http://localhost:3000/dashboard"
      "domcontentloaded" event fired
    ============================================================

      100 |
      101 |     // Wait for redirect to dashboard
    > 102 |     await page.waitForURL("**/dashboard");
          |                ^
      103 |   });
      104 |
      105 |   test("[P0] Should load clients list page", async ({ page }) => {
        at c:\bmad\tests\e2e\client-management.spec.ts:102:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-54934-nd-status-with-confirmation-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-54934-nd-status-with-confirmation-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-54934-nd-status-with-confirmation-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-54934-nd-status-with-confirmation-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-54934-nd-status-with-confirmation-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  36) [e2e] › tests\e2e\client-management.spec.ts:198:7 › Client Management E2E › [P0] Should successfully edit client metadata and stay on page 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('textarea[data-testid="client-metadata-textarea"]')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('textarea[data-testid="client-metadata-textarea"]')[22m


      206 |       'textarea[data-testid="client-metadata-textarea"]',
      207 |     );
    > 208 |     await expect(metadataTextarea).toBeVisible({ timeout: 10000 });
          |                                    ^
      209 |
      210 |     const newMetadata = JSON.stringify({ test: true, updated: true }, null, 2);
      211 |     await metadataTextarea.clear();
        at c:\bmad\tests\e2e\client-management.spec.ts:208:36

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-843f3-t-metadata-and-stay-on-page-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-843f3-t-metadata-and-stay-on-page-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-843f3-t-metadata-and-stay-on-page-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-843f3-t-metadata-and-stay-on-page-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-843f3-t-metadata-and-stay-on-page-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  37) [e2e] › tests\e2e\client-management.spec.ts:244:7 › Client Management E2E › [P1] Should show validation error for empty client name 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('input[data-testid="client-name-input"]')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('input[data-testid="client-name-input"]')[22m


      250 |     // WHEN: I clear the client name and submit
      251 |     const nameInput = page.locator('input[data-testid="client-name-input"]');
    > 252 |     await expect(nameInput).toBeVisible({ timeout: 10000 });
          |                             ^
      253 |     await nameInput.clear();
      254 |
      255 |     const submitButton = page.locator(
        at c:\bmad\tests\e2e\client-management.spec.ts:252:29

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-99ff8-error-for-empty-client-name-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-99ff8-error-for-empty-client-name-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-99ff8-error-for-empty-client-name-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-99ff8-error-for-empty-client-name-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-99ff8-error-for-empty-client-name-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  38) [e2e] › tests\e2e\client-management.spec.ts:266:7 › Client Management E2E › [P1] Should show validation error for invalid JSON metadata 

    TimeoutError: page.waitForURL: Timeout 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/dashboard" until "load"
      navigated to "http://localhost:3000/dashboard"
      "domcontentloaded" event fired
    ============================================================

      100 |
      101 |     // Wait for redirect to dashboard
    > 102 |     await page.waitForURL("**/dashboard");
          |                ^
      103 |   });
      104 |
      105 |   test("[P0] Should load clients list page", async ({ page }) => {
        at c:\bmad\tests\e2e\client-management.spec.ts:102:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-da860-r-for-invalid-JSON-metadata-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-da860-r-for-invalid-JSON-metadata-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-da860-r-for-invalid-JSON-metadata-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-da860-r-for-invalid-JSON-metadata-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-da860-r-for-invalid-JSON-metadata-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  39) [e2e] › tests\e2e\client-management.spec.ts:290:7 › Client Management E2E › [P0] Should create a new client 

    Error: locator.click: Error: strict mode violation: locator('div[role="option"]:has-text("Active")') resolved to 2 elements:
        1) <div role="option" tabindex="-1" data-highlighted="" aria-selected="true" data-state="checked" aria-labelledby="radix-:rn:" data-radix-collection-item="" class="relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50">…</div> aka getByRole('option', { name: 'Active', exact: true })
        2) <div role="option" tabindex="-1" aria-selected="false" data-state="unchecked" aria-labelledby="radix-:ro:" data-radix-collection-item="" class="relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50">…</div> aka getByRole('option', { name: 'Inactive' })

    Call log:
    [2m  - waiting for locator('div[role="option"]:has-text("Active")')[22m


      309 |     );
      310 |     await statusSelect.click();
    > 311 |     await page.locator('div[role="option"]:has-text("Active")').click();
          |                                                                 ^
      312 |
      313 |     // AND: I submit the form
      314 |     await page.locator('button[data-testid="client-submit-button"]').click();
        at c:\bmad\tests\e2e\client-management.spec.ts:311:65

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2db02--Should-create-a-new-client-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2db02--Should-create-a-new-client-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-2db02--Should-create-a-new-client-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2db02--Should-create-a-new-client-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-2db02--Should-create-a-new-client-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  40) [e2e] › tests\e2e\client-management.spec.ts:333:7 › Client Management E2E › [P1] Should cancel client edit without saving changes 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('input[data-testid="client-name-input"]')
    Expected: visible
    Timeout: 10000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for locator('input[data-testid="client-name-input"]')[22m


      340 |     const originalName = testClient.name;
      341 |     const nameInput = page.locator('input[data-testid="client-name-input"]');
    > 342 |     await expect(nameInput).toBeVisible({ timeout: 10000 });
          |                             ^
      343 |     await nameInput.clear();
      344 |     await nameInput.fill("This Should Not Be Saved");
      345 |
        at c:\bmad\tests\e2e\client-management.spec.ts:342:29

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-b3f68-edit-without-saving-changes-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-b3f68-edit-without-saving-changes-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-b3f68-edit-without-saving-changes-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-b3f68-edit-without-saving-changes-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-b3f68-edit-without-saving-changes-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  41) [e2e] › tests\e2e\client-management.spec.ts:359:7 › Client Management E2E › [P0] Should prevent deletion of ACTIVE client 

    TimeoutError: page.waitForURL: Timeout 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/dashboard" until "load"
      navigated to "http://localhost:3000/dashboard"
      "domcontentloaded" event fired
    ============================================================

      100 |
      101 |     // Wait for redirect to dashboard
    > 102 |     await page.waitForURL("**/dashboard");
          |                ^
      103 |   });
      104 |
      105 |   test("[P0] Should load clients list page", async ({ page }) => {
        at c:\bmad\tests\e2e\client-management.spec.ts:102:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2f6d4-t-deletion-of-ACTIVE-client-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2f6d4-t-deletion-of-ACTIVE-client-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-2f6d4-t-deletion-of-ACTIVE-client-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2f6d4-t-deletion-of-ACTIVE-client-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-2f6d4-t-deletion-of-ACTIVE-client-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  42) [e2e] › tests\e2e\client-management.spec.ts:377:7 › Client Management E2E › [P1] Should display delete dialog properly on mobile screens 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('[data-testid="client-edit-button"]')
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('[data-testid="client-edit-button"]')[22m


      391 |       '[data-testid="client-edit-button"]',
      392 |     );
    > 393 |     await expect(clientEditSection).toBeVisible();
          |                                     ^
      394 |
      395 |     // AND: If we trigger the delete dialog (even if disabled), it should fit on screen
      396 |     // Note: We're just checking the dialog component is properly sized, not testing the full delete flow
        at c:\bmad\tests\e2e\client-management.spec.ts:393:37

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-9a14a--properly-on-mobile-screens-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-9a14a--properly-on-mobile-screens-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-9a14a--properly-on-mobile-screens-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-9a14a--properly-on-mobile-screens-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-9a14a--properly-on-mobile-screens-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  43) [e2e] › tests\e2e\client-management.spec.ts:401:7 › Client Management E2E › [P1] Should successfully delete INACTIVE client with text confirmation 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeEnabled[2m([22m[2m)[22m failed

    Locator: locator('button[data-testid="client-delete-button"]')
    Expected: enabled
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeEnabled" with timeout 30000ms[22m
    [2m  - waiting for locator('button[data-testid="client-delete-button"]')[22m


      420 |       'button[data-testid="client-delete-button"]',
      421 |     );
    > 422 |     await expect(deleteButton).toBeEnabled();
          |                                ^
      423 |     await deleteButton.click();
      424 |
      425 |     // THEN: Delete confirmation dialog appears
        at c:\bmad\tests\e2e\client-management.spec.ts:422:32

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2ce50-ient-with-text-confirmation-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2ce50-ient-with-text-confirmation-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-2ce50-ient-with-text-confirmation-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2ce50-ient-with-text-confirmation-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-2ce50-ient-with-text-confirmation-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  44) [e2e] › tests\e2e\client-management.spec.ts:458:7 › Client Management E2E › [P0] Should use public_id in URL when navigating to client detail 

    TimeoutError: page.waitForURL: Timeout 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/dashboard" until "load"
      navigated to "http://localhost:3000/dashboard"
    ============================================================

      100 |
      101 |     // Wait for redirect to dashboard
    > 102 |     await page.waitForURL("**/dashboard");
          |                ^
      103 |   });
      104 |
      105 |   test("[P0] Should load clients list page", async ({ page }) => {
        at c:\bmad\tests\e2e\client-management.spec.ts:102:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-a0c17-navigating-to-client-detail-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-a0c17-navigating-to-client-detail-e2e\error-context.md

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-a0c17-navigating-to-client-detail-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-a0c17-navigating-to-client-detail-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  45) [e2e] › tests\e2e\client-management.spec.ts:482:7 › Client Management E2E › [P0] Should support direct navigation via public_id URL 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('h2').filter({ hasText: /edit client/i })
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('h2').filter({ hasText: /edit client/i })[22m


      489 |     await expect(
      490 |       page.locator("h2").filter({ hasText: /edit client/i }),
    > 491 |     ).toBeVisible();
          |       ^
      492 |
      493 |     // AND: URL remains with public_id
      494 |     await expect(page).toHaveURL(
        at c:\bmad\tests\e2e\client-management.spec.ts:491:7

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-cbf61-avigation-via-public-id-URL-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-cbf61-avigation-via-public-id-URL-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-cbf61-avigation-via-public-id-URL-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-cbf61-avigation-via-public-id-URL-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-cbf61-avigation-via-public-id-URL-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  46) [e2e] › tests\e2e\client-management.spec.ts:503:7 › Client Management E2E › [P0] Should support backward compatibility with UUID URLs 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('h2').filter({ hasText: /edit client/i })
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('h2').filter({ hasText: /edit client/i })[22m


      510 |     await expect(
      511 |       page.locator("h2").filter({ hasText: /edit client/i }),
    > 512 |     ).toBeVisible();
          |       ^
      513 |
      514 |     // AND: Client data is displayed correctly
      515 |     const nameInput = page.locator('input[data-testid="client-name-input"]');
        at c:\bmad\tests\e2e\client-management.spec.ts:512:7

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-aa3a6-ompatibility-with-UUID-URLs-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-aa3a6-ompatibility-with-UUID-URLs-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-aa3a6-ompatibility-with-UUID-URLs-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-aa3a6-ompatibility-with-UUID-URLs-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-aa3a6-ompatibility-with-UUID-URLs-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  47) [e2e] › tests\e2e\client-management.spec.ts:519:7 › Client Management E2E › [P1] Should show error for invalid public_id format 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      94 |   test.beforeEach(async ({ page }) => {
      95 |     // Login before each test
    > 96 |     await page.goto("http://localhost:3000/login");
         |                ^
      97 |     await page.fill('input[type="email"]', "superadmin-client-e2e@test.com");
      98 |     await page.fill('input[type="password"]', "TestPassword123!");
      99 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\client-management.spec.ts:96:16

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-f7260-or-invalid-public-id-format-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-f7260-or-invalid-public-id-format-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-f7260-or-invalid-public-id-format-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-f7260-or-invalid-public-id-format-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  48) [e2e] › tests\e2e\client-management.spec.ts:536:7 › Client Management E2E › [P1] Should not expose UUID in visible page content 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('h2').filter({ hasText: /edit client/i })
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('h2').filter({ hasText: /edit client/i })[22m


      543 |     await expect(
      544 |       page.locator("h2").filter({ hasText: /edit client/i }),
    > 545 |     ).toBeVisible();
          |       ^
      546 |
      547 |     // AND: UUID should not appear in visible text content
      548 |     const visibleText = await page.textContent("body");
        at c:\bmad\tests\e2e\client-management.spec.ts:545:7

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-a53f3-UID-in-visible-page-content-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-a53f3-UID-in-visible-page-content-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-a53f3-UID-in-visible-page-content-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-a53f3-UID-in-visible-page-content-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-a53f3-UID-in-visible-page-content-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  49) [e2e] › tests\e2e\client-management.spec.ts:563:7 › Client Management E2E › [P0] Should display quick action buttons on client list 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      94 |   test.beforeEach(async ({ page }) => {
      95 |     // Login before each test
    > 96 |     await page.goto("http://localhost:3000/login");
         |                ^
      97 |     await page.fill('input[type="email"]', "superadmin-client-e2e@test.com");
      98 |     await page.fill('input[type="password"]', "TestPassword123!");
      99 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\client-management.spec.ts:96:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-88bdf-tion-buttons-on-client-list-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-88bdf-tion-buttons-on-client-list-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-88bdf-tion-buttons-on-client-list-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-88bdf-tion-buttons-on-client-list-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-88bdf-tion-buttons-on-client-list-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  50) [e2e] › tests\e2e\client-management.spec.ts:589:7 › Client Management E2E › [P0] Should activate client from list with confirmation dialog 

    TimeoutError: page.waitForURL: Timeout 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/dashboard" until "load"
      navigated to "http://localhost:3000/dashboard"
    ============================================================

      100 |
      101 |     // Wait for redirect to dashboard
    > 102 |     await page.waitForURL("**/dashboard");
          |                ^
      103 |   });
      104 |
      105 |   test("[P0] Should load clients list page", async ({ page }) => {
        at c:\bmad\tests\e2e\client-management.spec.ts:102:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-79c72-st-with-confirmation-dialog-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-79c72-st-with-confirmation-dialog-e2e\error-context.md

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-79c72-st-with-confirmation-dialog-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-79c72-st-with-confirmation-dialog-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  51) [e2e] › tests\e2e\client-management.spec.ts:640:7 › Client Management E2E › [P0] Should deactivate client from list with confirmation dialog 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: getByText(/deactivated successfully/i)
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for getByText(/deactivated successfully/i)[22m


      673 |
      674 |     // THEN: Success toast appears
    > 675 |     await expect(page.getByText(/deactivated successfully/i)).toBeVisible({
          |                                                               ^
      676 |       timeout: 5000,
      677 |     });
      678 |
        at c:\bmad\tests\e2e\client-management.spec.ts:675:63

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-c7c5b-st-with-confirmation-dialog-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-c7c5b-st-with-confirmation-dialog-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-c7c5b-st-with-confirmation-dialog-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-c7c5b-st-with-confirmation-dialog-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-c7c5b-st-with-confirmation-dialog-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  52) [e2e] › tests\e2e\client-management.spec.ts:691:7 › Client Management E2E › [P0] Should delete client from list with text input confirmation 

    TimeoutError: page.waitForURL: Timeout 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/dashboard" until "load"
      navigated to "http://localhost:3000/dashboard"
      "domcontentloaded" event fired
    ============================================================

      100 |
      101 |     // Wait for redirect to dashboard
    > 102 |     await page.waitForURL("**/dashboard");
          |                ^
      103 |   });
      104 |
      105 |   test("[P0] Should load clients list page", async ({ page }) => {
        at c:\bmad\tests\e2e\client-management.spec.ts:102:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2ff1a-ith-text-input-confirmation-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2ff1a-ith-text-input-confirmation-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-2ff1a-ith-text-input-confirmation-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-2ff1a-ith-text-input-confirmation-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-2ff1a-ith-text-input-confirmation-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  53) [e2e] › tests\e2e\client-management.spec.ts:749:7 › Client Management E2E › [P0] Should prevent deleting ACTIVE client from list 

    TimeoutError: page.waitForURL: Timeout 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/dashboard" until "load"
      navigated to "http://localhost:3000/dashboard"
      "domcontentloaded" event fired
    ============================================================

      100 |
      101 |     // Wait for redirect to dashboard
    > 102 |     await page.waitForURL("**/dashboard");
          |                ^
      103 |   });
      104 |
      105 |   test("[P0] Should load clients list page", async ({ page }) => {
        at c:\bmad\tests\e2e\client-management.spec.ts:102:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-faa43-ing-ACTIVE-client-from-list-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-faa43-ing-ACTIVE-client-from-list-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-faa43-ing-ACTIVE-client-from-list-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-faa43-ing-ACTIVE-client-from-list-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  54) [e2e] › tests\e2e\client-management.spec.ts:802:7 › Client Management E2E › [P0] Should cancel status change when clicking cancel in dialog 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      94 |   test.beforeEach(async ({ page }) => {
      95 |     // Login before each test
    > 96 |     await page.goto("http://localhost:3000/login");
         |                ^
      97 |     await page.fill('input[type="email"]', "superadmin-client-e2e@test.com");
      98 |     await page.fill('input[type="password"]', "TestPassword123!");
      99 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\client-management.spec.ts:96:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-324b2-n-clicking-cancel-in-dialog-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-324b2-n-clicking-cancel-in-dialog-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-324b2-n-clicking-cancel-in-dialog-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-324b2-n-clicking-cancel-in-dialog-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-324b2-n-clicking-cancel-in-dialog-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  55) [e2e] › tests\e2e\client-management.spec.ts:832:7 › Client Management E2E › [P0] Should stay on edit page after multiple updates 

    TimeoutError: page.waitForURL: Timeout 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/dashboard" until "load"
      navigated to "http://localhost:3000/dashboard"
      "domcontentloaded" event fired
    ============================================================

      100 |
      101 |     // Wait for redirect to dashboard
    > 102 |     await page.waitForURL("**/dashboard");
          |                ^
      103 |   });
      104 |
      105 |   test("[P0] Should load clients list page", async ({ page }) => {
        at c:\bmad\tests\e2e\client-management.spec.ts:102:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\client-management.spec.ts:86:31

      83 await prisma.userRole.deleteMany({
      84   where: { user_id: superadminUser.user_id },
      85 });
    → 86 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      84 |         where: { user_id: superadminUser.user_id },
      85 |       });
    > 86 |       await prisma.user.delete({
         |                               ^
      87 |         where: { user_id: superadminUser.user_id },
      88 |       });
      89 |     }
        at c:\bmad\tests\e2e\client-management.spec.ts:86:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\client-management.spec.ts:86:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-c5f7c-page-after-multiple-updates-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-c5f7c-page-after-multiple-updates-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-client-management-Clie-c5f7c-page-after-multiple-updates-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-c5f7c-page-after-multiple-updates-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-c5f7c-page-after-multiple-updates-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  56) [e2e] › tests\e2e\client-management.spec.ts:876:7 › Client Management E2E › [P1] Should prevent wrong text in delete confirmation 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m
    [2m    - waiting for" http://localhost:3000/login" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/login"[22m


       95 |     // Login before each test
       96 |     await page.goto("http://localhost:3000/login");
    >  97 |     await page.fill('input[type="email"]', "superadmin-client-e2e@test.com");
          |                ^
       98 |     await page.fill('input[type="password"]', "TestPassword123!");
       99 |     await page.click('button[type="submit"]');
      100 |
        at c:\bmad\tests\e2e\client-management.spec.ts:97:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-7248d-text-in-delete-confirmation-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-client-management-Clie-7248d-text-in-delete-confirmation-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-client-management-Clie-7248d-text-in-delete-confirmation-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  57) [e2e] › tests\e2e\company-management.spec.ts:116:7 › Company Management E2E › [P0] Should load companies list page 

    TimeoutError: page.waitForURL: Timeout 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/dashboard" until "load"
      navigated to "http://localhost:3000/dashboard"
      "domcontentloaded" event fired
    ============================================================

      111 |     await page.fill('input[type="password"]', "TestPassword123!");
      112 |     await page.click('button[type="submit"]');
    > 113 |     await page.waitForURL("**/dashboard");
          |                ^
      114 |   });
      115 |
      116 |   test("[P0] Should load companies list page", async ({ page }) => {
        at c:\bmad\tests\e2e\company-management.spec.ts:113:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\company-management.spec.ts:100:31

       97 await prisma.userRole.deleteMany({
       98   where: { user_id: superadminUser.user_id },
       99 });
    → 100 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

       98 |         where: { user_id: superadminUser.user_id },
       99 |       });
    > 100 |       await prisma.user.delete({
          |                               ^
      101 |         where: { user_id: superadminUser.user_id },
      102 |       });
      103 |     }
        at c:\bmad\tests\e2e\company-management.spec.ts:100:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\company-management.spec.ts:100:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-a43e0-ld-load-companies-list-page-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-a43e0-ld-load-companies-list-page-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-a43e0-ld-load-companies-list-page-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-company-management-Com-a43e0-ld-load-companies-list-page-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  58) [e2e] › tests\e2e\company-management.spec.ts:124:7 › Company Management E2E › [P0] Should navigate to company detail page from companies list 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      107 |   test.beforeEach(async ({ page }) => {
      108 |     // Login
    > 109 |     await page.goto("http://localhost:3000/login");
          |                ^
      110 |     await page.fill('input[type="email"]', "company-e2e@test.com");
      111 |     await page.fill('input[type="password"]', "TestPassword123!");
      112 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\company-management.spec.ts:109:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\company-management.spec.ts:100:31

       97 await prisma.userRole.deleteMany({
       98   where: { user_id: superadminUser.user_id },
       99 });
    → 100 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

       98 |         where: { user_id: superadminUser.user_id },
       99 |       });
    > 100 |       await prisma.user.delete({
          |                               ^
      101 |         where: { user_id: superadminUser.user_id },
      102 |       });
      103 |     }
        at c:\bmad\tests\e2e\company-management.spec.ts:100:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\company-management.spec.ts:100:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-c3fef-il-page-from-companies-list-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-c3fef-il-page-from-companies-list-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-company-management-Com-c3fef-il-page-from-companies-list-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  59) [e2e] › tests\e2e\company-management.spec.ts:138:7 › Company Management E2E › [P0] Should successfully edit company name and status 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\company-management.spec.ts:38:40

      35 
      36 // Create superadmin user
      37 const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    → 38 superadminUser = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      36 |     // Create superadmin user
      37 |     const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    > 38 |     superadminUser = await prisma.user.create({
         |                                        ^
      39 |       data: {
      40 |         public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      41 |         email: "company-e2e@test.com",
        at c:\bmad\tests\e2e\company-management.spec.ts:38:40
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\company-management.spec.ts:38:22

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-8fadf-dit-company-name-and-status-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-company-management-Com-8fadf-dit-company-name-and-status-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  60) [e2e] › tests\e2e\company-management.spec.ts:205:7 › Company Management E2E › [P0] Should create a new company 

    TimeoutError: page.waitForURL: Timeout 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/dashboard" until "load"
      navigated to "http://localhost:3000/dashboard"
      "domcontentloaded" event fired
    ============================================================

      111 |     await page.fill('input[type="password"]', "TestPassword123!");
      112 |     await page.click('button[type="submit"]');
    > 113 |     await page.waitForURL("**/dashboard");
          |                ^
      114 |   });
      115 |
      116 |   test("[P0] Should load companies list page", async ({ page }) => {
        at c:\bmad\tests\e2e\company-management.spec.ts:113:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\company-management.spec.ts:100:31

       97 await prisma.userRole.deleteMany({
       98   where: { user_id: superadminUser.user_id },
       99 });
    → 100 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

       98 |         where: { user_id: superadminUser.user_id },
       99 |       });
    > 100 |       await prisma.user.delete({
          |                               ^
      101 |         where: { user_id: superadminUser.user_id },
      102 |       });
      103 |     }
        at c:\bmad\tests\e2e\company-management.spec.ts:100:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\company-management.spec.ts:100:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-7e9cc-Should-create-a-new-company-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-company-management-Com-7e9cc-Should-create-a-new-company-e2e\error-context.md

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-7e9cc-Should-create-a-new-company-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-company-management-Com-7e9cc-Should-create-a-new-company-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  61) [e2e] › tests\e2e\company-management.spec.ts:240:7 › Company Management E2E › [P1] Should show validation error for empty company name 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      107 |   test.beforeEach(async ({ page }) => {
      108 |     // Login
    > 109 |     await page.goto("http://localhost:3000/login");
          |                ^
      110 |     await page.fill('input[type="email"]', "company-e2e@test.com");
      111 |     await page.fill('input[type="password"]', "TestPassword123!");
      112 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\company-management.spec.ts:109:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\company-management.spec.ts:100:31

       97 await prisma.userRole.deleteMany({
       98   where: { user_id: superadminUser.user_id },
       99 });
    → 100 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

       98 |         where: { user_id: superadminUser.user_id },
       99 |       });
    > 100 |       await prisma.user.delete({
          |                               ^
      101 |         where: { user_id: superadminUser.user_id },
      102 |       });
      103 |     }
        at c:\bmad\tests\e2e\company-management.spec.ts:100:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\company-management.spec.ts:100:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-003e3-rror-for-empty-company-name-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-003e3-rror-for-empty-company-name-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-company-management-Com-003e3-rror-for-empty-company-name-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-003e3-rror-for-empty-company-name-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-company-management-Com-003e3-rror-for-empty-company-name-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  62) [e2e] › tests\e2e\company-management.spec.ts:259:7 › Company Management E2E › [P0] Should prevent deletion of ACTIVE company 

    TimeoutError: page.waitForURL: Timeout 30000ms exceeded.
    =========================== logs ===========================
    waiting for navigation to "**/dashboard" until "load"
      navigated to "http://localhost:3000/dashboard"
      "domcontentloaded" event fired
    ============================================================

      111 |     await page.fill('input[type="password"]', "TestPassword123!");
      112 |     await page.click('button[type="submit"]');
    > 113 |     await page.waitForURL("**/dashboard");
          |                ^
      114 |   });
      115 |
      116 |   test("[P0] Should load companies list page", async ({ page }) => {
        at c:\bmad\tests\e2e\company-management.spec.ts:113:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\company-management.spec.ts:100:31

       97 await prisma.userRole.deleteMany({
       98   where: { user_id: superadminUser.user_id },
       99 });
    → 100 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

       98 |         where: { user_id: superadminUser.user_id },
       99 |       });
    > 100 |       await prisma.user.delete({
          |                               ^
      101 |         where: { user_id: superadminUser.user_id },
      102 |       });
      103 |     }
        at c:\bmad\tests\e2e\company-management.spec.ts:100:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\company-management.spec.ts:100:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-15b60--deletion-of-ACTIVE-company-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-company-management-Com-15b60--deletion-of-ACTIVE-company-e2e\error-context.md

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-15b60--deletion-of-ACTIVE-company-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-company-management-Com-15b60--deletion-of-ACTIVE-company-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  63) [e2e] › tests\e2e\company-management.spec.ts:275:7 › Company Management E2E › [P1] Should successfully delete INACTIVE company 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      107 |   test.beforeEach(async ({ page }) => {
      108 |     // Login
    > 109 |     await page.goto("http://localhost:3000/login");
          |                ^
      110 |     await page.fill('input[type="email"]', "company-e2e@test.com");
      111 |     await page.fill('input[type="password"]', "TestPassword123!");
      112 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\company-management.spec.ts:109:16

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-ee987-lly-delete-INACTIVE-company-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-ee987-lly-delete-INACTIVE-company-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-company-management-Com-ee987-lly-delete-INACTIVE-company-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-ee987-lly-delete-INACTIVE-company-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-company-management-Com-ee987-lly-delete-INACTIVE-company-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  64) [e2e] › tests\e2e\company-management.spec.ts:307:7 › Company Management E2E › [P1] Should display properly on mobile screens 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\company-management.spec.ts:38:40

      35 
      36 // Create superadmin user
      37 const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    → 38 superadminUser = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      36 |     // Create superadmin user
      37 |     const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    > 38 |     superadminUser = await prisma.user.create({
         |                                        ^
      39 |       data: {
      40 |         public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      41 |         email: "company-e2e@test.com",
        at c:\bmad\tests\e2e\company-management.spec.ts:38:40
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\company-management.spec.ts:38:22

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-company-management-Com-9bbe4--properly-on-mobile-screens-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-company-management-Com-9bbe4--properly-on-mobile-screens-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  65) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:41:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-000: should NOT display dark mode toggle button on login page (unauthenticated) 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      44 |     // GIVEN: User is not authenticated
      45 |     // WHEN: User navigates to login page
    > 46 |     await page.goto("/login");
         |                ^
      47 |
      48 |     // THEN: Dark mode toggle button should NOT be visible
      49 |     await expect(
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:46:16

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-a9674-login-page-unauthenticated--e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-a9674-login-page-unauthenticated--e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-dark-mode-toggle-1-9-E-a9674-login-page-unauthenticated--e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-a9674-login-page-unauthenticated--e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-a9674-login-page-unauthenticated--e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  66) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:55:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-001: should display dark mode toggle button in header when authenticated 

    Error: Theme toggle button should be visible in header for authenticated users

    [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: getByTestId('theme-toggle')
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Theme toggle button should be visible in header for authenticated users with timeout 30000ms[22m
    [2m  - waiting for getByTestId('theme-toggle')[22m


      75 |       page.getByTestId("theme-toggle"),
      76 |       "Theme toggle button should be visible in header for authenticated users",
    > 77 |     ).toBeVisible();
         |       ^
      78 |   });
      79 |
      80 |   test("[P2] 1.9-E2E-001-002: should switch theme from light to dark when toggle is clicked", async ({
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:77:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-72cc9-n-header-when-authenticated-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-72cc9-n-header-when-authenticated-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-dark-mode-toggle-1-9-E-72cc9-n-header-when-authenticated-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-72cc9-n-header-when-authenticated-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-72cc9-n-header-when-authenticated-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  67) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:80:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-002: should switch theme from light to dark when toggle is clicked 

    TimeoutError: locator.click: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for getByTestId('theme-toggle')[22m


      101 |
      102 |     // WHEN: User clicks the theme toggle button
    > 103 |     await page.getByTestId("theme-toggle").click();
          |                                            ^
      104 |
      105 |     // THEN: Theme should switch to dark (html element should have .dark class)
      106 |     await expect(
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:103:44

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-20c59-dark-when-toggle-is-clicked-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-20c59-dark-when-toggle-is-clicked-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-dark-mode-toggle-1-9-E-20c59-dark-when-toggle-is-clicked-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-20c59-dark-when-toggle-is-clicked-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-20c59-dark-when-toggle-is-clicked-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  68) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:112:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-003: should switch theme from dark to light when toggle is clicked 

    TimeoutError: locator.click: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for getByTestId('theme-toggle')[22m


      133 |
      134 |     // WHEN: User clicks the theme toggle button
    > 135 |     await page.getByTestId("theme-toggle").click();
          |                                            ^
      136 |
      137 |     // THEN: Theme should switch to light (html element should not have .dark class)
      138 |     await expect(
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:135:44

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-ec127-ight-when-toggle-is-clicked-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-ec127-ight-when-toggle-is-clicked-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-dark-mode-toggle-1-9-E-ec127-ight-when-toggle-is-clicked-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-ec127-ight-when-toggle-is-clicked-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-ec127-ight-when-toggle-is-clicked-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  69) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:144:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-004: should persist theme preference after page refresh 

    TimeoutError: locator.click: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for getByTestId('theme-toggle-button')[22m


      158 |
      159 |     await page.goto("/dashboard");
    > 160 |     await page.getByTestId("theme-toggle-button").click();
          |                                                   ^
      161 |     await expect(page.locator("html")).toHaveClass(/dark/);
      162 |
      163 |     // WHEN: User refreshes the page
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:160:51

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-60d5a-eference-after-page-refresh-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-60d5a-eference-after-page-refresh-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-dark-mode-toggle-1-9-E-60d5a-eference-after-page-refresh-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-60d5a-eference-after-page-refresh-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-60d5a-eference-after-page-refresh-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  70) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:182:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-005: should save theme preference to localStorage with key 'nuvana-theme' 

    TimeoutError: locator.click: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for getByTestId('theme-toggle')[22m


      198 |
      199 |     // WHEN: User clicks theme toggle to switch to dark
    > 200 |     await page.getByTestId("theme-toggle").click();
          |                                            ^
      201 |
      202 |     // THEN: Theme preference should be saved to localStorage with key "nuvana-theme"
      203 |     const themePreference = await page.evaluate(() => {
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:200:44

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-d5cad-rage-with-key-nuvana-theme--e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-d5cad-rage-with-key-nuvana-theme--e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-dark-mode-toggle-1-9-E-d5cad-rage-with-key-nuvana-theme--e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-d5cad-rage-with-key-nuvana-theme--e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-d5cad-rage-with-key-nuvana-theme--e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  71) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:212:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-006: should display header elements in correct order (title, toggle, username, logout) 

    TimeoutError: locator.evaluate: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for getByTestId('header').getByTestId('theme-toggle')[22m


      234 |     const toggleIndex = await header
      235 |       .getByTestId("theme-toggle")
    > 236 |       .evaluate((el) => {
          |        ^
      237 |         const parent = el.parentElement;
      238 |         return parent ? Array.from(parent.children).indexOf(el) : -1;
      239 |       });
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:236:8

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-e8bcb-tle-toggle-username-logout--e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-e8bcb-tle-toggle-username-logout--e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-dark-mode-toggle-1-9-E-e8bcb-tle-toggle-username-logout--e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-e8bcb-tle-toggle-username-logout--e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-e8bcb-tle-toggle-username-logout--e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  72) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:253:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-007: should reset theme to light mode on logout 

    TimeoutError: locator.click: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for getByTestId('theme-toggle')[22m


      269 |
      270 |     // Switch to dark theme
    > 271 |     await page.getByTestId("theme-toggle").click();
          |                                            ^
      272 |     await expect(page.locator("html")).toHaveClass(/dark/);
      273 |
      274 |     // WHEN: User logs out
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:271:44

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-9b102-eme-to-light-mode-on-logout-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-9b102-eme-to-light-mode-on-logout-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-dark-mode-toggle-1-9-E-9b102-eme-to-light-mode-on-logout-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-9b102-eme-to-light-mode-on-logout-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-9b102-eme-to-light-mode-on-logout-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  73) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:318:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-009: should restore user's theme preference on subsequent login 

    TimeoutError: locator.click: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for getByTestId('theme-toggle')[22m


      334 |
      335 |     // Switch to dark theme
    > 336 |     await page.getByTestId("theme-toggle").click();
          |                                            ^
      337 |     await expect(page.locator("html")).toHaveClass(/dark/);
      338 |
      339 |     // Verify theme is saved with user-specific key
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:336:44

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-fbacb-ference-on-subsequent-login-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-fbacb-ference-on-subsequent-login-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-dark-mode-toggle-1-9-E-fbacb-ference-on-subsequent-login-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-fbacb-ference-on-subsequent-login-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-fbacb-ference-on-subsequent-login-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  74) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:383:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-010: should apply theme immediately on login without refresh (dark preference) 

    Error: Dark theme should be applied immediately on login without requiring refresh

    [2mexpect([22m[31mlocator[39m[2m).[22mtoHaveClass[2m([22m[32mexpected[39m[2m)[22m failed

    Locator: locator('html')
    Expected pattern: [32m/dark/[39m
    Received string:  [31m"light"[39m
    Timeout: 30000ms

    Call log:
    [2m  - Dark theme should be applied immediately on login without requiring refresh with timeout 30000ms[22m
    [2m  - waiting for locator('html')[22m
    [2m    33 × locator resolved to <html lang="en" class="light">…</html>[22m
    [2m       - unexpected value "light"[22m


      412 |       page.locator("html"),
      413 |       "Dark theme should be applied immediately on login without requiring refresh",
    > 414 |     ).toHaveClass(/dark/);
          |       ^
      415 |   });
      416 |
      417 |   test("[P2] 1.9-E2E-001-011: should apply theme immediately on login without refresh (light preference)", async ({
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:414:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-4b51c-ut-refresh-dark-preference--e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-4b51c-ut-refresh-dark-preference--e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-dark-mode-toggle-1-9-E-4b51c-ut-refresh-dark-preference--e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-4b51c-ut-refresh-dark-preference--e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-4b51c-ut-refresh-dark-preference--e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  75) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:489:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-013: should apply User B's light preference when User B logs in (after User A with dark) 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/dashboard", waiting until "load"[22m


      519 |       name: userA.name,
      520 |     });
    > 521 |     await page.goto("/dashboard");
          |                ^
      522 |
      523 |     // Verify User A's dark theme is applied
      524 |     await expect(page.locator("html")).toHaveClass(/dark/);
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:521:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-55dc8--in-after-User-A-with-dark--e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-dark-mode-toggle-1-9-E-55dc8--in-after-User-A-with-dark--e2e\error-context.md

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-55dc8--in-after-User-A-with-dark--e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-55dc8--in-after-User-A-with-dark--e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  76) [e2e] › tests\e2e\dark-mode-toggle.spec.ts:559:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-014: should restore theme immediately on page load with existing session 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/dashboard", waiting until "load"[22m


      588 |
      589 |     // WHEN: Page loads with existing session
    > 590 |     await page.goto("/dashboard");
          |                ^
      591 |
      592 |     // THEN: Dark theme should be applied IMMEDIATELY (no refresh needed)
      593 |     await expect(
        at c:\bmad\tests\e2e\dark-mode-toggle.spec.ts:590:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-38376--load-with-existing-session-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-dark-mode-toggle-1-9-E-38376--load-with-existing-session-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-dark-mode-toggle-1-9-E-38376--load-with-existing-session-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  77) [e2e] › tests\e2e\debug-modal-width.spec.ts:117:7 › Debug Modal Width › Debug modal width and classes on 375px viewport 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      120 |
      121 |     // Login
    > 122 |     await page.goto("http://localhost:3000/login");
          |                ^
      123 |     await page.fill('input[type="email"]', "debug-modal@test.com");
      124 |     await page.fill('input[type="password"]', "TestPassword123!");
      125 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\debug-modal-width.spec.ts:122:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-debug-modal-width-Debu-861f3-d-classes-on-375px-viewport-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-debug-modal-width-Debu-861f3-d-classes-on-375px-viewport-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-debug-modal-width-Debu-861f3-d-classes-on-375px-viewport-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  78) [e2e] › tests\e2e\homepage-contact-form.spec.ts:11:7 › E2E-003: Homepage Contact Form › [P0] should submit contact form with valid data 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      11 |   test("[P0] should submit contact form with valid data", async ({ page }) => {
      12 |     // GIVEN: User is on homepage contact form
    > 13 |     await page.goto("/");
         |                ^
      14 |     await page
      15 |       .getByRole("button", { name: /Get Started/i })
      16 |       .first()
        at c:\bmad\tests\e2e\homepage-contact-form.spec.ts:13:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--dd517-ontact-form-with-valid-data-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--dd517-ontact-form-with-valid-data-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-contact-form--dd517-ontact-form-with-valid-data-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  79) [e2e] › tests\e2e\homepage-contact-form.spec.ts:43:7 › E2E-003: Homepage Contact Form › [P1] should prevent submission with empty required fields 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      45 |   }) => {
      46 |     // GIVEN: User is on homepage contact form
    > 47 |     await page.goto("/");
         |                ^
      48 |     await page
      49 |       .getByRole("button", { name: /Get Started/i })
      50 |       .first()
        at c:\bmad\tests\e2e\homepage-contact-form.spec.ts:47:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--340c2--with-empty-required-fields-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--340c2--with-empty-required-fields-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-contact-form--340c2--with-empty-required-fields-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  80) [e2e] › tests\e2e\homepage-contact-form.spec.ts:73:7 › E2E-003: Homepage Contact Form › [P1] should validate email format 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      73 |   test("[P1] should validate email format", async ({ page }) => {
      74 |     // GIVEN: User is on homepage contact form
    > 75 |     await page.goto("/");
         |                ^
      76 |     await page
      77 |       .getByRole("button", { name: /Get Started/i })
      78 |       .first()
        at c:\bmad\tests\e2e\homepage-contact-form.spec.ts:75:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--00d0e-hould-validate-email-format-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--00d0e-hould-validate-email-format-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-contact-form--00d0e-hould-validate-email-format-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  81) [e2e] › tests\e2e\homepage-contact-form.spec.ts:91:7 › E2E-003: Homepage Contact Form › [P1] should disable submit button while form is submitting 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      93 |   }) => {
      94 |     // GIVEN: User is on homepage contact form with valid data
    > 95 |     await page.goto("/");
         |                ^
      96 |     await page
      97 |       .getByRole("button", { name: /Get Started/i })
      98 |       .first()
        at c:\bmad\tests\e2e\homepage-contact-form.spec.ts:95:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--ae45b-on-while-form-is-submitting-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--ae45b-on-while-form-is-submitting-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-contact-form--ae45b-on-while-form-is-submitting-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  82) [e2e] › tests\e2e\homepage-contact-form.spec.ts:124:7 › E2E-003: Homepage Contact Form › [P2] should clear form fields after successful submission 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      126 |   }) => {
      127 |     // GIVEN: User submits contact form successfully
    > 128 |     await page.goto("/");
          |                ^
      129 |     await page
      130 |       .getByRole("button", { name: /Get Started/i })
      131 |       .first()
        at c:\bmad\tests\e2e\homepage-contact-form.spec.ts:128:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--75a76-after-successful-submission-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--75a76-after-successful-submission-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-contact-form--75a76-after-successful-submission-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  83) [e2e] › tests\e2e\homepage-contact-form.spec.ts:159:7 › E2E-003: Homepage Contact Form › [P1] should display error message on form submission failure 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      161 |   }) => {
      162 |     // GIVEN: User is on homepage contact form
    > 163 |     await page.goto("/");
          |                ^
      164 |     await page
      165 |       .getByRole("button", { name: /Get Started/i })
      166 |       .first()
        at c:\bmad\tests\e2e\homepage-contact-form.spec.ts:163:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--23c56--on-form-submission-failure-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-contact-form--23c56--on-form-submission-failure-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-contact-form--23c56--on-form-submission-failure-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  84) [e2e] › tests\e2e\homepage.spec.ts:11:7 › E2E-002: Homepage - Marketing Page › [P0] should load homepage and display hero section 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      13 |   }) => {
      14 |     // GIVEN: User navigates to homepage
    > 15 |     await page.goto("/");
         |                ^
      16 |
      17 |     // WHEN: Page loads
      18 |     // THEN: Hero section is visible with main headline
        at c:\bmad\tests\e2e\homepage.spec.ts:15:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-ab320-ge-and-display-hero-section-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-ab320-ge-and-display-hero-section-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-E2E-002-Homep-ab320-ge-and-display-hero-section-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  85) [e2e] › tests\e2e\homepage.spec.ts:26:7 › E2E-002: Homepage - Marketing Page › [P0] should display all four pain point cards 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      26 |   test("[P0] should display all four pain point cards", async ({ page }) => {
      27 |     // GIVEN: User navigates to homepage
    > 28 |     await page.goto("/");
         |                ^
      29 |
      30 |     // WHEN: User scrolls to pain points section
      31 |     // THEN: All four pain point cards are visible
        at c:\bmad\tests\e2e\homepage.spec.ts:28:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-c758c-y-all-four-pain-point-cards-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-c758c-y-all-four-pain-point-cards-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-E2E-002-Homep-c758c-y-all-four-pain-point-cards-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  86) [e2e] › tests\e2e\homepage.spec.ts:53:7 › E2E-002: Homepage - Marketing Page › [P1] should scroll to contact form when clicking Get Started button 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      55 |   }) => {
      56 |     // GIVEN: User is on homepage
    > 57 |     await page.goto("/");
         |                ^
      58 |
      59 |     // WHEN: User clicks "Get Started" button in hero section
      60 |     await page
        at c:\bmad\tests\e2e\homepage.spec.ts:57:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-24283-clicking-Get-Started-button-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-24283-clicking-Get-Started-button-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-E2E-002-Homep-24283-clicking-Get-Started-button-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  87) [e2e] › tests\e2e\homepage.spec.ts:74:7 › E2E-002: Homepage - Marketing Page › [P1] should display contact form with all required fields 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      76 |   }) => {
      77 |     // GIVEN: User navigates to homepage
    > 78 |     await page.goto("/");
         |                ^
      79 |
      80 |     // WHEN: User scrolls to contact form section
      81 |     await page
        at c:\bmad\tests\e2e\homepage.spec.ts:78:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-c7af1-rm-with-all-required-fields-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-c7af1-rm-with-all-required-fields-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-E2E-002-Homep-c7af1-rm-with-all-required-fields-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  88) [e2e] › tests\e2e\homepage.spec.ts:98:7 › E2E-002: Homepage - Marketing Page › [P1] should display benefits section with key features 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      100 |   }) => {
      101 |     // GIVEN: User navigates to homepage
    > 102 |     await page.goto("/");
          |                ^
      103 |
      104 |     // WHEN: User scrolls through page
      105 |     // THEN: Benefits section displays enterprise features
        at c:\bmad\tests\e2e\homepage.spec.ts:102:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-aff77-s-section-with-key-features-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-aff77-s-section-with-key-features-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-E2E-002-Homep-aff77-s-section-with-key-features-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  89) [e2e] › tests\e2e\homepage.spec.ts:122:7 › E2E-002: Homepage - Marketing Page › [P2] should display key statistics in benefits section 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      124 |   }) => {
      125 |     // GIVEN: User navigates to homepage
    > 126 |     await page.goto("/");
          |                ^
      127 |
      128 |     // WHEN: User scrolls to benefits section
      129 |     // THEN: Key statistics are displayed
        at c:\bmad\tests\e2e\homepage.spec.ts:126:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-12fbb-tistics-in-benefits-section-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-12fbb-tistics-in-benefits-section-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-E2E-002-Homep-12fbb-tistics-in-benefits-section-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  90) [e2e] › tests\e2e\homepage.spec.ts:136:7 › E2E-002: Homepage - Marketing Page › [P1] should navigate to dashboard when clicking View Dashboard button 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      138 |   }) => {
      139 |     // GIVEN: User is on homepage
    > 140 |     await page.goto("/");
          |                ^
      141 |
      142 |     // WHEN: User clicks "View Dashboard" button
      143 |     await page.getByRole("link", { name: /View Dashboard/i }).click();
        at c:\bmad\tests\e2e\homepage.spec.ts:140:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-26423-cking-View-Dashboard-button-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-26423-cking-View-Dashboard-button-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-E2E-002-Homep-26423-cking-View-Dashboard-button-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  91) [e2e] › tests\e2e\homepage.spec.ts:149:7 › E2E-002: Homepage - Marketing Page › [P2] should have responsive layout on mobile viewport 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/", waiting until "load"[22m


      152 |     // GIVEN: User accesses homepage on mobile device
      153 |     await page.setViewportSize({ width: 375, height: 667 });
    > 154 |     await page.goto("/");
          |                ^
      155 |
      156 |     // WHEN: Page loads
      157 |     // THEN: Content is visible and properly laid out
        at c:\bmad\tests\e2e\homepage.spec.ts:154:16

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-d0225-e-layout-on-mobile-viewport-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-homepage-E2E-002-Homep-d0225-e-layout-on-mobile-viewport-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-homepage-E2E-002-Homep-d0225-e-layout-on-mobile-viewport-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  92) [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on iPhone SE (375x667) 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      86 |   test.beforeEach(async ({ page }) => {
      87 |     // Login
    > 88 |     await page.goto("http://localhost:3000/login");
         |                ^
      89 |     await page.fill('input[type="email"]', "mobile-dialog-test@test.com");
      90 |     await page.fill('input[type="password"]', "TestPassword123!");
      91 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:88:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:31

      75 await prisma.userRole.deleteMany({
      76   where: { user_id: superadminUser.user_id },
      77 });
    → 78 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      76 |         where: { user_id: superadminUser.user_id },
      77 |       });
    > 78 |       await prisma.user.delete({
         |                               ^
      79 |         where: { user_id: superadminUser.user_id },
      80 |       });
      81 |     }
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-051bb-perly-on-iPhone-SE-375x667--e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-051bb-perly-on-iPhone-SE-375x667--e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-051bb-perly-on-iPhone-SE-375x667--e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-alert-dialog-Mo-051bb-perly-on-iPhone-SE-375x667--e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  93) [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on iPhone 12 Pro (390x844) 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      86 |   test.beforeEach(async ({ page }) => {
      87 |     // Login
    > 88 |     await page.goto("http://localhost:3000/login");
         |                ^
      89 |     await page.fill('input[type="email"]', "mobile-dialog-test@test.com");
      90 |     await page.fill('input[type="password"]', "TestPassword123!");
      91 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:88:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:31

      75 await prisma.userRole.deleteMany({
      76   where: { user_id: superadminUser.user_id },
      77 });
    → 78 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      76 |         where: { user_id: superadminUser.user_id },
      77 |       });
    > 78 |       await prisma.user.delete({
         |                               ^
      79 |         where: { user_id: superadminUser.user_id },
      80 |       });
      81 |     }
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-54bec-y-on-iPhone-12-Pro-390x844--e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-54bec-y-on-iPhone-12-Pro-390x844--e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-alert-dialog-Mo-54bec-y-on-iPhone-12-Pro-390x844--e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  94) [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on Samsung Galaxy S20 (360x800) 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      86 |   test.beforeEach(async ({ page }) => {
      87 |     // Login
    > 88 |     await page.goto("http://localhost:3000/login");
         |                ^
      89 |     await page.fill('input[type="email"]', "mobile-dialog-test@test.com");
      90 |     await page.fill('input[type="password"]', "TestPassword123!");
      91 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:88:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:31

      75 await prisma.userRole.deleteMany({
      76   where: { user_id: superadminUser.user_id },
      77 });
    → 78 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      76 |         where: { user_id: superadminUser.user_id },
      77 |       });
    > 78 |       await prisma.user.delete({
         |                               ^
      79 |         where: { user_id: superadminUser.user_id },
      80 |       });
      81 |     }
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-4f6ba-Samsung-Galaxy-S20-360x800--e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-mobile-alert-dialog-Mo-4f6ba-Samsung-Galaxy-S20-360x800--e2e\error-context.md

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-4f6ba-Samsung-Galaxy-S20-360x800--e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-alert-dialog-Mo-4f6ba-Samsung-Galaxy-S20-360x800--e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  95) [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on iPad Mini (768x1024) 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:30:40

      27 
      28 // Create superadmin user
      29 const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    → 30 superadminUser = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      28 |     // Create superadmin user
      29 |     const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    > 30 |     superadminUser = await prisma.user.create({
         |                                        ^
      31 |       data: {
      32 |         public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      33 |         email: "mobile-dialog-test@test.com",
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:30:40
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:30:22

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-e6fe3-erly-on-iPad-Mini-768x1024--e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-alert-dialog-Mo-e6fe3-erly-on-iPad-Mini-768x1024--e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  96) [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:193:7 › Mobile Alert Dialog Responsiveness › [P1] Alert dialog content should not get cut off on small screens 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      86 |   test.beforeEach(async ({ page }) => {
      87 |     // Login
    > 88 |     await page.goto("http://localhost:3000/login");
         |                ^
      89 |     await page.fill('input[type="email"]', "mobile-dialog-test@test.com");
      90 |     await page.fill('input[type="password"]', "TestPassword123!");
      91 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:88:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:31

      75 await prisma.userRole.deleteMany({
      76   where: { user_id: superadminUser.user_id },
      77 });
    → 78 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      76 |         where: { user_id: superadminUser.user_id },
      77 |       });
    > 78 |       await prisma.user.delete({
         |                               ^
      79 |         where: { user_id: superadminUser.user_id },
      80 |       });
      81 |     }
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:78:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-369c7-et-cut-off-on-small-screens-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-369c7-et-cut-off-on-small-screens-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-mobile-alert-dialog-Mo-369c7-et-cut-off-on-small-screens-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-369c7-et-cut-off-on-small-screens-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-alert-dialog-Mo-369c7-et-cut-off-on-small-screens-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  97) [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:232:7 › Mobile Alert Dialog Responsiveness › [P1] Alert dialog should be scrollable if content is too tall 

    TimeoutError: page.goto: Timeout 30000ms exceeded.
    Call log:
    [2m  - navigating to "http://localhost:3000/login", waiting until "load"[22m


      86 |   test.beforeEach(async ({ page }) => {
      87 |     // Login
    > 88 |     await page.goto("http://localhost:3000/login");
         |                ^
      89 |     await page.fill('input[type="email"]', "mobile-dialog-test@test.com");
      90 |     await page.fill('input[type="password"]', "TestPassword123!");
      91 |     await page.click('button[type="submit"]');
        at c:\bmad\tests\e2e\mobile-alert-dialog.spec.ts:88:16

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-2fcd8-able-if-content-is-too-tall-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-2fcd8-able-if-content-is-too-tall-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-mobile-alert-dialog-Mo-2fcd8-able-if-content-is-too-tall-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-alert-dialog-Mo-2fcd8-able-if-content-is-too-tall-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-alert-dialog-Mo-2fcd8-able-if-content-is-too-tall-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  98) [e2e] › tests\e2e\mobile-sidebar.spec.ts:10:7 › Mobile Sidebar [P0] › [P0] should open sidebar when hamburger menu is clicked 

    TimeoutError: page.click: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="sidebar-toggle"]')[22m


      12 |   }) => {
      13 |     // Click hamburger menu
    > 14 |     await page.click('[data-testid="sidebar-toggle"]');
         |                ^
      15 |
      16 |     // Sidebar should be visible
      17 |     await expect(
        at c:\bmad\tests\e2e\mobile-sidebar.spec.ts:14:16

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--0a62b-n-hamburger-menu-is-clicked-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--0a62b-n-hamburger-menu-is-clicked-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-mobile-sidebar-Mobile--0a62b-n-hamburger-menu-is-clicked-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--0a62b-n-hamburger-menu-is-clicked-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-sidebar-Mobile--0a62b-n-hamburger-menu-is-clicked-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  99) [e2e] › tests\e2e\mobile-sidebar.spec.ts:22:7 › Mobile Sidebar [P0] › [P0] should close sidebar when overlay is clicked 

    TimeoutError: page.click: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="sidebar-toggle"]')[22m


      24 |   }) => {
      25 |     // Open sidebar
    > 26 |     await page.click('[data-testid="sidebar-toggle"]');
         |                ^
      27 |     await expect(
      28 |       page.locator('[data-testid="sidebar-navigation"]'),
      29 |     ).toBeVisible();
        at c:\bmad\tests\e2e\mobile-sidebar.spec.ts:26:16

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--a1efa-bar-when-overlay-is-clicked-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--a1efa-bar-when-overlay-is-clicked-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-mobile-sidebar-Mobile--a1efa-bar-when-overlay-is-clicked-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--a1efa-bar-when-overlay-is-clicked-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-sidebar-Mobile--a1efa-bar-when-overlay-is-clicked-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  100) [e2e] › tests\e2e\mobile-sidebar.spec.ts:43:7 › Mobile Sidebar [P0] › [P0] should allow content interaction when sidebar is closed 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('main')
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('main')[22m


      52 |     // Try to interact with main content
      53 |     const mainContent = page.locator("main");
    > 54 |     await expect(mainContent).toBeVisible();
         |                               ^
      55 |
      56 |     // Content should be clickable (not blocked by invisible overlay)
      57 |     const isClickable = await mainContent.evaluate((el) => {
        at c:\bmad\tests\e2e\mobile-sidebar.spec.ts:54:31

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--5e09d-tion-when-sidebar-is-closed-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--5e09d-tion-when-sidebar-is-closed-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-mobile-sidebar-Mobile--5e09d-tion-when-sidebar-is-closed-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--5e09d-tion-when-sidebar-is-closed-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-sidebar-Mobile--5e09d-tion-when-sidebar-is-closed-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  101) [e2e] › tests\e2e\mobile-sidebar.spec.ts:68:7 › Mobile Sidebar [P0] › [P0] should have accessible title and description 

    TimeoutError: page.click: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="sidebar-toggle"]')[22m


      70 |   }) => {
      71 |     // Open sidebar
    > 72 |     await page.click('[data-testid="sidebar-toggle"]');
         |                ^
      73 |
      74 |     // Check for accessible dialog
      75 |     const dialog = page.getByRole("dialog", { name: /navigation menu/i });
        at c:\bmad\tests\e2e\mobile-sidebar.spec.ts:72:16

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--279f4-sible-title-and-description-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--279f4-sible-title-and-description-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-mobile-sidebar-Mobile--279f4-sible-title-and-description-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--279f4-sible-title-and-description-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-sidebar-Mobile--279f4-sible-title-and-description-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  102) [e2e] › tests\e2e\mobile-sidebar.spec.ts:85:7 › Mobile Sidebar [P0] › [P1] should close sidebar when navigation link is clicked 

    TimeoutError: page.click: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('[data-testid="sidebar-toggle"]')[22m


      87 |   }) => {
      88 |     // Open sidebar
    > 89 |     await page.click('[data-testid="sidebar-toggle"]');
         |                ^
      90 |
      91 |     // Click a navigation link
      92 |     const dashboardLink = page.locator('[data-testid="nav-link-dashboard"]');
        at c:\bmad\tests\e2e\mobile-sidebar.spec.ts:89:16

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--29021--navigation-link-is-clicked-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--29021--navigation-link-is-clicked-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-mobile-sidebar-Mobile--29021--navigation-link-is-clicked-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Mobile--29021--navigation-link-is-clicked-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-sidebar-Mobile--29021--navigation-link-is-clicked-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  103) [e2e] › tests\e2e\mobile-sidebar.spec.ts:117:7 › Desktop Sidebar [P1] › [P1] should always show sidebar on desktop 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('[data-testid="sidebar-navigation"]')
    Expected: visible
    Timeout: 30000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 30000ms[22m
    [2m  - waiting for locator('[data-testid="sidebar-navigation"]')[22m


      117 |   test("[P1] should always show sidebar on desktop", async ({ page }) => {
      118 |     const sidebar = page.locator('[data-testid="sidebar-navigation"]');
    > 119 |     await expect(sidebar).toBeVisible();
          |                           ^
      120 |   });
      121 |
      122 |   test("[P1] should not show hamburger menu on desktop", async ({ page }) => {
        at c:\bmad\tests\e2e\mobile-sidebar.spec.ts:119:27

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Desktop-e3411-ays-show-sidebar-on-desktop-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Desktop-e3411-ays-show-sidebar-on-desktop-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-mobile-sidebar-Desktop-e3411-ays-show-sidebar-on-desktop-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-mobile-sidebar-Desktop-e3411-ays-show-sidebar-on-desktop-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-mobile-sidebar-Desktop-e3411-ays-show-sidebar-on-desktop-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  104) [e2e] › tests\e2e\store-management.spec.ts:139:7 › Store Management E2E › [P0] Should load stores list page 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m
    [2m    - waiting for" http://localhost:3000/login" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/login"[22m


      131 |     // Login
      132 |     await page.goto("http://localhost:3000/login");
    > 133 |     await page.fill('input[type="email"]', "store-e2e@test.com");
          |                ^
      134 |     await page.fill('input[type="password"]', "TestPassword123!");
      135 |     await page.click('button[type="submit"]');
      136 |     await page.waitForURL("**/dashboard");
        at c:\bmad\tests\e2e\store-management.spec.ts:133:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\store-management.spec.ts:123:31

      120 await prisma.userRole.deleteMany({
      121   where: { user_id: superadminUser.user_id },
      122 });
    → 123 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      121 |         where: { user_id: superadminUser.user_id },
      122 |       });
    > 123 |       await prisma.user.delete({
          |                               ^
      124 |         where: { user_id: superadminUser.user_id },
      125 |       });
      126 |     }
        at c:\bmad\tests\e2e\store-management.spec.ts:123:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\store-management.spec.ts:123:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-4bbd6-hould-load-stores-list-page-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-4bbd6-hould-load-stores-list-page-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-4bbd6-hould-load-stores-list-page-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  105) [e2e] › tests\e2e\store-management.spec.ts:147:7 › Store Management E2E › [P0] Should navigate to store detail page from stores list 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m
    [2m    - waiting for" http://localhost:3000/login" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/login"[22m


      131 |     // Login
      132 |     await page.goto("http://localhost:3000/login");
    > 133 |     await page.fill('input[type="email"]', "store-e2e@test.com");
          |                ^
      134 |     await page.fill('input[type="password"]', "TestPassword123!");
      135 |     await page.click('button[type="submit"]');
      136 |     await page.waitForURL("**/dashboard");
        at c:\bmad\tests\e2e\store-management.spec.ts:133:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\store-management.spec.ts:123:31

      120 await prisma.userRole.deleteMany({
      121   where: { user_id: superadminUser.user_id },
      122 });
    → 123 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      121 |         where: { user_id: superadminUser.user_id },
      122 |       });
    > 123 |       await prisma.user.delete({
          |                               ^
      124 |         where: { user_id: superadminUser.user_id },
      125 |       });
      126 |     }
        at c:\bmad\tests\e2e\store-management.spec.ts:123:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\store-management.spec.ts:123:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-dec68-etail-page-from-stores-list-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-dec68-etail-page-from-stores-list-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-dec68-etail-page-from-stores-list-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  106) [e2e] › tests\e2e\store-management.spec.ts:157:7 › Store Management E2E › [P0] Should successfully edit store name and status 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m
    [2m    - waiting for" http://localhost:3000/login" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/login"[22m


      131 |     // Login
      132 |     await page.goto("http://localhost:3000/login");
    > 133 |     await page.fill('input[type="email"]', "store-e2e@test.com");
          |                ^
      134 |     await page.fill('input[type="password"]', "TestPassword123!");
      135 |     await page.click('button[type="submit"]');
      136 |     await page.waitForURL("**/dashboard");
        at c:\bmad\tests\e2e\store-management.spec.ts:133:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\store-management.spec.ts:123:31

      120 await prisma.userRole.deleteMany({
      121   where: { user_id: superadminUser.user_id },
      122 });
    → 123 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      121 |         where: { user_id: superadminUser.user_id },
      122 |       });
    > 123 |       await prisma.user.delete({
          |                               ^
      124 |         where: { user_id: superadminUser.user_id },
      125 |       });
      126 |     }
        at c:\bmad\tests\e2e\store-management.spec.ts:123:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\store-management.spec.ts:123:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-2d48b--edit-store-name-and-status-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-2d48b--edit-store-name-and-status-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-2d48b--edit-store-name-and-status-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  107) [e2e] › tests\e2e\store-management.spec.ts:193:7 › Store Management E2E › [P0] Should successfully edit store location 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m
    [2m    - waiting for" http://localhost:3000/login" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/login"[22m


      131 |     // Login
      132 |     await page.goto("http://localhost:3000/login");
    > 133 |     await page.fill('input[type="email"]', "store-e2e@test.com");
          |                ^
      134 |     await page.fill('input[type="password"]', "TestPassword123!");
      135 |     await page.click('button[type="submit"]');
      136 |     await page.waitForURL("**/dashboard");
        at c:\bmad\tests\e2e\store-management.spec.ts:133:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\store-management.spec.ts:123:31

      120 await prisma.userRole.deleteMany({
      121   where: { user_id: superadminUser.user_id },
      122 });
    → 123 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      121 |         where: { user_id: superadminUser.user_id },
      122 |       });
    > 123 |       await prisma.user.delete({
          |                               ^
      124 |         where: { user_id: superadminUser.user_id },
      125 |       });
      126 |     }
        at c:\bmad\tests\e2e\store-management.spec.ts:123:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\store-management.spec.ts:123:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-489e6-ssfully-edit-store-location-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-489e6-ssfully-edit-store-location-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-489e6-ssfully-edit-store-location-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  108) [e2e] › tests\e2e\store-management.spec.ts:223:7 › Store Management E2E › [P0] Should successfully change store timezone 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m
    [2m    - waiting for" http://localhost:3000/login" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/login"[22m


      131 |     // Login
      132 |     await page.goto("http://localhost:3000/login");
    > 133 |     await page.fill('input[type="email"]', "store-e2e@test.com");
          |                ^
      134 |     await page.fill('input[type="password"]', "TestPassword123!");
      135 |     await page.click('button[type="submit"]');
      136 |     await page.waitForURL("**/dashboard");
        at c:\bmad\tests\e2e\store-management.spec.ts:133:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\store-management.spec.ts:123:31

      120 await prisma.userRole.deleteMany({
      121   where: { user_id: superadminUser.user_id },
      122 });
    → 123 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      121 |         where: { user_id: superadminUser.user_id },
      122 |       });
    > 123 |       await prisma.user.delete({
          |                               ^
      124 |         where: { user_id: superadminUser.user_id },
      125 |       });
      126 |     }
        at c:\bmad\tests\e2e\store-management.spec.ts:123:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\store-management.spec.ts:123:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-f5597-fully-change-store-timezone-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-f5597-fully-change-store-timezone-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-f5597-fully-change-store-timezone-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  109) [e2e] › tests\e2e\store-management.spec.ts:253:7 › Store Management E2E › [P0] Should create a new store 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m
    [2m    - waiting for" http://localhost:3000/login" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/login"[22m


      131 |     // Login
      132 |     await page.goto("http://localhost:3000/login");
    > 133 |     await page.fill('input[type="email"]', "store-e2e@test.com");
          |                ^
      134 |     await page.fill('input[type="password"]', "TestPassword123!");
      135 |     await page.click('button[type="submit"]');
      136 |     await page.waitForURL("**/dashboard");
        at c:\bmad\tests\e2e\store-management.spec.ts:133:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\store-management.spec.ts:123:31

      120 await prisma.userRole.deleteMany({
      121   where: { user_id: superadminUser.user_id },
      122 });
    → 123 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      121 |         where: { user_id: superadminUser.user_id },
      122 |       });
    > 123 |       await prisma.user.delete({
          |                               ^
      124 |         where: { user_id: superadminUser.user_id },
      125 |       });
      126 |     }
        at c:\bmad\tests\e2e\store-management.spec.ts:123:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\store-management.spec.ts:123:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-80312-0-Should-create-a-new-store-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-80312-0-Should-create-a-new-store-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-80312-0-Should-create-a-new-store-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  110) [e2e] › tests\e2e\store-management.spec.ts:297:7 › Store Management E2E › [P0] Should successfully update store configuration (operating hours) 

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.create()` invocation in
    c:\bmad\tests\e2e\store-management.spec.ts:40:40

      37 
      38 // Create superadmin user
      39 const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    → 40 superadminUser = await prisma.user.create(
    Unique constraint failed on the fields: (`email`)

      38 |     // Create superadmin user
      39 |     const hashedPassword = await bcrypt.hash("TestPassword123!", 10);
    > 40 |     superadminUser = await prisma.user.create({
         |                                        ^
      41 |       data: {
      42 |         public_id: generatePublicId(PUBLIC_ID_PREFIXES.USER),
      43 |         email: "store-e2e@test.com",
        at c:\bmad\tests\e2e\store-management.spec.ts:40:40
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\store-management.spec.ts:40:22

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-a64f4-figuration-operating-hours--e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-a64f4-figuration-operating-hours--e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  111) [e2e] › tests\e2e\store-management.spec.ts:354:7 › Store Management E2E › [P1] Should show validation error for invalid timezone 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m
    [2m    - waiting for" http://localhost:3000/login" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/login"[22m


      131 |     // Login
      132 |     await page.goto("http://localhost:3000/login");
    > 133 |     await page.fill('input[type="email"]', "store-e2e@test.com");
          |                ^
      134 |     await page.fill('input[type="password"]', "TestPassword123!");
      135 |     await page.click('button[type="submit"]');
      136 |     await page.waitForURL("**/dashboard");
        at c:\bmad\tests\e2e\store-management.spec.ts:133:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\store-management.spec.ts:123:31

      120 await prisma.userRole.deleteMany({
      121   where: { user_id: superadminUser.user_id },
      122 });
    → 123 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      121 |         where: { user_id: superadminUser.user_id },
      122 |       });
    > 123 |       await prisma.user.delete({
          |                               ^
      124 |         where: { user_id: superadminUser.user_id },
      125 |       });
      126 |     }
        at c:\bmad\tests\e2e\store-management.spec.ts:123:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\store-management.spec.ts:123:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-bd8ba--error-for-invalid-timezone-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-bd8ba--error-for-invalid-timezone-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-bd8ba--error-for-invalid-timezone-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  112) [e2e] › tests\e2e\store-management.spec.ts:376:7 › Store Management E2E › [P1] Should prevent deletion of ACTIVE store 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m
    [2m    - waiting for" http://localhost:3000/login" navigation to finish...[22m
    [2m    - navigated to "http://localhost:3000/login"[22m


      131 |     // Login
      132 |     await page.goto("http://localhost:3000/login");
    > 133 |     await page.fill('input[type="email"]', "store-e2e@test.com");
          |                ^
      134 |     await page.fill('input[type="password"]', "TestPassword123!");
      135 |     await page.click('button[type="submit"]');
      136 |     await page.waitForURL("**/dashboard");
        at c:\bmad\tests\e2e\store-management.spec.ts:133:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\store-management.spec.ts:123:31

      120 await prisma.userRole.deleteMany({
      121   where: { user_id: superadminUser.user_id },
      122 });
    → 123 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      121 |         where: { user_id: superadminUser.user_id },
      122 |       });
    > 123 |       await prisma.user.delete({
          |                               ^
      124 |         where: { user_id: superadminUser.user_id },
      125 |       });
      126 |     }
        at c:\bmad\tests\e2e\store-management.spec.ts:123:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\store-management.spec.ts:123:7

    attachment #1: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-c3410-nt-deletion-of-ACTIVE-store-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-c3410-nt-deletion-of-ACTIVE-store-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-c3410-nt-deletion-of-ACTIVE-store-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  113) [e2e] › tests\e2e\store-management.spec.ts:390:7 › Store Management E2E › [P1] Should successfully delete INACTIVE store 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m
    [2m    - waiting for" http://localhost:3000/login" navigation to finish...[22m


      131 |     // Login
      132 |     await page.goto("http://localhost:3000/login");
    > 133 |     await page.fill('input[type="email"]', "store-e2e@test.com");
          |                ^
      134 |     await page.fill('input[type="password"]', "TestPassword123!");
      135 |     await page.click('button[type="submit"]');
      136 |     await page.waitForURL("**/dashboard");
        at c:\bmad\tests\e2e\store-management.spec.ts:133:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\store-management.spec.ts:123:31

      120 await prisma.userRole.deleteMany({
      121   where: { user_id: superadminUser.user_id },
      122 });
    → 123 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      121 |         where: { user_id: superadminUser.user_id },
      122 |       });
    > 123 |       await prisma.user.delete({
          |                               ^
      124 |         where: { user_id: superadminUser.user_id },
      125 |       });
      126 |     }
        at c:\bmad\tests\e2e\store-management.spec.ts:123:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\store-management.spec.ts:123:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-0b1cf-fully-delete-INACTIVE-store-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-0b1cf-fully-delete-INACTIVE-store-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #3: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-0b1cf-fully-delete-INACTIVE-store-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-0b1cf-fully-delete-INACTIVE-store-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  114) [e2e] › tests\e2e\store-management.spec.ts:424:7 › Store Management E2E › [P1] Should display properly on mobile screens 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m


      131 |     // Login
      132 |     await page.goto("http://localhost:3000/login");
    > 133 |     await page.fill('input[type="email"]', "store-e2e@test.com");
          |                ^
      134 |     await page.fill('input[type="password"]', "TestPassword123!");
      135 |     await page.click('button[type="submit"]');
      136 |     await page.waitForURL("**/dashboard");
        at c:\bmad\tests\e2e\store-management.spec.ts:133:16

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-8d38f--properly-on-mobile-screens-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-8d38f--properly-on-mobile-screens-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-store-management-Store-8d38f--properly-on-mobile-screens-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-8d38f--properly-on-mobile-screens-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-8d38f--properly-on-mobile-screens-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  115) [e2e] › tests\e2e\store-management.spec.ts:436:7 › Store Management E2E › [P1] Should display store configuration form properly on mobile 

    TimeoutError: page.fill: Timeout 15000ms exceeded.
    Call log:
    [2m  - waiting for locator('input[type="email"]')[22m


      131 |     // Login
      132 |     await page.goto("http://localhost:3000/login");
    > 133 |     await page.fill('input[type="email"]', "store-e2e@test.com");
          |                ^
      134 |     await page.fill('input[type="password"]', "TestPassword123!");
      135 |     await page.click('button[type="submit"]');
      136 |     await page.waitForURL("**/dashboard");
        at c:\bmad\tests\e2e\store-management.spec.ts:133:16

    PrismaClientKnownRequestError: 
    Invalid `prisma.user.delete()` invocation in
    c:\bmad\tests\e2e\store-management.spec.ts:123:31

      120 await prisma.userRole.deleteMany({
      121   where: { user_id: superadminUser.user_id },
      122 });
    → 123 await prisma.user.delete(
    An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.

      121 |         where: { user_id: superadminUser.user_id },
      122 |       });
    > 123 |       await prisma.user.delete({
          |                               ^
      124 |         where: { user_id: superadminUser.user_id },
      125 |       });
      126 |     }
        at c:\bmad\tests\e2e\store-management.spec.ts:123:31
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\e2e\store-management.spec.ts:123:7

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-f73d8-ion-form-properly-on-mobile-e2e\test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-f73d8-ion-form-properly-on-mobile-e2e\video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results\artifacts\e2e-store-management-Store-f73d8-ion-form-properly-on-mobile-e2e\error-context.md

    attachment #4: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\e2e-store-management-Store-f73d8-ion-form-properly-on-mobile-e2e\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\e2e-store-management-Store-f73d8-ion-form-properly-on-mobile-e2e\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  116) [api] › tests\api\client-management.api.spec.ts:20:7 › Client Management API - CRUD Operations › [P0] POST /api/clients - should create client with valid data (AC #1) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m400[39m

      37 |
      38 |     // THEN: Client is created successfully
    > 39 |     expect(response.status()).toBe(201);
         |                               ^
      40 |     const body = await response.json();
      41 |     expect(body.success).toBe(true);
      42 |     expect(body.data).toHaveProperty("client_id");
        at c:\bmad\tests\api\client-management.api.spec.ts:39:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--e57f4-lient-with-valid-data-AC-1--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--e57f4-lient-with-valid-data-AC-1--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  117) [api] › tests\api\client-management.api.spec.ts:257:7 › Client Management API - CRUD Operations › [P0] PUT /api/clients/:clientId - should update client (AC #3) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m404[39m

      275 |
      276 |     // THEN: Client is updated successfully
    > 277 |     expect(response.status()).toBe(200);
          |                               ^
      278 |     const body = await response.json();
      279 |     expect(body.success).toBe(true);
      280 |     expect(body.data).toHaveProperty("name", "Updated Name");
        at c:\bmad\tests\api\client-management.api.spec.ts:277:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--c8f1f--should-update-client-AC-3--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--c8f1f--should-update-client-AC-3--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  118) [api] › tests\api\client-management.api.spec.ts:305:7 › Client Management API - CRUD Operations › [P0] PUT /api/clients/:clientId - should log status change to INACTIVE (AC #4) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m404[39m

      321 |
      322 |     // THEN: The client status changes to INACTIVE
    > 323 |     expect(response.status()).toBe(200);
          |                               ^
      324 |     const body = await response.json();
      325 |     expect(body.success).toBe(true);
      326 |     expect(body.data.status).toBe("INACTIVE");
        at c:\bmad\tests\api\client-management.api.spec.ts:323:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--fc4d7-us-change-to-INACTIVE-AC-4--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--fc4d7-us-change-to-INACTIVE-AC-4--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  119) [api] › tests\api\client-management.api.spec.ts:342:7 › Client Management API - CRUD Operations › [P0] DELETE /api/clients/:clientId - should soft delete client (AC #5) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m404[39m

      355 |
      356 |     // THEN: The client is marked as deleted (soft delete)
    > 357 |     expect(response.status()).toBe(200);
          |                               ^
      358 |     const body = await response.json();
      359 |     expect(body.success).toBe(true);
      360 |
        at c:\bmad\tests\api\client-management.api.spec.ts:357:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--11d0b-ld-soft-delete-client-AC-5--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--11d0b-ld-soft-delete-client-AC-5--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  120) [api] › tests\api\client-management.api.spec.ts:462:7 › Client Management API - Business Logic › [P0] DELETE /api/clients/:clientId - should cascade soft delete to associated companies (AC #5) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m404[39m

      495 |
      496 |     // THEN: Client is soft deleted
    > 497 |     expect(response.status()).toBe(200);
          |                               ^
      498 |
      499 |     // AND: Associated companies are also soft deleted
      500 |     const deletedCompany = await prismaClient.company.findUnique({
        at c:\bmad\tests\api\client-management.api.spec.ts:497:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--6aac0--associated-companies-AC-5--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--6aac0--associated-companies-AC-5--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  121) [api] › tests\api\client-management.api.spec.ts:506:7 › Client Management API - Business Logic › [P1] PUT /api/clients/:clientId - should allow reactivation from INACTIVE to ACTIVE 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m404[39m

      522 |
      523 |     // THEN: Client is reactivated successfully
    > 524 |     expect(response.status()).toBe(200);
          |                               ^
      525 |     const body = await response.json();
      526 |     expect(body.success).toBe(true);
      527 |     expect(body.data.status).toBe("ACTIVE");
        at c:\bmad\tests\api\client-management.api.spec.ts:524:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--d3f1f-ion-from-INACTIVE-to-ACTIVE-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--d3f1f-ion-from-INACTIVE-to-ACTIVE-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  122) [api] › tests\api\client-management.api.spec.ts:549:7 › Client Management API - Business Logic › [P2] POST /api/clients - should allow duplicate client names (names not unique) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m400[39m

      564 |
      565 |     // THEN: Client is created successfully (names don't need to be unique)
    > 566 |     expect(response.status()).toBe(201);
          |                               ^
      567 |     const body = await response.json();
      568 |     expect(body.success).toBe(true);
      569 |     expect(body.data.name).toBe("Duplicate Name Corp");
        at c:\bmad\tests\api\client-management.api.spec.ts:566:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--53bb1-ent-names-names-not-unique--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--53bb1-ent-names-names-not-unique--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  123) [api] › tests\api\client-management.api.spec.ts:606:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P2] POST /api/clients - should handle special characters in name 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m400[39m

      615 |
      616 |       // THEN: Client is created successfully
    > 617 |       expect(response.status()).toBe(201);
          |                                 ^
      618 |       const body = await response.json();
      619 |       expect(body.data.name).toBe("Test @#$%^&* Corp");
      620 |     });
        at c:\bmad\tests\api\client-management.api.spec.ts:617:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--2f7b0--special-characters-in-name-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--2f7b0--special-characters-in-name-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  124) [api] › tests\api\client-management.api.spec.ts:622:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P2] POST /api/clients - should handle unicode/emoji characters in name 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m400[39m

      631 |
      632 |       // THEN: Client is created successfully
    > 633 |       expect(response.status()).toBe(201);
          |                                 ^
      634 |       const body = await response.json();
      635 |       expect(body.data.name).toBe("Test 日本語 Corp 🏢");
      636 |     });
        at c:\bmad\tests\api\client-management.api.spec.ts:633:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--74d3f-de-emoji-characters-in-name-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--74d3f-de-emoji-characters-in-name-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  125) [api] › tests\api\client-management.api.spec.ts:654:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P2] POST /api/clients - should trim leading/trailing whitespace 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m400[39m

      663 |
      664 |       // THEN: Client is created with trimmed name
    > 665 |       expect(response.status()).toBe(201);
          |                                 ^
      666 |       const body = await response.json();
      667 |       // Name should be trimmed or stored as-is depending on implementation
      668 |       expect(body.data.name.trim()).toBe("Trimmed Corp");
        at c:\bmad\tests\api\client-management.api.spec.ts:665:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--e800d-leading-trailing-whitespace-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--e800d-leading-trailing-whitespace-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  126) [api] › tests\api\client-management.api.spec.ts:673:9 › Client Management API - Edge Cases › Metadata Field Edge Cases › [P2] POST /api/clients - should accept empty metadata object 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m400[39m

      683 |
      684 |       // THEN: Client is created successfully
    > 685 |       expect(response.status()).toBe(201);
          |                                 ^
      686 |     });
      687 |
      688 |     test("[P2] POST /api/clients - should accept null metadata", async ({
        at c:\bmad\tests\api\client-management.api.spec.ts:685:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--73e15-ccept-empty-metadata-object-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--73e15-ccept-empty-metadata-object-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  127) [api] › tests\api\client-management.api.spec.ts:688:9 › Client Management API - Edge Cases › Metadata Field Edge Cases › [P2] POST /api/clients - should accept null metadata 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m400[39m

      698 |
      699 |       // THEN: Client is created successfully
    > 700 |       expect(response.status()).toBe(201);
          |                                 ^
      701 |     });
      702 |
      703 |     test("[P2] POST /api/clients - should handle deeply nested metadata", async ({
        at c:\bmad\tests\api\client-management.api.spec.ts:700:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--113af-should-accept-null-metadata-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--113af-should-accept-null-metadata-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  128) [api] › tests\api\client-management.api.spec.ts:703:9 › Client Management API - Edge Cases › Metadata Field Edge Cases › [P2] POST /api/clients - should handle deeply nested metadata 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m400[39m

      724 |
      725 |       // THEN: Client is created successfully
    > 726 |       expect(response.status()).toBe(201);
          |                                 ^
      727 |     });
      728 |
      729 |     test("[P2] POST /api/clients - should handle large metadata object", async ({
        at c:\bmad\tests\api\client-management.api.spec.ts:726:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--1ede4-ndle-deeply-nested-metadata-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--1ede4-ndle-deeply-nested-metadata-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  129) [api] › tests\api\client-management.api.spec.ts:750:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] GET /api/clients/:clientId - should reject invalid UUID format 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m404[39m

      757 |
      758 |       // THEN: Bad request error is returned
    > 759 |       expect(response.status()).toBe(400);
          |                                 ^
      760 |       const body = await response.json();
      761 |       expect(body.success).toBe(false);
      762 |     });
        at c:\bmad\tests\api\client-management.api.spec.ts:759:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--635a1--reject-invalid-UUID-format-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--635a1--reject-invalid-UUID-format-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  130) [api] › tests\api\client-management.api.spec.ts:764:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] GET /api/clients/:clientId - should reject empty string ID 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m404[39m
    Received array: [31m[200, 400][39m

      769 |
      770 |       // THEN: Returns list or 400 depending on routing
    > 771 |       expect([200, 400]).toContain(response.status());
          |                          ^
      772 |     });
      773 |
      774 |     test("[P1] PUT /api/clients/:clientId - should reject invalid UUID format", async ({
        at c:\bmad\tests\api\client-management.api.spec.ts:771:26

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--08048-ould-reject-empty-string-ID-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--08048-ould-reject-empty-string-ID-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  131) [api] › tests\api\client-management.api.spec.ts:774:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] PUT /api/clients/:clientId - should reject invalid UUID format 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m404[39m

      784 |
      785 |       // THEN: Bad request error is returned
    > 786 |       expect(response.status()).toBe(400);
          |                                 ^
      787 |     });
      788 |
      789 |     test("[P1] DELETE /api/clients/:clientId - should reject invalid UUID format", async ({
        at c:\bmad\tests\api\client-management.api.spec.ts:786:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--756ff--reject-invalid-UUID-format-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--756ff--reject-invalid-UUID-format-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  132) [api] › tests\api\client-management.api.spec.ts:789:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] DELETE /api/clients/:clientId - should reject invalid UUID format 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m404[39m

      796 |
      797 |       // THEN: Bad request error is returned
    > 798 |       expect(response.status()).toBe(400);
          |                                 ^
      799 |     });
      800 |   });
      801 | });
        at c:\bmad\tests\api\client-management.api.spec.ts:798:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--b3743--reject-invalid-UUID-format-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--b3743--reject-invalid-UUID-format-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  133) [api] › tests\api\client-management.api.spec.ts:940:7 › Client Management API - Public ID Support › [P0] POST /api/clients - should auto-generate valid public_id 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m400[39m

      950 |
      951 |     // THEN: Response includes valid public_id
    > 952 |     expect(response.status()).toBe(201);
          |                               ^
      953 |     const body = await response.json();
      954 |
      955 |     expect(body.data).toHaveProperty("public_id");
        at c:\bmad\tests\api\client-management.api.spec.ts:952:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--a87e4-to-generate-valid-public-id-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--a87e4-to-generate-valid-public-id-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  134) [api] › tests\api\client-management.api.spec.ts:972:7 › Client Management API - Public ID Support › [P0] POST /api/clients - should generate unique public_ids for multiple clients 

    TypeError: Cannot read properties of undefined (reading 'public_id')

       995 |     // THEN: All public_ids are unique
       996 |     const bodies = await Promise.all(responses.map((r) => r.json()));
    >  997 |     const publicIds = bodies.map((b) => b.data.public_id);
           |                                                ^
       998 |     const uniqueIds = new Set(publicIds);
       999 |
      1000 |     expect(uniqueIds.size).toBe(3);
        at map (c:\bmad\tests\api\client-management.api.spec.ts:997:48)
        at c:\bmad\tests\api\client-management.api.spec.ts:997:30

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--042b4-ic-ids-for-multiple-clients-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--042b4-ic-ids-for-multiple-clients-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  135) [api] › tests\api\client-management.api.spec.ts:1117:7 › Client Management API - Dual ID Format Support (PUT) › [P0] PUT /api/clients/:id - should update via UUID (backward compatibility) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m404[39m

      1131 |
      1132 |     // THEN: Update succeeds
    > 1133 |     expect(response.status()).toBe(200);
           |                               ^
      1134 |     const body = await response.json();
      1135 |     expect(body.success).toBe(true);
      1136 |     expect(body.data.name).toBe("Updated via UUID");
        at c:\bmad\tests\api\client-management.api.spec.ts:1133:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--c75f6-UID-backward-compatibility--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--c75f6-UID-backward-compatibility--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  136) [api] › tests\api\client-management.api.spec.ts:1145:7 › Client Management API - Dual ID Format Support (PUT) › [P0] PUT /api/clients/:id - should update via public_id (new standard) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m404[39m

      1159 |
      1160 |     // THEN: Update succeeds
    > 1161 |     expect(response.status()).toBe(200);
           |                               ^
      1162 |     const body = await response.json();
      1163 |     expect(body.success).toBe(true);
      1164 |     expect(body.data.name).toBe("Updated via Public ID");
        at c:\bmad\tests\api\client-management.api.spec.ts:1161:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--d66dd-via-public-id-new-standard--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--d66dd-via-public-id-new-standard--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  137) [api] › tests\api\client-management.api.spec.ts:1190:7 › Client Management API - Dual ID Format Support (DELETE) › [P0] DELETE /api/clients/:id - should delete via UUID (backward compatibility) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m404[39m

      1203 |
      1204 |     // THEN: Deletion succeeds
    > 1205 |     expect(response.status()).toBe(200);
           |                               ^
      1206 |     const body = await response.json();
      1207 |     expect(body.success).toBe(true);
      1208 |
        at c:\bmad\tests\api\client-management.api.spec.ts:1205:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--047f8-UID-backward-compatibility--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--047f8-UID-backward-compatibility--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  138) [api] › tests\api\client-management.api.spec.ts:1216:7 › Client Management API - Dual ID Format Support (DELETE) › [P0] DELETE /api/clients/:id - should delete via public_id (new standard) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m404[39m

      1232 |
      1233 |     // THEN: Deletion succeeds
    > 1234 |     expect(response.status()).toBe(200);
           |                               ^
      1235 |     const body = await response.json();
      1236 |     expect(body.success).toBe(true);
      1237 |
        at c:\bmad\tests\api\client-management.api.spec.ts:1234:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-client-management.api--e3cbe-via-public-id-new-standard--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-client-management.api--e3cbe-via-public-id-new-standard--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  139) [api] › tests\api\edge-cases.api.spec.ts:35:7 › EDGE-API-001: Edge Cases - Empty and Null Values › [P2] EDGE-API-001-002: POST /api/users with empty body should return 400 or 404 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m401[39m
    Received array: [31m[400, 404][39m

      44 |     // THEN: Response is 400 Bad Request or 404 Not Found
      45 |     // Note: Depends on endpoint implementation
    > 46 |     expect([400, 404]).toContain(response.status());
         |                        ^
      47 |   });
      48 | });
      49 |
        at c:\bmad\tests\api\edge-cases.api.spec.ts:46:24

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-edge-cases.api-EDGE-AP-cf293-dy-should-return-400-or-404-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-edge-cases.api-EDGE-AP-cf293-dy-should-return-400-or-404-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  140) [api] › tests\api\error-handling.api.spec.ts:100:7 › ERR-API-003: Error Handling - Malformed Requests › [P1] ERR-API-003-001: POST /api/users with invalid JSON should return 400 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m500[39m
    Received array: [31m[400, 403][39m

      111 |     // THEN: Response is 400 Bad Request (after passing auth middleware)
      112 |     // Note: May return 403 if wildcard permission not recognized (backend restart needed)
    > 113 |     expect([400, 403]).toContain(response.status());
          |                        ^
      114 |   });
      115 |
      116 |   test("[P1] ERR-API-003-002: POST /api/users with missing Content-Type should handle gracefully", async ({
        at c:\bmad\tests\api\error-handling.api.spec.ts:113:24

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-error-handling.api-ERR-54a53-alid-JSON-should-return-400-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-error-handling.api-ERR-54a53-alid-JSON-should-return-400-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  141) [api] › tests\api\error-handling.api.spec.ts:116:7 › ERR-API-003: Error Handling - Malformed Requests › [P1] ERR-API-003-002: POST /api/users with missing Content-Type should handle gracefully 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m201[39m
    Received array: [31m[400, 403, 404][39m

      132 |     // Note: Fastify may auto-parse JSON, but missing header should be handled
      133 |     // May return 403 if wildcard permission not recognized (backend restart needed)
    > 134 |     expect([400, 403, 404]).toContain(response.status());
          |                             ^
      135 |   });
      136 | });
      137 |
        at c:\bmad\tests\api\error-handling.api.spec.ts:134:29

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-error-handling.api-ERR-95d9f-pe-should-handle-gracefully-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-error-handling.api-ERR-95d9f-pe-should-handle-gracefully-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  142) [api] › tests\api\jwt-token-system.api.spec.ts:190:7 › 1.6-API-002: JWT Token Validation Middleware › [P1] 1.6-API-002-007: Protected route should return 401 for token with missing required claims 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m401[39m
    Received: [31m404[39m

      209 |
      210 |     // THEN: Response is 401 Unauthorized
    > 211 |     expect(response1.status()).toBe(401);
          |                                ^
      212 |
      213 |     // WHEN: Protected endpoint is called with token missing email
      214 |     const response2 = await apiRequest.get("/api/user/profile", {
        at c:\bmad\tests\api\jwt-token-system.api.spec.ts:211:32

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-jwt-token-system.api-1-e8fca-ith-missing-required-claims-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-jwt-token-system.api-1-e8fca-ith-missing-required-claims-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  143) [api] › tests\api\jwt-token-system.api.spec.ts:384:7 › 1.6-API-003: Refresh Token Endpoint › [P0] 1.6-API-003-005: Refresh token should be rotated (old token invalidated, new token issued) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m401[39m
    Received: [31m200[39m

      435 |
      436 |     // THEN: Original token is rejected (401)
    > 437 |     expect(response2.status()).toBe(401);
          |                                ^
      438 |
      439 |     // AND: New refresh token from first call works
      440 |     const response3 = await apiRequest.post(
        at c:\bmad\tests\api\jwt-token-system.api.spec.ts:437:32

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-jwt-token-system.api-1-57547-validated-new-token-issued--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-jwt-token-system.api-1-57547-validated-new-token-issued--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  144) [api] › tests\api\jwt-token-system.api.spec.ts:680:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P0] 1.6-API-004-004: Multiple API requests should reuse refreshed token (no duplicate refresh) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m401[39m
    Received: [31m200[39m

      753 |       },
      754 |     );
    > 755 |     expect(oldRefreshRetry.status()).toBe(401); // Old token rejected
          |                                      ^
      756 |   });
      757 |
      758 |   test("[P0] 1.6-API-004-005: Session validation endpoint should reject expired tokens on app initialization", async ({
        at c:\bmad\tests\api\jwt-token-system.api.spec.ts:755:38

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-jwt-token-system.api-1-3923b-token-no-duplicate-refresh--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-jwt-token-system.api-1-3923b-token-no-duplicate-refresh--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  145) [api] › tests\api\jwt-token-system.api.spec.ts:820:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P1] 1.6-API-004-007: Refresh token rotation should prevent replay attacks 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m401[39m
    Received: [31m200[39m

      859 |
      860 |     // THEN: Replay attack is blocked with 401
    > 861 |     expect(replayAttempt.status()).toBe(401);
          |                                    ^
      862 |     const body = await replayAttempt.json();
      863 |     expect(body).toHaveProperty("error");
      864 |   });
        at c:\bmad\tests\api\jwt-token-system.api.spec.ts:861:36

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-jwt-token-system.api-1-cfc2b-ould-prevent-replay-attacks-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-jwt-token-system.api-1-cfc2b-ould-prevent-replay-attacks-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  146) [api] › tests\api\local-auth.api.spec.ts:17:9 › Local Authentication API › POST /api/auth/login › should login successfully with valid credentials 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m401[39m

      31 |         });
      32 |
    > 33 |         expect(response.status()).toBe(200);
         |                                   ^
      34 |
      35 |         const body = await response.json();
      36 |         expect(body.message).toBe("Login successful");
        at c:\bmad\tests\api\local-auth.api.spec.ts:33:35

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-local-auth.api-Local-A-5d00c-ully-with-valid-credentials-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-local-auth.api-Local-A-5d00c-ully-with-valid-credentials-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  147) [api] › tests\api\local-auth.api.spec.ts:91:9 › Local Authentication API › POST /api/auth/login › should return 401 for inactive user 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m"Account is inactive"[39m
    Received: [31m"Invalid email or password"[39m

      112 |         const body = await response.json();
      113 |         expect(body.error).toBe("Unauthorized");
    > 114 |         expect(body.message).toBe("Account is inactive");
          |                              ^
      115 |       } finally {
      116 |         await prismaClient.user.delete({ where: { user_id: user.user_id } });
      117 |       }
        at c:\bmad\tests\api\local-auth.api.spec.ts:114:30

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-local-auth.api-Local-A-d779e-eturn-401-for-inactive-user-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-local-auth.api-Local-A-d779e-eturn-401-for-inactive-user-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  148) [api] › tests\api\local-auth.api.spec.ts:120:9 › Local Authentication API › POST /api/auth/login › should return 401 for user without password set 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m"Password not set for this account"[39m
    Received: [31m"Invalid email or password"[39m

      136 |         const body = await response.json();
      137 |         expect(body.error).toBe("Unauthorized");
    > 138 |         expect(body.message).toBe("Password not set for this account");
          |                              ^
      139 |       } finally {
      140 |         await prismaClient.user.delete({ where: { user_id: user.user_id } });
      141 |       }
        at c:\bmad\tests\api\local-auth.api.spec.ts:138:30

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-local-auth.api-Local-A-80d7f-r-user-without-password-set-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-local-auth.api-Local-A-80d7f-r-user-without-password-set-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  149) [api] › tests\api\local-auth.api.spec.ts:197:9 › Local Authentication API › POST /api/auth/login › should include roles and permissions in JWT token 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m401[39m

      225 |         });
      226 |
    > 227 |         expect(response.status()).toBe(200);
          |                                   ^
      228 |
      229 |         // The JWT token should contain roles/permissions
      230 |         // We can verify by calling /api/auth/me with the cookie
        at c:\bmad\tests\api\local-auth.api.spec.ts:227:35

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-local-auth.api-Local-A-24eb9-nd-permissions-in-JWT-token-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-local-auth.api-Local-A-24eb9-nd-permissions-in-JWT-token-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  150) [api] › tests\api\local-auth.api.spec.ts:243:9 › Local Authentication API › POST /api/auth/logout › should logout and clear cookies 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m400[39m

      244 |       const response = await apiRequest.post("/api/auth/logout");
      245 |
    > 246 |       expect(response.status()).toBe(200);
          |                                 ^
      247 |
      248 |       const body = await response.json();
      249 |       expect(body.message).toBe("Logout successful");
        at c:\bmad\tests\api\local-auth.api.spec.ts:246:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-local-auth.api-Local-A-bc843-ld-logout-and-clear-cookies-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-local-auth.api-Local-A-bc843-ld-logout-and-clear-cookies-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  151) [api] › tests\api\local-auth.api.spec.ts:259:9 › Local Authentication API › POST /api/auth/logout › should succeed even without existing session 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m400[39m

      263 |       const response = await apiRequest.post("/api/auth/logout");
      264 |
    > 265 |       expect(response.status()).toBe(200);
          |                                 ^
      266 |
      267 |       const body = await response.json();
      268 |       expect(body.message).toBe("Logout successful");
        at c:\bmad\tests\api\local-auth.api.spec.ts:265:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-local-auth.api-Local-A-e752d-en-without-existing-session-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-local-auth.api-Local-A-e752d-en-without-existing-session-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  152) [api] › tests\api\local-auth.api.spec.ts:288:9 › Local Authentication API › GET /api/auth/me › should return 401 without token 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m"Unauthorized"[39m
    Received: [31m"Missing access token cookie"[39m

      292 |
      293 |       const body = await response.json();
    > 294 |       expect(body.error).toBe("Unauthorized");
          |                          ^
      295 |     });
      296 |
      297 |     test("should return 401 with invalid token", async ({
        at c:\bmad\tests\api\local-auth.api.spec.ts:294:26

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-local-auth.api-Local-A-818dc-ld-return-401-without-token-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-local-auth.api-Local-A-818dc-ld-return-401-without-token-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  153) [api] › tests\api\local-auth.api.spec.ts:313:9 › Local Authentication API › POST /api/auth/refresh › should return 401 without refresh token 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m401[39m
    Received: [31m400[39m

      314 |       const response = await apiRequest.post("/api/auth/refresh");
      315 |
    > 316 |       expect(response.status()).toBe(401);
          |                                 ^
      317 |
      318 |       const body = await response.json();
      319 |       expect(body.error).toBe("Unauthorized");
        at c:\bmad\tests\api\local-auth.api.spec.ts:316:33

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-local-auth.api-Local-A-d0d9b-n-401-without-refresh-token-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-local-auth.api-Local-A-d0d9b-n-401-without-refresh-token-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  154) [api] › tests\api\local-auth.api.spec.ts:325:9 › Local Authentication API › Full Authentication Flow › should complete full login -> access protected route -> logout flow 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m401[39m

      356 |         });
      357 |
    > 358 |         expect(loginResponse.status()).toBe(200);
          |                                        ^
      359 |
      360 |         // Extract cookies from login response
      361 |         const setCookies = loginResponse.headers()["set-cookie"];
        at c:\bmad\tests\api\local-auth.api.spec.ts:358:40

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-local-auth.api-Local-A-e5bb0-otected-route---logout-flow-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-local-auth.api-Local-A-e5bb0-otected-route---logout-flow-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  155) [api] › tests\api\rbac-framework.api.spec.ts:126:7 › RBAC Framework - Permission Checking › [P0] should check STORE scope permissions correctly 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m403[39m

      141 |
      142 |     // THEN: Access is granted
    > 143 |     expect(response.status()).toBe(200);
          |                               ^
      144 |   });
      145 |
      146 |   test("[P0] should deny STORE scope access to different store", async ({
        at c:\bmad\tests\api\rbac-framework.api.spec.ts:143:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-rbac-framework.api-RBA-2104b-scope-permissions-correctly-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-rbac-framework.api-RBA-2104b-scope-permissions-correctly-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  156) [api] › tests\api\rbac-framework.api.spec.ts:223:7 › RBAC Framework - Permission Checking › [P0] should handle multiple roles with different scopes 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m403[39m

      238 |
      239 |     // THEN: Access is granted
    > 240 |     expect(response.status()).toBe(200);
          |                               ^
      241 |   });
      242 | });
      243 |
        at c:\bmad\tests\api\rbac-framework.api.spec.ts:240:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-rbac-framework.api-RBA-e257d-roles-with-different-scopes-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-rbac-framework.api-RBA-e257d-roles-with-different-scopes-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  157) [api] › tests\api\rls-policies.api.spec.ts:1373:7 › RLS Policies - Security Tests › 2.3-API-028: [P0] should prevent comment-based SQL injection in RLS context 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mrejects[2m.[22mtoThrow[2m()[22m

    Received promise resolved instead of rejected
    Resolved to value: [31m0[39m

      1388 |
      1389 |     // THEN: SQL injection should be prevented (either sanitized or error thrown)
    > 1390 |     await expect(
           |                 ^
      1391 |       prismaClient.$executeRawUnsafe(
      1392 |         `SET LOCAL app.current_user_id = '${maliciousUserId}'`,
      1393 |       ),
        at c:\bmad\tests\api\rls-policies.api.spec.ts:1390:17

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-rls-policies.api-RLS-P-4214b-QL-injection-in-RLS-context-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-rls-policies.api-RLS-P-4214b-QL-injection-in-RLS-context-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  158) [api] › tests\api\rls-policies.api.spec.ts:1413:7 › RLS Policies - Context Isolation › 2.3-API-029: [P1] should properly clear RLS context after reset 

    PrismaClientUnknownRequestError: 
    Invalid `rlsPrismaClient.company.findMany()` invocation in
    c:\bmad\tests\api\rls-policies.api.spec.ts:1443:54

      1440 await clearRLSContext(rlsPrismaClient);
      1441 
      1442 // THEN: User should see nothing (no context = no access)
    → 1443 const afterClear = await rlsPrismaClient.company.findMany(
    Error occurred during query execution:
    ConnectorError(ConnectorError { user_facing_error: None, kind: QueryError(PostgresError { code: "22P02", message: "invalid input syntax for type uuid: \"\"", severity: "ERROR", detail: None, column: None, hint: None }), transient: false })

      1441 |
      1442 |     // THEN: User should see nothing (no context = no access)
    > 1443 |     const afterClear = await rlsPrismaClient.company.findMany({
           |                                                      ^
      1444 |       where: { company_id: { in: companies.map((c) => c.company_id) } },
      1445 |     });
      1446 |     expect(
        at c:\bmad\tests\api\rls-policies.api.spec.ts:1443:54
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7458)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\api\rls-policies.api.spec.ts:1443:24

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-rls-policies.api-RLS-P-c4faa-ear-RLS-context-after-reset-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-rls-policies.api-RLS-P-c4faa-ear-RLS-context-after-reset-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  159) [api] › tests\api\store-management.api.spec.ts:124:7 › Store Management API - CRUD Operations › 2.2-API-003: [P0] POST /api/companies/:companyId/stores - should reject invalid timezone 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m201[39m

      137 |     );
      138 |
    > 139 |     expect(response.status()).toBe(400);
          |                               ^
      140 |     const body = await response.json();
      141 |     expect(body).toHaveProperty("error");
      142 |   });
        at c:\bmad\tests\api\store-management.api.spec.ts:139:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-27eaf-uld-reject-invalid-timezone-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-27eaf-uld-reject-invalid-timezone-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  160) [api] › tests\api\store-management.api.spec.ts:298:7 › Store Management API - CRUD Operations › 2.2-API-009: [P0] PUT /api/stores/:storeId - should update store 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value:  [32m"Original Name"[39m
    Received object: [31m{"company_id": "d71a8d28-8eaf-409f-99d5-b670731cc68c", "configuration": null, "created_at": "2025-11-21T20:24:15.405Z", "location_json": {"address": "4416 S High Street", "gps": {"lat": -74.0942, "lng": 76.3282}}, "name": "Original Name", "public_id": "str_dltca594gpm59oyyuwg5vg4w", "status": "ACTIVE", "store_id": "7d628de2-4f58-43ee-9076-ff6b0bb9582d", "timezone": "America/New_York", "updated_at": "2025-11-21T20:24:15.405Z"}[39m

      336 |     });
      337 |     expect(auditLog).not.toBeNull();
    > 338 |     expect(auditLog?.old_values).toContain("Original Name");
          |                                  ^
      339 |     expect(auditLog?.new_values).toContain("Updated Name");
      340 |   });
      341 |
        at c:\bmad\tests\api\store-management.api.spec.ts:338:34

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-1c45f-oreId---should-update-store-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-1c45f-oreId---should-update-store-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  161) [api] › tests\api\store-management.api.spec.ts:372:7 › Store Management API - CRUD Operations › 2.2-API-011: [P0] DELETE /api/stores/:storeId - should soft delete store 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m"INACTIVE"[39m
    Received: [31m"CLOSED"[39m

      399 |     });
      400 |     expect(deletedStore).not.toBeNull(); // Still exists
    > 401 |     expect(deletedStore?.status).toBe("INACTIVE"); // Status changed
          |                                  ^
      402 |
      403 |     // AND: Audit log created
      404 |     const auditLog = await prismaClient.auditLog.findFirst({
        at c:\bmad\tests\api\store-management.api.spec.ts:401:34

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-edda5----should-soft-delete-store-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-edda5----should-soft-delete-store-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  162) [api] › tests\api\store-management.api.spec.ts:557:7 › Store Management API - Error Handling › 2.2-API-017: [P0] should return 404 for non-existent store 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m404[39m
    Received: [31m403[39m

      565 |
      566 |     // THEN: 404 Not Found
    > 567 |     expect(response.status()).toBe(404);
          |                               ^
      568 |   });
      569 |
      570 |   test("2.2-API-018: [P0] should return 400 for invalid location_json structure", async ({
        at c:\bmad\tests\api\store-management.api.spec.ts:567:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-2da81--404-for-non-existent-store-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-2da81--404-for-non-existent-store-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  163) [api] › tests\api\store-management.api.spec.ts:771:7 › Store Management API - Validation (P1) › 2.2-API-027: [P1] should reject creation when company does not exist 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m403[39m

      780 |     );
      781 |
    > 782 |     expect(response.status()).toBe(400);
          |                               ^
      783 |   });
      784 |
      785 |   test("2.2-API-028: [P1] should update only name field", async ({
        at c:\bmad\tests\api\store-management.api.spec.ts:782:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-63200-when-company-does-not-exist-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-63200-when-company-does-not-exist-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  164) [api] › tests\api\store-management.api.spec.ts:859:7 › Store Configuration API › 2.5-API-001: [P0] PUT /api/stores/:storeId/configuration - should update store configuration with valid data 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoMatchObject[2m([22m[32mexpected[39m[2m)[22m

    [32m- Expected  - 23[39m
    [31m+ Received  +  1[39m

    [32m- Object {[39m
    [32m-   "location": Object {[39m
    [32m-     "address": "456 Test Ave",[39m
    [32m-     "gps": Object {[39m
    [32m-       "lat": 34.0522,[39m
    [32m-       "lng": -118.2437,[39m
    [32m-     },[39m
    [32m-   },[39m
    [32m-   "operating_hours": Object {[39m
    [32m-     "monday": Object {[39m
    [32m-       "close": "17:00",[39m
    [32m-       "open": "09:00",[39m
    [32m-     },[39m
    [32m-     "tuesday": Object {[39m
    [32m-       "close": "17:00",[39m
    [32m-       "open": "09:00",[39m
    [32m-     },[39m
    [32m-     "wednesday": Object {[39m
    [32m-       "closed": true,[39m
    [32m-     },[39m
    [32m-   },[39m
    [32m-   "timezone": "America/Los_Angeles",[39m
    [32m- }[39m
    [31m+ Object {}[39m

      895 |     const body = await response.json();
      896 |     expect(body).toHaveProperty("configuration");
    > 897 |     expect(body.configuration).toMatchObject(configurationData);
          |                                ^
      898 |
      899 |     // AND: Configuration is stored in database
      900 |     const updatedStore = await prismaClient.store.findUnique({
        at c:\bmad\tests\api\store-management.api.spec.ts:897:32

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-3adf8-nfiguration-with-valid-data-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-3adf8-nfiguration-with-valid-data-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  165) [api] › tests\api\store-management.api.spec.ts:923:7 › Store Configuration API › 2.5-API-002: [P0] PUT /api/stores/:storeId/configuration - should validate timezone format 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m400[39m
    Received: [31m200[39m

      944 |
      945 |     // THEN: Validation error is returned
    > 946 |     expect(response.status()).toBe(400);
          |                               ^
      947 |     const body = await response.json();
      948 |     expect(body).toHaveProperty("error", "Validation error");
      949 |     expect(body.message).toContain("timezone");
        at c:\bmad\tests\api\store-management.api.spec.ts:946:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-28955-ld-validate-timezone-format-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-28955-ld-validate-timezone-format-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  166) [api] › tests\api\store-management.api.spec.ts:1015:7 › Store Configuration API › 2.5-API-005: [P0] PUT /api/stores/:storeId/configuration - should enforce company isolation 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected substring: [32m"assigned company"[39m
    Received string:    [31m"Permission denied: STORE_UPDATE is required"[39m

      1072 |     const body = await response.json();
      1073 |     expect(body).toHaveProperty("error", "Forbidden");
    > 1074 |     expect(body.message).toContain("assigned company");
           |                          ^
      1075 |
      1076 |     // Cleanup
      1077 |     await prismaClient.userRole.deleteMany({
        at c:\bmad\tests\api\store-management.api.spec.ts:1074:26

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-79711-d-enforce-company-isolation-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-79711-d-enforce-company-isolation-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  167) [api] › tests\api\store-management.api.spec.ts:1086:7 › Store Configuration API › 2.5-API-006: [P0] PUT /api/stores/:storeId/configuration - should return 404 for non-existent store 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m404[39m
    Received: [31m403[39m

      1099 |
      1100 |     // THEN: Not found error is returned
    > 1101 |     expect(response.status()).toBe(404);
           |                               ^
      1102 |     const body = await response.json();
      1103 |     expect(body).toHaveProperty("error", "Not found");
      1104 |   });
        at c:\bmad\tests\api\store-management.api.spec.ts:1101:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-efd46--404-for-non-existent-store-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-efd46--404-for-non-existent-store-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  168) [api] › tests\api\store-management.api.spec.ts:1110:7 › Store Configuration API › 2.5-API-007: [P0] PUT /api/stores/:storeId/configuration - should enforce US standard operating hours format 

    TypeError: Cannot read properties of undefined (reading 'monday')

      1136 |     expect(response.status()).toBe(200);
      1137 |     const body = await response.json();
    > 1138 |     expect(body.configuration.operating_hours.monday.open).toBe("09:00");
           |                                               ^
      1139 |     expect(body.configuration.operating_hours.monday.close).toBe("17:00");
      1140 |   });
      1141 |
        at c:\bmad\tests\api\store-management.api.spec.ts:1138:47

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-e2099-dard-operating-hours-format-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-e2099-dard-operating-hours-format-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  169) [api] › tests\api\store-management.api.spec.ts:1492:7 › Store Configuration API › 2.5-API-020: [P0] SECURITY - should reject XSS in address field 

    TypeError: Cannot read properties of undefined (reading 'address')

      1521 |       const body = await response.json();
      1522 |       // If stored, verify it's sanitized (no script tags in response)
    > 1523 |       expect(JSON.stringify(body.configuration.location.address)).not.toContain(
           |                                                         ^
      1524 |         "<script>",
      1525 |       );
      1526 |     }
        at c:\bmad\tests\api\store-management.api.spec.ts:1523:57

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-0a564-reject-XSS-in-address-field-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-0a564-reject-XSS-in-address-field-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  170) [api] › tests\api\store-management.api.spec.ts:1717:7 › Store Configuration API › 2.5-API-028: [P0] SECURITY - should reject mass assignment (additional fields beyond allowed) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m403[39m
    Received array: [31m[200, 400][39m

      1741 |
      1742 |     // THEN: Should accept but ignore/disallow additional fields
    > 1743 |     expect([200, 400]).toContain(response.status());
           |                        ^
      1744 |
      1745 |     if (response.status() === 200) {
      1746 |       const body = await response.json();
        at c:\bmad\tests\api\store-management.api.spec.ts:1743:24

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-store-management.api-S-c1f5b-onal-fields-beyond-allowed--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-store-management.api-S-c1f5b-onal-fields-beyond-allowed--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  171) [api] › tests\api\transaction-data-models.api.spec.ts:84:7 › Transaction Data Models - CRUD Operations › [P0] should create Transaction with all required fields 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-6d6e3-on-with-all-required-fields-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-6d6e3-on-with-all-required-fields-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  172) [api] › tests\api\transaction-data-models.api.spec.ts:146:7 › Transaction Data Models - CRUD Operations › [P0] should create TransactionLineItems linked to Transaction 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-5fda6-Items-linked-to-Transaction-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-5fda6-Items-linked-to-Transaction-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  173) [api] › tests\api\transaction-data-models.api.spec.ts:209:7 › Transaction Data Models - CRUD Operations › [P0] should create TransactionPayments linked to Transaction 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-0a2c3-ments-linked-to-Transaction-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-0a2c3-ments-linked-to-Transaction-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  174) [api] › tests\api\transaction-data-models.api.spec.ts:361:7 › Transaction Data Models - Query Operations › [P1] should query transactions by store_id 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-d4cd8-ry-transactions-by-store-id-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-d4cd8-ry-transactions-by-store-id-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  175) [api] › tests\api\transaction-data-models.api.spec.ts:406:7 › Transaction Data Models - Query Operations › [P1] should query transactions by shift_id 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-2cf65-ry-transactions-by-shift-id-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-2cf65-ry-transactions-by-shift-id-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  176) [api] › tests\api\transaction-data-models.api.spec.ts:470:7 › Transaction Data Models - Query Operations › [P1] should query transactions by timestamp range 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-9b377-sactions-by-timestamp-range-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-9b377-sactions-by-timestamp-range-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  177) [api] › tests\api\transaction-data-models.api.spec.ts:517:7 › Transaction Data Models - Query Operations › [P1] should load transaction with line items and payments (relationships) 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-54e5b-and-payments-relationships--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-54e5b-and-payments-relationships--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  178) [api] › tests\api\transaction-data-models.api.spec.ts:593:7 › Transaction Data Models - Business Logic › [P2] should verify transaction total matches formula: subtotal + tax - discount 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-1b870-ula-subtotal-tax---discount-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-1b870-ula-subtotal-tax---discount-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  179) [api] › tests\api\transaction-data-models.api.spec.ts:630:7 › Transaction Data Models - Business Logic › [P2] should verify transaction total matches line items sum 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-fe1bc-otal-matches-line-items-sum-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-fe1bc-otal-matches-line-items-sum-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  180) [api] › tests\api\transaction-data-models.api.spec.ts:693:7 › Transaction Data Models - Business Logic › [P2] should allow negative totals for refund transactions 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-e4e10-als-for-refund-transactions-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-e4e10-als-for-refund-transactions-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  181) [api] › tests\api\transaction-data-models.api.spec.ts:733:7 › Transaction Data Models - Business Logic › [P2] should allow multiple payments per transaction (split tender) 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-c9ffa-r-transaction-split-tender--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-c9ffa-r-transaction-split-tender--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  182) [api] › tests\api\transaction-data-models.api.spec.ts:790:7 › Transaction Data Models - Business Logic › [P2] should allow overpayment (customer pays more, receives change) 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-39f0c--pays-more-receives-change--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-39f0c--pays-more-receives-change--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  183) [api] › tests\api\transaction-data-models.api.spec.ts:854:7 › Transaction Data Models - Edge Cases › [P2] should handle zero values for subtotal, tax, discount 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-a55b7-s-for-subtotal-tax-discount-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-a55b7-s-for-subtotal-tax-discount-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  184) [api] › tests\api\transaction-data-models.api.spec.ts:884:7 › Transaction Data Models - Edge Cases › [P2] should handle very large transaction amounts 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-e29aa-y-large-transaction-amounts-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-e29aa-y-large-transaction-amounts-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  185) [api] › tests\api\transaction-data-models.api.spec.ts:918:7 › Transaction Data Models - Edge Cases › [P2] should handle decimal precision correctly 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-a32c3-decimal-precision-correctly-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-a32c3-decimal-precision-correctly-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  186) [api] › tests\api\transaction-data-models.api.spec.ts:958:7 › Transaction Data Models - Edge Cases › [P2] should handle zero quantity line items 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-73aa7-le-zero-quantity-line-items-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-73aa7-le-zero-quantity-line-items-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  187) [api] › tests\api\transaction-data-models.api.spec.ts:998:7 › Transaction Data Models - Edge Cases › [P2] should handle negative quantity line items (returns) 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-691a9-uantity-line-items-returns--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-691a9-uantity-line-items-returns--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  188) [api] › tests\api\transaction-data-models.api.spec.ts:1045:7 › Transaction Data Models - Edge Cases › [P2] should handle very large quantities 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-acfdd-andle-very-large-quantities-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-acfdd-andle-very-large-quantities-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  189) [api] › tests\api\transaction-data-models.api.spec.ts:1189:7 › Transaction Data Models - Security › [P1] should prevent creating transactions in unauthorized stores 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.user.delete()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:468:37

      465   where: { user_id: user.user_id },
      466 });
      467 // 3. Delete user
    → 468 await bypassClient.user.delete(
    Foreign key constraint violated on the constraint: `transactions_cashier_id_fkey`

       at support\fixtures\rbac.fixture.ts:468

      466 |       });
      467 |       // 3. Delete user
    > 468 |       await bypassClient.user.delete({ where: { user_id: user.user_id } });
          |                                     ^
      469 |       // 4. Delete company last
      470 |       await bypassClient.company.delete({
      471 |         where: { company_id: company.company_id },
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:468:37
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:468:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-a9cd1-ions-in-unauthorized-stores-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-a9cd1-ions-in-unauthorized-stores-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  190) [api] › tests\api\transaction-data-models.api.spec.ts:1255:7 › Transaction Data Models - Security › [P1] should handle SQL injection attempts in string fields 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-2c8f8-n-attempts-in-string-fields-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-2c8f8-n-attempts-in-string-fields-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  191) [api] › tests\api\transaction-data-models.api.spec.ts:1306:7 › Transaction Data Models - Security › [P1] should handle XSS attempts in reference fields 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-cf720-ttempts-in-reference-fields-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-cf720-ttempts-in-reference-fields-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  192) [api] › tests\api\transaction-data-models.api.spec.ts:1348:7 › Transaction Data Models - Security › [P2] should validate payment method string length 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-99154-ayment-method-string-length-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-99154-ayment-method-string-length-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  193) [api] › tests\api\transaction-data-models.api.spec.ts:1393:7 › Transaction Data Models - Shift Rules › [P1] should not allow transactions on closed shifts 

    PrismaClientKnownRequestError: 
    Invalid `bypassClient.shift.deleteMany()` invocation in
    c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32

      457 // Delete in correct order to respect foreign key constraints
      458 await withBypassClient(async (bypassClient) => {
      459   // 1. Delete shifts first (references user via cashier_id)
    → 460   await bypassClient.shift.deleteMany(
    Foreign key constraint violated on the constraint: `transactions_shift_id_fkey`

       at support\fixtures\rbac.fixture.ts:460

      458 |     await withBypassClient(async (bypassClient) => {
      459 |       // 1. Delete shifts first (references user via cashier_id)
    > 460 |       await bypassClient.shift.deleteMany({
          |                                ^
      461 |         where: { cashier_id: user.user_id },
      462 |       });
      463 |       // 2. Delete user roles
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:32
        at ei.handleRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:7268)
        at ei.handleAndLogRequestError (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6593)
        at ei.request (c:\bmad\node_modules\.prisma\client\runtime\library.js:125:6300)
        at a (c:\bmad\node_modules\.prisma\client\runtime\library.js:134:9551)
        at c:\bmad\tests\support\fixtures\rbac.fixture.ts:460:7
        at withBypassClient (c:\bmad\tests\support\prisma-bypass.ts:43:12)
        at Object.corporateAdminUser (c:\bmad\tests\support\fixtures\rbac.fixture.ts:458:5)

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-data-model-be608-ansactions-on-closed-shifts-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-data-model-be608-ansactions-on-closed-shifts-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  194) [api] › tests\api\transaction-import.api.spec.ts:79:7 › Transaction Import API - Authentication › 3.2-API-001: [P0] should return 401 when JWT token is missing 

    Error: Response should indicate failure

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mfalse[39m
    Received: [31mundefined[39m

       95 |     expect(response.status(), "Should return 401 for missing token").toBe(401);
       96 |     const body = await response.json();
    >  97 |     expect(body.success, "Response should indicate failure").toBe(false);
          |                                                              ^
       98 |     expect(body.error.code, "Error code should be UNAUTHORIZED").toBe(
       99 |       "UNAUTHORIZED",
      100 |     );
        at c:\bmad\tests\api\transaction-import.api.spec.ts:97:62

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-056e7-1-when-JWT-token-is-missing-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-056e7-1-when-JWT-token-is-missing-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  195) [api] › tests\api\transaction-import.api.spec.ts:103:7 › Transaction Import API - Authentication › 3.2-API-002: [P0] should return 401 when JWT token is invalid 

    Error: Response should indicate failure

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mfalse[39m
    Received: [31mundefined[39m

      120 |     expect(response.status(), "Should return 401 for invalid token").toBe(401);
      121 |     const body = await response.json();
    > 122 |     expect(body.success, "Response should indicate failure").toBe(false);
          |                                                              ^
      123 |   });
      124 |
      125 |   test("3.2-API-003: [P0] should return 403 when user lacks TRANSACTION_CREATE permission", async ({
        at c:\bmad\tests\api\transaction-import.api.spec.ts:122:62

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-daf50-1-when-JWT-token-is-invalid-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-daf50-1-when-JWT-token-is-invalid-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  196) [api] › tests\api\transaction-import.api.spec.ts:125:7 › Transaction Import API - Authentication › 3.2-API-003: [P0] should return 403 when user lacks TRANSACTION_CREATE permission 

    Error: Should return 403 (permission denied) or 404 (endpoint not found)

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[403, 404][39m

      152 |       [403, 404],
      153 |       "Should return 403 (permission denied) or 404 (endpoint not found)",
    > 154 |     ).toContain(response.status());
          |       ^
      155 |   });
      156 |
      157 |   test("3.2-API-004: [P0] should return 403 when store_id is not accessible to user", async ({
        at c:\bmad\tests\api\transaction-import.api.spec.ts:154:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-eddf8-ANSACTION-CREATE-permission-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-eddf8-ANSACTION-CREATE-permission-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  197) [api] › tests\api\transaction-import.api.spec.ts:157:7 › Transaction Import API - Authentication › 3.2-API-004: [P0] should return 403 when store_id is not accessible to user 

    Error: Should return 403 (permission denied) or 404 (endpoint not found)

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[403, 404][39m

      199 |       [403, 404],
      200 |       "Should return 403 (permission denied) or 404 (endpoint not found)",
    > 201 |     ).toContain(response.status());
          |       ^
      202 |   });
      203 | });
      204 |
        at c:\bmad\tests\api\transaction-import.api.spec.ts:201:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-4c765-d-is-not-accessible-to-user-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-4c765-d-is-not-accessible-to-user-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  198) [api] › tests\api\transaction-import.api.spec.ts:210:7 › Transaction Import API - Core Functionality › 3.2-API-005: [P1] should return 202 Accepted with correlation_id for valid transaction 

    Error: Should return 202 Accepted for valid transaction

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m202[39m
    Received: [31m400[39m

      234 |       response.status(),
      235 |       "Should return 202 Accepted for valid transaction",
    > 236 |     ).toBe(202);
          |       ^
      237 |     const body = await response.json();
      238 |     expect(body.success, "Response should indicate success").toBe(true);
      239 |     expect(
        at c:\bmad\tests\api\transaction-import.api.spec.ts:236:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-473db-on-id-for-valid-transaction-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-473db-on-id-for-valid-transaction-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  199) [api] › tests\api\transaction-import.api.spec.ts:246:7 › Transaction Import API - Core Functionality › 3.2-API-006: [P1] should return valid UUID format for correlation_id 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoMatch[2m([22m[32mexpected[39m[2m)[22m

    [1mMatcher error[22m: [31mreceived[39m value must be a string

    Received has value: [31mundefined[39m

      273 |       body.data?.correlation_id,
      274 |       "correlation_id should be valid UUID format",
    > 275 |     ).toMatch(uuidRegex);
          |       ^
      276 |   });
      277 |
      278 |   test("3.2-API-007: [P1] should return 404 when shift_id does not exist", async ({
        at c:\bmad\tests\api\transaction-import.api.spec.ts:275:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-be19d-D-format-for-correlation-id-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-be19d-D-format-for-correlation-id-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  200) [api] › tests\api\transaction-import.api.spec.ts:278:7 › Transaction Import API - Core Functionality › 3.2-API-007: [P1] should return 404 when shift_id does not exist 

    Error: Should return 404 for non-existent shift_id

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[404][39m

      300 |
      301 |     // THEN: Should return 404 Not Found
    > 302 |     expect([404], "Should return 404 for non-existent shift_id").toContain(
          |                                                                  ^
      303 |       response.status(),
      304 |     );
      305 |     const body = await response.json();
        at c:\bmad\tests\api\transaction-import.api.spec.ts:302:66

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-d32d5-hen-shift-id-does-not-exist-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-d32d5-hen-shift-id-does-not-exist-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  201) [api] › tests\api\transaction-import.api.spec.ts:309:7 › Transaction Import API - Core Functionality › 3.2-API-008: [P1] should return 409 when shift is CLOSED 

    Error: Should return 409 for closed shift or 404 if endpoint not found

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[409, 404][39m

      344 |       [409, 404],
      345 |       "Should return 409 for closed shift or 404 if endpoint not found",
    > 346 |     ).toContain(response.status());
          |       ^
      347 |   });
      348 |
      349 |   test("3.2-API-009: [P1] should enqueue message to RabbitMQ transactions.processing queue", async ({
        at c:\bmad\tests\api\transaction-import.api.spec.ts:346:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-f6555-rn-409-when-shift-is-CLOSED-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-f6555-rn-409-when-shift-is-CLOSED-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  202) [api] › tests\api\transaction-import.api.spec.ts:349:7 › Transaction Import API - Core Functionality › 3.2-API-009: [P1] should enqueue message to RabbitMQ transactions.processing queue 

    Error: Should return 202 (enqueued) or 404 (endpoint not found)

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[202, 404][39m

      374 |       [202, 404],
      375 |       "Should return 202 (enqueued) or 404 (endpoint not found)",
    > 376 |     ).toContain(response.status());
          |       ^
      377 |   });
      378 |
      379 |   test("3.2-API-010: [P1] should return 503 when RabbitMQ connection fails", async ({
        at c:\bmad\tests\api\transaction-import.api.spec.ts:376:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-3e63f-ansactions-processing-queue-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-3e63f-ansactions-processing-queue-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  203) [api] › tests\api\transaction-import.api.spec.ts:379:7 › Transaction Import API - Core Functionality › 3.2-API-010: [P1] should return 503 when RabbitMQ connection fails 

    Error: Should return 202 (success), 503 (queue down), or 404 (not implemented)

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[202, 503, 404][39m

      406 |       [202, 503, 404],
      407 |       "Should return 202 (success), 503 (queue down), or 404 (not implemented)",
    > 408 |     ).toContain(response.status());
          |       ^
      409 |   });
      410 | });
      411 |
        at c:\bmad\tests\api\transaction-import.api.spec.ts:408:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-41836-n-RabbitMQ-connection-fails-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-41836-n-RabbitMQ-connection-fails-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  204) [api] › tests\api\transaction-import.api.spec.ts:451:7 › Transaction Import API - Validation › 3.2-API-012: [P2] should accept single item transaction 

    Error: Should return 202 for valid single item or 404 if not implemented

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[202, 404][39m

      486 |       [202, 404],
      487 |       "Should return 202 for valid single item or 404 if not implemented",
    > 488 |     ).toContain(response.status());
          |       ^
      489 |   });
      490 |
      491 |   test("3.2-API-013: [P3] should handle large number of line items (100+)", async ({
        at c:\bmad\tests\api\transaction-import.api.spec.ts:488:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-576c0-ept-single-item-transaction-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-576c0-ept-single-item-transaction-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  205) [api] › tests\api\transaction-import.api.spec.ts:491:7 › Transaction Import API - Validation › 3.2-API-013: [P3] should handle large number of line items (100+) 

    Error: Should return 202 for large transaction or 404 if not implemented

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[202, 404][39m

      526 |       [202, 404],
      527 |       "Should return 202 for large transaction or 404 if not implemented",
    > 528 |     ).toContain(response.status());
          |       ^
      529 |   });
      530 |
      531 |   test("3.2-API-014: [P2] should return 400 when line item quantity is zero", async ({
        at c:\bmad\tests\api\transaction-import.api.spec.ts:528:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-8351b-e-number-of-line-items-100--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-8351b-e-number-of-line-items-100--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  206) [api] › tests\api\transaction-import.api.spec.ts:716:7 › Transaction Import API - Validation › 3.2-API-019: [P2] should accept multiple payments (split payment) 

    Error: Should return 202 for split payment or 404 if not implemented

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[202, 404][39m

      747 |       [202, 404],
      748 |       "Should return 202 for split payment or 404 if not implemented",
    > 749 |     ).toContain(response.status());
          |       ^
      750 |   });
      751 |
      752 |   test("3.2-API-020: [P2] should accept exact payment match", async ({
        at c:\bmad\tests\api\transaction-import.api.spec.ts:749:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-94379-ple-payments-split-payment--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-94379-ple-payments-split-payment--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  207) [api] › tests\api\transaction-import.api.spec.ts:752:7 › Transaction Import API - Validation › 3.2-API-020: [P2] should accept exact payment match 

    Error: Should return 202 for exact payment or 404 if not implemented

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[202, 404][39m

      780 |       [202, 404],
      781 |       "Should return 202 for exact payment or 404 if not implemented",
    > 782 |     ).toContain(response.status());
          |       ^
      783 |   });
      784 |
      785 |   test("3.2-API-021: [P2] should accept overpayment (change scenario)", async ({
        at c:\bmad\tests\api\transaction-import.api.spec.ts:782:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-46d81--accept-exact-payment-match-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-46d81--accept-exact-payment-match-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  208) [api] › tests\api\transaction-import.api.spec.ts:785:7 › Transaction Import API - Validation › 3.2-API-021: [P2] should accept overpayment (change scenario) 

    Error: Should return 202 for overpayment or 404 if not implemented

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[202, 404][39m

      813 |       [202, 404],
      814 |       "Should return 202 for overpayment or 404 if not implemented",
    > 815 |     ).toContain(response.status());
          |       ^
      816 |   });
      817 |
      818 |   test("3.2-API-022: [P2] should return 400 when payment amount is zero", async ({
        at c:\bmad\tests\api\transaction-import.api.spec.ts:815:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-13393-verpayment-change-scenario--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-13393-verpayment-change-scenario--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  209) [api] › tests\api\transaction-import.api.spec.ts:950:7 › Transaction Import API - Validation › 3.2-API-026: [P3] should handle very large transaction amounts (1,000,000+) 

    Error: Should return 202 for large amount or 404 if not implemented

    [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m400[39m
    Received array: [31m[202, 404][39m

      986 |       [202, 404],
      987 |       "Should return 202 for large amount or 404 if not implemented",
    > 988 |     ).toContain(response.status());
          |       ^
      989 |   });
      990 |
      991 |   test("3.2-API-027: [P3] should handle decimal precision correctly", async ({
        at c:\bmad\tests\api\transaction-import.api.spec.ts:988:7

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-36658-nsaction-amounts-1-000-000--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-36658-nsaction-amounts-1-000-000--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  210) [api] › tests\api\transaction-import.api.spec.ts:1068:7 › Transaction Import API - Validation › 3.2-API-029: [P2] should return 400 with details when required fields are missing 

    Error: Response should indicate failure

    [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mfalse[39m
    Received: [31mundefined[39m

      1090 |     if (response.status() === 400) {
      1091 |       const body = await response.json();
    > 1092 |       expect(body.success, "Response should indicate failure").toBe(false);
           |                                                                ^
      1093 |       expect(
      1094 |         body.error.details,
      1095 |         "Should include field-level error details",
        at c:\bmad\tests\api\transaction-import.api.spec.ts:1092:64

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-8462d-required-fields-are-missing-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-8462d-required-fields-are-missing-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  211) [api] › tests\api\transaction-import.api.spec.ts:1341:7 › Transaction Import API - Security › 3.2-API-036: [P1] should reject oversized payload 

    Error: apiRequestContext.post: read ECONNRESET
    Call log:
    [2m  - → POST http://localhost:3001/api/transactions[22m
    [2m    - user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.7390.37 Safari/537.36[22m
    [2m    - accept: */*[22m
    [2m    - accept-encoding: gzip,deflate,br[22m
    [2m    - Content-Type: application/json[22m
    [2m    - Cookie: access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiOGUzZDNkOTgtN2ZkOS00NjJlLThiMmMtZTNlNjJkYmJlYjM5IiwiZW1haWwiOiJQZWRyby5PbmRyaWNrYTgzQGdtYWlsLmNvbSIsInJvbGVzIjpbIkNPUlBPUkFURV9BRE1JTiJdLCJwZXJtaXNzaW9ucyI6WyJVU0VSX1JFQUQiLCJTVE9SRV9DUkVBVEUiLCJTVE9SRV9SRUFEIiwiU1RPUkVfVVBEQVRFIiwiU1RPUkVfREVMRVRFIl0sInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE3NjM3NTY2ODEsImV4cCI6MTc2Mzc1NzU4MSwiYXVkIjoibnV2YW5hLWFwaSIsImlzcyI6Im51dmFuYS1iYWNrZW5kIn0.taQYrfSTDDEcaJ1na5zP1y1lgBCFCLj01skRxXojwKI[22m
    [2m    - content-length: 10640228[22m


       at support\fixtures\rbac.fixture.ts:653

      651 |         options?: { headers?: Record<string, string> },
      652 |       ) => {
    > 653 |         return request.post(`${backendUrl}${path}`, {
          |                        ^
      654 |           data,
      655 |           headers: {
      656 |             "Content-Type": "application/json",
        at Object.post (c:\bmad\tests\support\fixtures\rbac.fixture.ts:653:24)
        at c:\bmad\tests\api\transaction-import.api.spec.ts:1367:53

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-transaction-import.api-be519-ld-reject-oversized-payload-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-transaction-import.api-be519-ld-reject-oversized-payload-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  212) [api] › tests\api\user-role-management.api.spec.ts:28:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-001: [P0] POST /api/admin/users - should create user with valid data (AC #2) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m400[39m

      40 |
      41 |     // THEN: User is created successfully
    > 42 |     expect(response.status()).toBe(201);
         |                               ^
      43 |     const body = await response.json();
      44 |     expect(body.success).toBe(true);
      45 |     expect(body.data).toHaveProperty("user_id");
        at c:\bmad\tests\api\user-role-management.api.spec.ts:42:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-user-role-management.a-c27a4--user-with-valid-data-AC-2--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-user-role-management.a-c27a4--user-with-valid-data-AC-2--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  213) [api] › tests\api\user-role-management.api.spec.ts:87:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-003: [P1] POST /api/admin/users - should reject duplicate email (AC #2) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m409[39m
    Received: [31m400[39m

      100 |
      101 |     // THEN: Duplicate email error is returned
    > 102 |     expect(response.status()).toBe(409);
          |                               ^
      103 |     const body = await response.json();
      104 |     expect(body.success).toBe(false);
      105 |     expect(body).toHaveProperty("error");
        at c:\bmad\tests\api\user-role-management.api.spec.ts:102:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-user-role-management.a-3ed4c-eject-duplicate-email-AC-2--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-user-role-management.a-3ed4c-eject-duplicate-email-AC-2--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  214) [api] › tests\api\user-role-management.api.spec.ts:774:7 › 2.8-API: User Management API - Role Assignment Operations › 2.8-API-021: [P1] DELETE /api/admin/users/:userId/roles/:userRoleId - should revoke role (AC #6) 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m400[39m

      801 |
      802 |     // THEN: Role is revoked successfully
    > 803 |     expect(response.status()).toBe(200);
          |                               ^
      804 |     const body = await response.json();
      805 |     expect(body.success).toBe(true);
      806 |
        at c:\bmad\tests\api\user-role-management.api.spec.ts:803:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-user-role-management.a-9056a----should-revoke-role-AC-6--api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-user-role-management.a-9056a----should-revoke-role-AC-6--api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  215) [api] › tests\api\user-role-management.api.spec.ts:1022:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-030: [P2] POST /api/admin/users - should handle unicode characters in name 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m201[39m
    Received: [31m400[39m

      1030 |
      1031 |     // THEN: User is created successfully
    > 1032 |     expect(response.status()).toBe(201);
           |                               ^
      1033 |     const body = await response.json();
      1034 |     expect(body.data.name).toBe("Test 日本語 User 🙂");
      1035 |   });
        at c:\bmad\tests\api\user-role-management.api.spec.ts:1032:31

    attachment #1: trace (application/zip) ─────────────────────────────────────────────────────────
    test-results\artifacts\api-user-role-management.a-e8e03--unicode-characters-in-name-api\trace.zip
    Usage:

        npx playwright show-trace test-results\artifacts\api-user-role-management.a-e8e03--unicode-characters-in-name-api\trace.zip

    ────────────────────────────────────────────────────────────────────────────────────────────────

  215 failed
    [e2e] › tests\e2e\admin-user-management.spec.ts:115:7 › Admin User Management E2E › [P0] Should load users list page 
    [e2e] › tests\e2e\admin-user-management.spec.ts:135:7 › Admin User Management E2E › [P0] Should successfully edit user name 
    [e2e] › tests\e2e\admin-user-management.spec.ts:162:7 › Admin User Management E2E › [P0] Should successfully change user status 
    [e2e] › tests\e2e\admin-user-management.spec.ts:190:7 › Admin User Management E2E › [P0] Should create a new user 
    [e2e] › tests\e2e\admin-user-management.spec.ts:282:7 › Admin User Management E2E › [P0] Should remove role from user 
    [e2e] › tests\e2e\admin-user-management.spec.ts:338:7 › Admin User Management E2E › [P1] Should show validation error for invalid email format 
    [e2e] › tests\e2e\admin-user-management.spec.ts:379:7 › Admin User Management E2E › [P1] Should display properly on mobile screens 
    [e2e] › tests\e2e\admin-user-management.spec.ts:410:7 › Admin User Management E2E › [P1] Should display role assignment dialog properly on mobile 
    [e2e] › tests\e2e\admin-user-management.spec.ts:437:7 › Admin User Management E2E › [P0] Should search users by name or email 
    [e2e] › tests\e2e\admin-user-management.spec.ts:456:7 › Admin User Management E2E › [P1] Should filter users by status 
    [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:57:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-001: should display dashboard layout with sidebar navigation when user is authenticated 
    [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:97:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-002: should display header with user info and logout when user is authenticated 
    [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:160:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-003: should route correctly when navigation links are clicked 
    [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:197:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-004: should handle logout functionality correctly 
    [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:278:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-005: should display responsive sidebar (collapsible on mobile) 
    [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:314:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-006: should apply design system colors correctly 
    [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:413:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-009: should use (dashboard) route group layout for dashboard pages 
    [e2e] › tests\e2e\basic-ui-layout-and-navigation.spec.ts:461:3 › 1.8-E2E-001: Dashboard Layout and Navigation › [P0] 1.8-E2E-001-010: should display user menu dropdown with profile and logout options 
    [e2e] › tests\e2e\client-companies-modal.spec.ts:286:7 › Client Companies Modal E2E › [P0] Should display company count on client detail page 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:178:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should show validation error for invalid email format 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:226:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should allow submission when passwords match 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:254:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should successfully create client with email and password 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:293:9 › Client Form Email and Password E2E › Create Client Form › [P0] Should successfully create client with email but no password 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:386:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should pre-fill email field when editing client 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:398:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should show password placeholder indicating optional update 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:431:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should successfully update client email 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:454:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should successfully update client password 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:486:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should show validation error when updating password with mismatched confirmation 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:549:9 › Client Form Email and Password E2E › Edit Client Form › [P0] Should show validation error for short password on update 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:567:9 › Client Form Email and Password E2E › Field Accessibility › [P0] Email and password fields should have proper labels and descriptions 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:593:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should toggle password visibility when eye icon is clicked 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:723:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should have accessible toggle buttons with proper ARIA labels 
    [e2e] › tests\e2e\client-form-email-password.spec.ts:801:9 › Client Form Email and Password E2E › Password Visibility Toggle › [P0] Should work on edit form as well 
    [e2e] › tests\e2e\client-management.spec.ts:116:7 › Client Management E2E › [P0] Should navigate to client detail page from clients list 
    [e2e] › tests\e2e\client-management.spec.ts:138:7 › Client Management E2E › [P0] Should successfully edit client name and status with confirmation 
    [e2e] › tests\e2e\client-management.spec.ts:198:7 › Client Management E2E › [P0] Should successfully edit client metadata and stay on page 
    [e2e] › tests\e2e\client-management.spec.ts:244:7 › Client Management E2E › [P1] Should show validation error for empty client name 
    [e2e] › tests\e2e\client-management.spec.ts:266:7 › Client Management E2E › [P1] Should show validation error for invalid JSON metadata 
    [e2e] › tests\e2e\client-management.spec.ts:290:7 › Client Management E2E › [P0] Should create a new client 
    [e2e] › tests\e2e\client-management.spec.ts:333:7 › Client Management E2E › [P1] Should cancel client edit without saving changes 
    [e2e] › tests\e2e\client-management.spec.ts:359:7 › Client Management E2E › [P0] Should prevent deletion of ACTIVE client 
    [e2e] › tests\e2e\client-management.spec.ts:377:7 › Client Management E2E › [P1] Should display delete dialog properly on mobile screens 
    [e2e] › tests\e2e\client-management.spec.ts:401:7 › Client Management E2E › [P1] Should successfully delete INACTIVE client with text confirmation 
    [e2e] › tests\e2e\client-management.spec.ts:458:7 › Client Management E2E › [P0] Should use public_id in URL when navigating to client detail 
    [e2e] › tests\e2e\client-management.spec.ts:482:7 › Client Management E2E › [P0] Should support direct navigation via public_id URL 
    [e2e] › tests\e2e\client-management.spec.ts:503:7 › Client Management E2E › [P0] Should support backward compatibility with UUID URLs 
    [e2e] › tests\e2e\client-management.spec.ts:519:7 › Client Management E2E › [P1] Should show error for invalid public_id format 
    [e2e] › tests\e2e\client-management.spec.ts:536:7 › Client Management E2E › [P1] Should not expose UUID in visible page content 
    [e2e] › tests\e2e\client-management.spec.ts:563:7 › Client Management E2E › [P0] Should display quick action buttons on client list 
    [e2e] › tests\e2e\client-management.spec.ts:589:7 › Client Management E2E › [P0] Should activate client from list with confirmation dialog 
    [e2e] › tests\e2e\client-management.spec.ts:640:7 › Client Management E2E › [P0] Should deactivate client from list with confirmation dialog 
    [e2e] › tests\e2e\client-management.spec.ts:691:7 › Client Management E2E › [P0] Should delete client from list with text input confirmation 
    [e2e] › tests\e2e\client-management.spec.ts:749:7 › Client Management E2E › [P0] Should prevent deleting ACTIVE client from list 
    [e2e] › tests\e2e\client-management.spec.ts:802:7 › Client Management E2E › [P0] Should cancel status change when clicking cancel in dialog 
    [e2e] › tests\e2e\client-management.spec.ts:832:7 › Client Management E2E › [P0] Should stay on edit page after multiple updates 
    [e2e] › tests\e2e\client-management.spec.ts:876:7 › Client Management E2E › [P1] Should prevent wrong text in delete confirmation 
    [e2e] › tests\e2e\company-management.spec.ts:116:7 › Company Management E2E › [P0] Should load companies list page 
    [e2e] › tests\e2e\company-management.spec.ts:124:7 › Company Management E2E › [P0] Should navigate to company detail page from companies list 
    [e2e] › tests\e2e\company-management.spec.ts:138:7 › Company Management E2E › [P0] Should successfully edit company name and status 
    [e2e] › tests\e2e\company-management.spec.ts:205:7 › Company Management E2E › [P0] Should create a new company 
    [e2e] › tests\e2e\company-management.spec.ts:240:7 › Company Management E2E › [P1] Should show validation error for empty company name 
    [e2e] › tests\e2e\company-management.spec.ts:259:7 › Company Management E2E › [P0] Should prevent deletion of ACTIVE company 
    [e2e] › tests\e2e\company-management.spec.ts:275:7 › Company Management E2E › [P1] Should successfully delete INACTIVE company 
    [e2e] › tests\e2e\company-management.spec.ts:307:7 › Company Management E2E › [P1] Should display properly on mobile screens 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:41:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-000: should NOT display dark mode toggle button on login page (unauthenticated) 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:55:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-001: should display dark mode toggle button in header when authenticated 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:80:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-002: should switch theme from light to dark when toggle is clicked 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:112:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-003: should switch theme from dark to light when toggle is clicked 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:144:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-004: should persist theme preference after page refresh 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:182:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-005: should save theme preference to localStorage with key 'nuvana-theme' 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:212:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-006: should display header elements in correct order (title, toggle, username, logout) 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:253:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-007: should reset theme to light mode on logout 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:318:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-009: should restore user's theme preference on subsequent login 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:383:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-010: should apply theme immediately on login without refresh (dark preference) 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:489:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-013: should apply User B's light preference when User B logs in (after User A with dark) 
    [e2e] › tests\e2e\dark-mode-toggle.spec.ts:559:7 › 1.9-E2E-001: Dark Mode Toggle › [P2] 1.9-E2E-001-014: should restore theme immediately on page load with existing session 
    [e2e] › tests\e2e\debug-modal-width.spec.ts:117:7 › Debug Modal Width › Debug modal width and classes on 375px viewport 
    [e2e] › tests\e2e\homepage-contact-form.spec.ts:11:7 › E2E-003: Homepage Contact Form › [P0] should submit contact form with valid data 
    [e2e] › tests\e2e\homepage-contact-form.spec.ts:43:7 › E2E-003: Homepage Contact Form › [P1] should prevent submission with empty required fields 
    [e2e] › tests\e2e\homepage-contact-form.spec.ts:73:7 › E2E-003: Homepage Contact Form › [P1] should validate email format 
    [e2e] › tests\e2e\homepage-contact-form.spec.ts:91:7 › E2E-003: Homepage Contact Form › [P1] should disable submit button while form is submitting 
    [e2e] › tests\e2e\homepage-contact-form.spec.ts:124:7 › E2E-003: Homepage Contact Form › [P2] should clear form fields after successful submission 
    [e2e] › tests\e2e\homepage-contact-form.spec.ts:159:7 › E2E-003: Homepage Contact Form › [P1] should display error message on form submission failure 
    [e2e] › tests\e2e\homepage.spec.ts:11:7 › E2E-002: Homepage - Marketing Page › [P0] should load homepage and display hero section 
    [e2e] › tests\e2e\homepage.spec.ts:26:7 › E2E-002: Homepage - Marketing Page › [P0] should display all four pain point cards 
    [e2e] › tests\e2e\homepage.spec.ts:53:7 › E2E-002: Homepage - Marketing Page › [P1] should scroll to contact form when clicking Get Started button 
    [e2e] › tests\e2e\homepage.spec.ts:74:7 › E2E-002: Homepage - Marketing Page › [P1] should display contact form with all required fields 
    [e2e] › tests\e2e\homepage.spec.ts:98:7 › E2E-002: Homepage - Marketing Page › [P1] should display benefits section with key features 
    [e2e] › tests\e2e\homepage.spec.ts:122:7 › E2E-002: Homepage - Marketing Page › [P2] should display key statistics in benefits section 
    [e2e] › tests\e2e\homepage.spec.ts:136:7 › E2E-002: Homepage - Marketing Page › [P1] should navigate to dashboard when clicking View Dashboard button 
    [e2e] › tests\e2e\homepage.spec.ts:149:7 › E2E-002: Homepage - Marketing Page › [P2] should have responsive layout on mobile viewport 
    [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on iPhone SE (375x667) 
    [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on iPhone 12 Pro (390x844) 
    [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on Samsung Galaxy S20 (360x800) 
    [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:103:9 › Mobile Alert Dialog Responsiveness › [P0] Alert dialog should fit properly on iPad Mini (768x1024) 
    [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:193:7 › Mobile Alert Dialog Responsiveness › [P1] Alert dialog content should not get cut off on small screens 
    [e2e] › tests\e2e\mobile-alert-dialog.spec.ts:232:7 › Mobile Alert Dialog Responsiveness › [P1] Alert dialog should be scrollable if content is too tall 
    [e2e] › tests\e2e\mobile-sidebar.spec.ts:10:7 › Mobile Sidebar [P0] › [P0] should open sidebar when hamburger menu is clicked 
    [e2e] › tests\e2e\mobile-sidebar.spec.ts:22:7 › Mobile Sidebar [P0] › [P0] should close sidebar when overlay is clicked 
    [e2e] › tests\e2e\mobile-sidebar.spec.ts:43:7 › Mobile Sidebar [P0] › [P0] should allow content interaction when sidebar is closed 
    [e2e] › tests\e2e\mobile-sidebar.spec.ts:68:7 › Mobile Sidebar [P0] › [P0] should have accessible title and description 
    [e2e] › tests\e2e\mobile-sidebar.spec.ts:85:7 › Mobile Sidebar [P0] › [P1] should close sidebar when navigation link is clicked 
    [e2e] › tests\e2e\mobile-sidebar.spec.ts:117:7 › Desktop Sidebar [P1] › [P1] should always show sidebar on desktop 
    [e2e] › tests\e2e\store-management.spec.ts:139:7 › Store Management E2E › [P0] Should load stores list page 
    [e2e] › tests\e2e\store-management.spec.ts:147:7 › Store Management E2E › [P0] Should navigate to store detail page from stores list 
    [e2e] › tests\e2e\store-management.spec.ts:157:7 › Store Management E2E › [P0] Should successfully edit store name and status 
    [e2e] › tests\e2e\store-management.spec.ts:193:7 › Store Management E2E › [P0] Should successfully edit store location 
    [e2e] › tests\e2e\store-management.spec.ts:223:7 › Store Management E2E › [P0] Should successfully change store timezone 
    [e2e] › tests\e2e\store-management.spec.ts:253:7 › Store Management E2E › [P0] Should create a new store 
    [e2e] › tests\e2e\store-management.spec.ts:297:7 › Store Management E2E › [P0] Should successfully update store configuration (operating hours) 
    [e2e] › tests\e2e\store-management.spec.ts:354:7 › Store Management E2E › [P1] Should show validation error for invalid timezone 
    [e2e] › tests\e2e\store-management.spec.ts:376:7 › Store Management E2E › [P1] Should prevent deletion of ACTIVE store 
    [e2e] › tests\e2e\store-management.spec.ts:390:7 › Store Management E2E › [P1] Should successfully delete INACTIVE store 
    [e2e] › tests\e2e\store-management.spec.ts:424:7 › Store Management E2E › [P1] Should display properly on mobile screens 
    [e2e] › tests\e2e\store-management.spec.ts:436:7 › Store Management E2E › [P1] Should display store configuration form properly on mobile 
    [api] › tests\api\client-management.api.spec.ts:20:7 › Client Management API - CRUD Operations › [P0] POST /api/clients - should create client with valid data (AC #1) 
    [api] › tests\api\client-management.api.spec.ts:257:7 › Client Management API - CRUD Operations › [P0] PUT /api/clients/:clientId - should update client (AC #3) 
    [api] › tests\api\client-management.api.spec.ts:305:7 › Client Management API - CRUD Operations › [P0] PUT /api/clients/:clientId - should log status change to INACTIVE (AC #4) 
    [api] › tests\api\client-management.api.spec.ts:342:7 › Client Management API - CRUD Operations › [P0] DELETE /api/clients/:clientId - should soft delete client (AC #5) 
    [api] › tests\api\client-management.api.spec.ts:462:7 › Client Management API - Business Logic › [P0] DELETE /api/clients/:clientId - should cascade soft delete to associated companies (AC #5) 
    [api] › tests\api\client-management.api.spec.ts:506:7 › Client Management API - Business Logic › [P1] PUT /api/clients/:clientId - should allow reactivation from INACTIVE to ACTIVE 
    [api] › tests\api\client-management.api.spec.ts:549:7 › Client Management API - Business Logic › [P2] POST /api/clients - should allow duplicate client names (names not unique) 
    [api] › tests\api\client-management.api.spec.ts:606:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P2] POST /api/clients - should handle special characters in name 
    [api] › tests\api\client-management.api.spec.ts:622:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P2] POST /api/clients - should handle unicode/emoji characters in name 
    [api] › tests\api\client-management.api.spec.ts:654:9 › Client Management API - Edge Cases › Name Field Edge Cases › [P2] POST /api/clients - should trim leading/trailing whitespace 
    [api] › tests\api\client-management.api.spec.ts:673:9 › Client Management API - Edge Cases › Metadata Field Edge Cases › [P2] POST /api/clients - should accept empty metadata object 
    [api] › tests\api\client-management.api.spec.ts:688:9 › Client Management API - Edge Cases › Metadata Field Edge Cases › [P2] POST /api/clients - should accept null metadata 
    [api] › tests\api\client-management.api.spec.ts:703:9 › Client Management API - Edge Cases › Metadata Field Edge Cases › [P2] POST /api/clients - should handle deeply nested metadata 
    [api] › tests\api\client-management.api.spec.ts:750:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] GET /api/clients/:clientId - should reject invalid UUID format 
    [api] › tests\api\client-management.api.spec.ts:764:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] GET /api/clients/:clientId - should reject empty string ID 
    [api] › tests\api\client-management.api.spec.ts:774:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] PUT /api/clients/:clientId - should reject invalid UUID format 
    [api] › tests\api\client-management.api.spec.ts:789:9 › Client Management API - Edge Cases › Client ID Edge Cases › [P1] DELETE /api/clients/:clientId - should reject invalid UUID format 
    [api] › tests\api\client-management.api.spec.ts:940:7 › Client Management API - Public ID Support › [P0] POST /api/clients - should auto-generate valid public_id 
    [api] › tests\api\client-management.api.spec.ts:972:7 › Client Management API - Public ID Support › [P0] POST /api/clients - should generate unique public_ids for multiple clients 
    [api] › tests\api\client-management.api.spec.ts:1117:7 › Client Management API - Dual ID Format Support (PUT) › [P0] PUT /api/clients/:id - should update via UUID (backward compatibility) 
    [api] › tests\api\client-management.api.spec.ts:1145:7 › Client Management API - Dual ID Format Support (PUT) › [P0] PUT /api/clients/:id - should update via public_id (new standard) 
    [api] › tests\api\client-management.api.spec.ts:1190:7 › Client Management API - Dual ID Format Support (DELETE) › [P0] DELETE /api/clients/:id - should delete via UUID (backward compatibility) 
    [api] › tests\api\client-management.api.spec.ts:1216:7 › Client Management API - Dual ID Format Support (DELETE) › [P0] DELETE /api/clients/:id - should delete via public_id (new standard) 
    [api] › tests\api\edge-cases.api.spec.ts:35:7 › EDGE-API-001: Edge Cases - Empty and Null Values › [P2] EDGE-API-001-002: POST /api/users with empty body should return 400 or 404 
    [api] › tests\api\error-handling.api.spec.ts:100:7 › ERR-API-003: Error Handling - Malformed Requests › [P1] ERR-API-003-001: POST /api/users with invalid JSON should return 400 
    [api] › tests\api\error-handling.api.spec.ts:116:7 › ERR-API-003: Error Handling - Malformed Requests › [P1] ERR-API-003-002: POST /api/users with missing Content-Type should handle gracefully 
    [api] › tests\api\jwt-token-system.api.spec.ts:190:7 › 1.6-API-002: JWT Token Validation Middleware › [P1] 1.6-API-002-007: Protected route should return 401 for token with missing required claims 
    [api] › tests\api\jwt-token-system.api.spec.ts:384:7 › 1.6-API-003: Refresh Token Endpoint › [P0] 1.6-API-003-005: Refresh token should be rotated (old token invalidated, new token issued) 
    [api] › tests\api\jwt-token-system.api.spec.ts:680:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P0] 1.6-API-004-004: Multiple API requests should reuse refreshed token (no duplicate refresh) 
    [api] › tests\api\jwt-token-system.api.spec.ts:820:7 › 1.6-API-004: Automatic Token Refresh on 401 (Frontend Auto-Retry) › [P1] 1.6-API-004-007: Refresh token rotation should prevent replay attacks 
    [api] › tests\api\local-auth.api.spec.ts:17:9 › Local Authentication API › POST /api/auth/login › should login successfully with valid credentials 
    [api] › tests\api\local-auth.api.spec.ts:91:9 › Local Authentication API › POST /api/auth/login › should return 401 for inactive user 
    [api] › tests\api\local-auth.api.spec.ts:120:9 › Local Authentication API › POST /api/auth/login › should return 401 for user without password set 
    [api] › tests\api\local-auth.api.spec.ts:197:9 › Local Authentication API › POST /api/auth/login › should include roles and permissions in JWT token 
    [api] › tests\api\local-auth.api.spec.ts:243:9 › Local Authentication API › POST /api/auth/logout › should logout and clear cookies 
    [api] › tests\api\local-auth.api.spec.ts:259:9 › Local Authentication API › POST /api/auth/logout › should succeed even without existing session 
    [api] › tests\api\local-auth.api.spec.ts:288:9 › Local Authentication API › GET /api/auth/me › should return 401 without token 
    [api] › tests\api\local-auth.api.spec.ts:313:9 › Local Authentication API › POST /api/auth/refresh › should return 401 without refresh token 
    [api] › tests\api\local-auth.api.spec.ts:325:9 › Local Authentication API › Full Authentication Flow › should complete full login -> access protected route -> logout flow 
    [api] › tests\api\rbac-framework.api.spec.ts:126:7 › RBAC Framework - Permission Checking › [P0] should check STORE scope permissions correctly 
    [api] › tests\api\rbac-framework.api.spec.ts:223:7 › RBAC Framework - Permission Checking › [P0] should handle multiple roles with different scopes 
    [api] › tests\api\rls-policies.api.spec.ts:1373:7 › RLS Policies - Security Tests › 2.3-API-028: [P0] should prevent comment-based SQL injection in RLS context 
    [api] › tests\api\rls-policies.api.spec.ts:1413:7 › RLS Policies - Context Isolation › 2.3-API-029: [P1] should properly clear RLS context after reset 
    [api] › tests\api\store-management.api.spec.ts:124:7 › Store Management API - CRUD Operations › 2.2-API-003: [P0] POST /api/companies/:companyId/stores - should reject invalid timezone 
    [api] › tests\api\store-management.api.spec.ts:298:7 › Store Management API - CRUD Operations › 2.2-API-009: [P0] PUT /api/stores/:storeId - should update store 
    [api] › tests\api\store-management.api.spec.ts:372:7 › Store Management API - CRUD Operations › 2.2-API-011: [P0] DELETE /api/stores/:storeId - should soft delete store 
    [api] › tests\api\store-management.api.spec.ts:557:7 › Store Management API - Error Handling › 2.2-API-017: [P0] should return 404 for non-existent store 
    [api] › tests\api\store-management.api.spec.ts:771:7 › Store Management API - Validation (P1) › 2.2-API-027: [P1] should reject creation when company does not exist 
    [api] › tests\api\store-management.api.spec.ts:859:7 › Store Configuration API › 2.5-API-001: [P0] PUT /api/stores/:storeId/configuration - should update store configuration with valid data 
    [api] › tests\api\store-management.api.spec.ts:923:7 › Store Configuration API › 2.5-API-002: [P0] PUT /api/stores/:storeId/configuration - should validate timezone format 
    [api] › tests\api\store-management.api.spec.ts:1015:7 › Store Configuration API › 2.5-API-005: [P0] PUT /api/stores/:storeId/configuration - should enforce company isolation 
    [api] › tests\api\store-management.api.spec.ts:1086:7 › Store Configuration API › 2.5-API-006: [P0] PUT /api/stores/:storeId/configuration - should return 404 for non-existent store 
    [api] › tests\api\store-management.api.spec.ts:1110:7 › Store Configuration API › 2.5-API-007: [P0] PUT /api/stores/:storeId/configuration - should enforce US standard operating hours format 
    [api] › tests\api\store-management.api.spec.ts:1492:7 › Store Configuration API › 2.5-API-020: [P0] SECURITY - should reject XSS in address field 
    [api] › tests\api\store-management.api.spec.ts:1717:7 › Store Configuration API › 2.5-API-028: [P0] SECURITY - should reject mass assignment (additional fields beyond allowed) 
    [api] › tests\api\transaction-data-models.api.spec.ts:84:7 › Transaction Data Models - CRUD Operations › [P0] should create Transaction with all required fields 
    [api] › tests\api\transaction-data-models.api.spec.ts:146:7 › Transaction Data Models - CRUD Operations › [P0] should create TransactionLineItems linked to Transaction 
    [api] › tests\api\transaction-data-models.api.spec.ts:209:7 › Transaction Data Models - CRUD Operations › [P0] should create TransactionPayments linked to Transaction 
    [api] › tests\api\transaction-data-models.api.spec.ts:361:7 › Transaction Data Models - Query Operations › [P1] should query transactions by store_id 
    [api] › tests\api\transaction-data-models.api.spec.ts:406:7 › Transaction Data Models - Query Operations › [P1] should query transactions by shift_id 
    [api] › tests\api\transaction-data-models.api.spec.ts:470:7 › Transaction Data Models - Query Operations › [P1] should query transactions by timestamp range 
    [api] › tests\api\transaction-data-models.api.spec.ts:517:7 › Transaction Data Models - Query Operations › [P1] should load transaction with line items and payments (relationships) 
    [api] › tests\api\transaction-data-models.api.spec.ts:593:7 › Transaction Data Models - Business Logic › [P2] should verify transaction total matches formula: subtotal + tax - discount 
    [api] › tests\api\transaction-data-models.api.spec.ts:630:7 › Transaction Data Models - Business Logic › [P2] should verify transaction total matches line items sum 
    [api] › tests\api\transaction-data-models.api.spec.ts:693:7 › Transaction Data Models - Business Logic › [P2] should allow negative totals for refund transactions 
    [api] › tests\api\transaction-data-models.api.spec.ts:733:7 › Transaction Data Models - Business Logic › [P2] should allow multiple payments per transaction (split tender) 
    [api] › tests\api\transaction-data-models.api.spec.ts:790:7 › Transaction Data Models - Business Logic › [P2] should allow overpayment (customer pays more, receives change) 
    [api] › tests\api\transaction-data-models.api.spec.ts:854:7 › Transaction Data Models - Edge Cases › [P2] should handle zero values for subtotal, tax, discount 
    [api] › tests\api\transaction-data-models.api.spec.ts:884:7 › Transaction Data Models - Edge Cases › [P2] should handle very large transaction amounts 
    [api] › tests\api\transaction-data-models.api.spec.ts:918:7 › Transaction Data Models - Edge Cases › [P2] should handle decimal precision correctly 
    [api] › tests\api\transaction-data-models.api.spec.ts:958:7 › Transaction Data Models - Edge Cases › [P2] should handle zero quantity line items 
    [api] › tests\api\transaction-data-models.api.spec.ts:998:7 › Transaction Data Models - Edge Cases › [P2] should handle negative quantity line items (returns) 
    [api] › tests\api\transaction-data-models.api.spec.ts:1045:7 › Transaction Data Models - Edge Cases › [P2] should handle very large quantities 
    [api] › tests\api\transaction-data-models.api.spec.ts:1189:7 › Transaction Data Models - Security › [P1] should prevent creating transactions in unauthorized stores 
    [api] › tests\api\transaction-data-models.api.spec.ts:1255:7 › Transaction Data Models - Security › [P1] should handle SQL injection attempts in string fields 
    [api] › tests\api\transaction-data-models.api.spec.ts:1306:7 › Transaction Data Models - Security › [P1] should handle XSS attempts in reference fields 
    [api] › tests\api\transaction-data-models.api.spec.ts:1348:7 › Transaction Data Models - Security › [P2] should validate payment method string length 
    [api] › tests\api\transaction-data-models.api.spec.ts:1393:7 › Transaction Data Models - Shift Rules › [P1] should not allow transactions on closed shifts 
    [api] › tests\api\transaction-import.api.spec.ts:79:7 › Transaction Import API - Authentication › 3.2-API-001: [P0] should return 401 when JWT token is missing 
    [api] › tests\api\transaction-import.api.spec.ts:103:7 › Transaction Import API - Authentication › 3.2-API-002: [P0] should return 401 when JWT token is invalid 
    [api] › tests\api\transaction-import.api.spec.ts:125:7 › Transaction Import API - Authentication › 3.2-API-003: [P0] should return 403 when user lacks TRANSACTION_CREATE permission 
    [api] › tests\api\transaction-import.api.spec.ts:157:7 › Transaction Import API - Authentication › 3.2-API-004: [P0] should return 403 when store_id is not accessible to user 
    [api] › tests\api\transaction-import.api.spec.ts:210:7 › Transaction Import API - Core Functionality › 3.2-API-005: [P1] should return 202 Accepted with correlation_id for valid transaction 
    [api] › tests\api\transaction-import.api.spec.ts:246:7 › Transaction Import API - Core Functionality › 3.2-API-006: [P1] should return valid UUID format for correlation_id 
    [api] › tests\api\transaction-import.api.spec.ts:278:7 › Transaction Import API - Core Functionality › 3.2-API-007: [P1] should return 404 when shift_id does not exist 
    [api] › tests\api\transaction-import.api.spec.ts:309:7 › Transaction Import API - Core Functionality › 3.2-API-008: [P1] should return 409 when shift is CLOSED 
    [api] › tests\api\transaction-import.api.spec.ts:349:7 › Transaction Import API - Core Functionality › 3.2-API-009: [P1] should enqueue message to RabbitMQ transactions.processing queue 
    [api] › tests\api\transaction-import.api.spec.ts:379:7 › Transaction Import API - Core Functionality › 3.2-API-010: [P1] should return 503 when RabbitMQ connection fails 
    [api] › tests\api\transaction-import.api.spec.ts:451:7 › Transaction Import API - Validation › 3.2-API-012: [P2] should accept single item transaction 
    [api] › tests\api\transaction-import.api.spec.ts:491:7 › Transaction Import API - Validation › 3.2-API-013: [P3] should handle large number of line items (100+) 
    [api] › tests\api\transaction-import.api.spec.ts:716:7 › Transaction Import API - Validation › 3.2-API-019: [P2] should accept multiple payments (split payment) 
    [api] › tests\api\transaction-import.api.spec.ts:752:7 › Transaction Import API - Validation › 3.2-API-020: [P2] should accept exact payment match 
    [api] › tests\api\transaction-import.api.spec.ts:785:7 › Transaction Import API - Validation › 3.2-API-021: [P2] should accept overpayment (change scenario) 
    [api] › tests\api\transaction-import.api.spec.ts:950:7 › Transaction Import API - Validation › 3.2-API-026: [P3] should handle very large transaction amounts (1,000,000+) 
    [api] › tests\api\transaction-import.api.spec.ts:1068:7 › Transaction Import API - Validation › 3.2-API-029: [P2] should return 400 with details when required fields are missing 
    [api] › tests\api\transaction-import.api.spec.ts:1341:7 › Transaction Import API - Security › 3.2-API-036: [P1] should reject oversized payload 
    [api] › tests\api\user-role-management.api.spec.ts:28:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-001: [P0] POST /api/admin/users - should create user with valid data (AC #2) 
    [api] › tests\api\user-role-management.api.spec.ts:87:7 › 2.8-API: User Management API - User CRUD Operations › 2.8-API-003: [P1] POST /api/admin/users - should reject duplicate email (AC #2) 
    [api] › tests\api\user-role-management.api.spec.ts:774:7 › 2.8-API: User Management API - Role Assignment Operations › 2.8-API-021: [P1] DELETE /api/admin/users/:userId/roles/:userRoleId - should revoke role (AC #6) 
    [api] › tests\api\user-role-management.api.spec.ts:1022:7 › 2.8-API: User Management API - Edge Cases › 2.8-API-030: [P2] POST /api/admin/users - should handle unicode characters in name 
  9 skipped
  16 did not run
  412 passed (11.9m)
